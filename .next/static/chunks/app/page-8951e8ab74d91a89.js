(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{7773:function(e,t,a){Promise.resolve().then(a.bind(a,1871))},1871:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return Router}});var s=a(7437),l=a(2265),n=a(680),i=a(7730),r=a(2616),c=a(9839),o=a(9787),d=a(1354);function MultiAuth(){let[e,t]=(0,l.useState)(null),{login:a,isAuthenticated:u}=(0,n.useAuth)(),x=[{id:"internet-identity",name:"Internet Identity",icon:i.Z},{id:"plug-wallet",name:"Plug Wallet",icon:r.Z},{id:"stoic-wallet",name:"Stoic Wallet",icon:c.Z}],handleAuth=async e=>{t(e);try{await a(e)}catch(e){console.error("Auth failed:",e)}finally{t(null)}};return u?null:(0,s.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-gray-950 via-gray-900 to-blue-950 flex items-center justify-center p-4",children:(0,s.jsxs)("div",{className:"max-w-md w-full space-y-6",children:[(0,s.jsxs)("div",{className:"text-center space-y-4",children:[(0,s.jsxs)("div",{className:"flex items-center justify-center space-x-3",children:[(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)("div",{className:"absolute inset-0 bg-orange-500 blur-xl opacity-50 animate-pulse"}),(0,s.jsx)(o.Z,{className:"relative text-orange-400 w-12 h-12"})]}),(0,s.jsx)("h1",{className:"text-4xl font-bold bg-gradient-to-r from-orange-400 via-white to-green-400 bg-clip-text text-transparent",children:"HeliosHash DAO"})]}),(0,s.jsx)("p",{className:"text-gray-400 text-lg",children:"Choose Authentication Method"})]}),(0,s.jsx)("div",{className:"space-y-4",children:x.map(t=>(0,s.jsxs)("button",{onClick:()=>handleAuth(t.id),disabled:!!e,className:"relative group w-full",children:[(0,s.jsx)("div",{className:"absolute inset-0 bg-gray-800 blur-lg opacity-75 group-hover:opacity-100 transition-all rounded-2xl"}),(0,s.jsx)("div",{className:"relative bg-gray-900/80 backdrop-blur-xl border border-gray-800 p-6 rounded-2xl hover:bg-gray-800/80 transition-all",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,s.jsx)(t.icon,{className:"text-white w-8 h-8"}),(0,s.jsxs)("div",{className:"text-left",children:[(0,s.jsx)("h3",{className:"text-white font-semibold text-lg",children:t.name}),(0,s.jsx)("p",{className:"text-gray-400 text-sm",children:"Web3 Authentication"})]})]}),e===t.id&&(0,s.jsx)(d.Z,{className:"text-white animate-spin w-6 h-6"})]})})]},t.id))}),(0,s.jsx)("div",{className:"text-center",children:(0,s.jsx)("p",{className:"text-gray-500 text-sm",children:"Secure authentication powered by DFINITY"})})]})})}var u=a(2601);a(263).Buffer;let initBackend=async()=>{let{AuthClient:e}=await Promise.all([a.e(214),a.e(273)]).then(a.bind(a,3273)),{HttpAgent:t}=await Promise.all([a.e(214),a.e(69)]).then(a.bind(a,5069)),s=await e.create(),l=await s.isAuthenticated(),n=l?await s.getIdentity():void 0,i="http://localhost:4943",r=new t({identity:n,host:i});if(i.includes("localhost"))try{await r.fetchRootKey()}catch(e){}let c=null,o=u.env.HHU_BINDINGS_PATH||u.env.DAO_BINDINGS_PATH;if(o)try{c=await import(o)}catch(e){console.warn("Could not import HHU bindings from",o,e)}return{authClient:s,agent:r,identity:n,bindings:c}},getHHUTokenActor=async e=>{let t=u.env.HHU_BINDINGS_PATH||u.env.DAO_BINDINGS_PATH;if(!t)return null;try{let a=await import(t);if((null==a?void 0:a.createActor)&&(null==a?void 0:a.canisterId))return a.createActor(a.canisterId,{agent:e})}catch(e){console.error("Failed to create HHU actor from bindings",e)}return null},fetchUserTokens=async e=>{try{let t=await initBackend();if(t&&t.agent){let a=await getHHUTokenActor(t.agent);if(a&&a.balanceOf){let s=await a.balanceOf(null!=e?e:t.identity?t.identity.getPrincipal().toString():void 0);return s}}}catch(e){console.warn("fetchUserTokens failed, falling back to mock",e)}return 25e3},fetchProposals=async()=>{try{let e=await initBackend();if(e&&e.agent){let t=await getHHUTokenActor(e.agent);if(t&&t.getAllProposals)return await t.getAllProposals();if(t&&t.getProposals)return await t.getProposals()}}catch(e){console.warn("fetchProposals failed, falling back to mock",e)}return[{id:1,title:"Solar Farm Expansion",amount:1e5,status:"active"},{id:2,title:"Village Microgrid",amount:5e4,status:"funded"}]};function WorkingDashboard(){let[e,t]=(0,l.useState)(null),[a,n]=(0,l.useState)([]),[i,r]=(0,l.useState)(!0);return((0,l.useEffect)(()=>{let loadData=async()=>{try{let[e,a]=await Promise.all([fetchUserTokens(),fetchProposals()]);t(null!=e?e:null),n(a||[])}catch(e){console.error("Failed to load data:",e),t(25e3),n([{id:1,title:"Solar Farm Expansion",description:"Expand our solar mining operations",amount:1e5,votes:150},{id:2,title:"Village Microgrid",description:"Build community energy infrastructure",amount:5e4,votes:80}])}finally{r(!1)}};loadData()},[]),i)?(0,s.jsx)("div",{className:"min-h-screen bg-gray-900 flex items-center justify-center",children:(0,s.jsx)("div",{className:"text-white text-xl",children:"Loading..."})}):(0,s.jsx)("div",{className:"min-h-screen bg-gray-900 text-white",children:(0,s.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[(0,s.jsxs)("div",{className:"text-center mb-8",children:[(0,s.jsx)("h1",{className:"text-3xl font-bold text-orange-500",children:"HELIOSHASH DAO"}),(0,s.jsx)("p",{className:"text-gray-400",children:"Solar-Powered Bitcoin Mining"})]}),(0,s.jsx)("div",{className:"bg-gray-800 rounded-lg p-6 mb-6",children:(0,s.jsxs)("div",{className:"flex flex-col md:flex-row justify-between items-center",children:[(0,s.jsxs)("div",{className:"mb-4 md:mb-0",children:[(0,s.jsx)("h2",{className:"text-xl font-semibold",children:"Miner #047"}),(0,s.jsxs)("p",{className:"text-gray-400",children:[(null!=e?e:0).toLocaleString()," HHU"]})]}),(0,s.jsxs)("div",{className:"flex space-x-2",children:[(0,s.jsx)("button",{className:"bg-orange-500 px-4 py-2 rounded",children:"Send"}),(0,s.jsx)("button",{className:"bg-green-500 px-4 py-2 rounded",children:"Receive"})]})]})}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[(0,s.jsxs)("div",{className:"bg-gray-800 p-4 rounded text-center",children:[(0,s.jsx)("p",{className:"text-gray-400",children:"Hash Rate"}),(0,s.jsx)("p",{className:"text-xl font-semibold",children:"352 TH/s"})]}),(0,s.jsxs)("div",{className:"bg-gray-800 p-4 rounded text-center",children:[(0,s.jsx)("p",{className:"text-gray-400",children:"BTC Mined"}),(0,s.jsx)("p",{className:"text-xl font-semibold",children:"0.0034 BTC"})]}),(0,s.jsxs)("div",{className:"bg-gray-800 p-4 rounded text-center",children:[(0,s.jsx)("p",{className:"text-gray-400",children:"Solar Power"}),(0,s.jsx)("p",{className:"text-xl font-semibold",children:"4.8 MW"})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2 mb-6",children:[(0,s.jsx)("button",{className:"bg-blue-500 p-3 rounded text-sm",children:"Boost Power"}),(0,s.jsx)("button",{className:"bg-green-500 p-3 rounded text-sm",children:"New Proposal"}),(0,s.jsx)("button",{className:"bg-purple-500 p-3 rounded text-sm",children:"Mining Rigs"}),(0,s.jsx)("button",{className:"bg-cyan-500 p-3 rounded text-sm",children:"Analytics"})]}),(0,s.jsxs)("div",{className:"bg-gray-800 rounded-lg p-6",children:[(0,s.jsxs)("h3",{className:"text-xl font-semibold mb-4",children:["Live Proposals (",a.length,")"]}),(0,s.jsx)("div",{className:"space-y-4",children:a.map(e=>(0,s.jsxs)("div",{className:"bg-gray-700 p-4 rounded",children:[(0,s.jsx)("h4",{className:"font-semibold",children:e.title}),(0,s.jsx)("p",{className:"text-gray-400 text-sm mb-2",children:e.description}),(0,s.jsxs)("div",{className:"flex justify-between text-sm items-center",children:[(0,s.jsxs)("span",{children:[e.amount.toLocaleString()," HHU"]}),(0,s.jsxs)("span",{children:[e.votes," votes"]}),(0,s.jsx)("button",{className:"bg-orange-500 px-3 py-1 rounded text-xs",children:"Vote"})]})]},e.id))})]})]})})}function Router(){let{isAuthenticated:e}=(0,n.useAuth)();return e?(0,s.jsx)(WorkingDashboard,{}):(0,s.jsx)(MultiAuth,{})}},680:function(e,t,a){"use strict";a.r(t),a.d(t,{AuthProvider:function(){return AuthProvider},useAuth:function(){return useAuth}});var s=a(7437),l=a(2265);let n=(0,l.createContext)(void 0),AuthProvider=e=>{let{children:t}=e,[a,i]=(0,l.useState)(null);(0,l.useEffect)(()=>{let e=localStorage.getItem("hhdao-user");e&&i(JSON.parse(e))},[]);let login=async e=>{let t={principal:"principal-".concat(e,"-").concat(Date.now()),provider:e,name:"Rahul Kumar"};i(t),localStorage.setItem("hhdao-user",JSON.stringify(t))};return(0,s.jsx)(n.Provider,{value:{user:a,login,logout:()=>{i(null),localStorage.removeItem("hhdao-user")},isAuthenticated:!!a},children:t})},useAuth=()=>{let e=(0,l.useContext)(n);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}}},function(e){e.O(0,[787,971,472,744],function(){return e(e.s=7773)}),_N_E=e.O()}]);