var qi=t=>{throw TypeError(t)};var gs=(t,e,n)=>e.has(t)||qi("Cannot "+n);var E=(t,e,n)=>(gs(t,e,"read from private field"),n?n.call(t):e.get(t)),H=(t,e,n)=>e.has(t)?qi("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),P=(t,e,n,r)=>(gs(t,e,"write to private field"),r?r.call(t,n):e.set(t,n),n),de=(t,e,n)=>(gs(t,e,"access private method"),n);var $i=(t,e,n,r)=>({set _(s){P(t,e,s,n)},get _(){return E(t,e,r)}});import{S as ic,i as oc,s as ac,n as Mi,d as ws,e as cc,f as fc,h as We,J as uc,K as dc,L as lc,G as Br,j as rn,k as Di,m as Tr,M as hc,l as bc,o as sn,q as Sr,p as yc}from"../chunks/DWYFH0fm.js";import"../chunks/IHki7fMi.js";var Pi;(function(t){t[t.SysFatal=1]="SysFatal",t[t.SysTransient=2]="SysTransient",t[t.DestinationInvalid=3]="DestinationInvalid",t[t.CanisterReject=4]="CanisterReject",t[t.CanisterError=5]="CanisterError"})(Pi||(Pi={}));var On;(function(t){t.Replied="replied",t.Rejected="rejected"})(On||(On={}));function pc(t){return t!=null&&"reject_code"in t}function mc(t){return t!=null&&"certificate"in t}const Vr="abcdefghijklmnopqrstuvwxyz234567",Nn=Object.create(null);for(let t=0;t<Vr.length;t++)Nn[Vr[t]]=t;Nn[0]=Nn.o;Nn[1]=Nn.i;function gc(t){let e=0,n=0,r="";function s(i){return e<0?n|=i>>-e:n=i<<e&248,e>3?(e-=8,1):(e<4&&(r+=Vr[n>>3],e+=5),0)}for(let i=0;i<t.length;)i+=s(t[i]);return r+(e<0?Vr[n>>3]:"")}function wc(t){let e=0,n=0;const r=new Uint8Array(t.length*4/3|0);let s=0;function i(o){let a=Nn[o.toLowerCase()];if(a===void 0)throw new Error(`Invalid character: ${JSON.stringify(o)}`);a<<=3,n|=a>>>e,e+=5,e>=8&&(r[s++]=n,e-=8,e>0?n=a<<5-e&255:n=0)}for(const o of t)i(o);return r.slice(0,s)}const xc=new Uint32Array([0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918e3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117]);function _c(t){let e=-1;for(let n=0;n<t.length;n++){const s=(t[n]^e)&255;e=xc[s]^e>>>8}return(e^-1)>>>0}const on=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */function gr(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function Ec(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function De(t,...e){if(!gr(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function ki(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function vc(t,e){De(t);const n=e.outputLen;if(t.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}function Kn(...t){for(let e=0;e<t.length;e++)t[e].fill(0)}function xs(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function Qe(t,e){return t<<32-e|t>>>e}const Co=typeof Uint8Array.from([]).toHex=="function"&&typeof Uint8Array.fromHex=="function",Ic=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function ee(t){if(De(t),Co)return t.toHex();let e="";for(let n=0;n<t.length;n++)e+=Ic[t[n]];return e}const it={_0:48,_9:57,A:65,F:70,a:97,f:102};function Li(t){if(t>=it._0&&t<=it._9)return t-it._0;if(t>=it.A&&t<=it.F)return t-(it.A-10);if(t>=it.a&&t<=it.f)return t-(it.a-10)}function wr(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);if(Co)return Uint8Array.fromHex(t);const e=t.length,n=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);const r=new Uint8Array(n);for(let s=0,i=0;s<n;s++,i+=2){const o=Li(t.charCodeAt(i)),a=Li(t.charCodeAt(i+1));if(o===void 0||a===void 0){const c=t[i]+t[i+1];throw new Error('hex string expected, got non-hex character "'+c+'" at index '+i)}r[s]=o*16+a}return r}function re(t){if(typeof t!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(t))}function Oo(t){return typeof t=="string"&&(t=re(t)),De(t),t}function X(...t){let e=0;for(let r=0;r<t.length;r++){const s=t[r];De(s),e+=s.length}const n=new Uint8Array(e);for(let r=0,s=0;r<t.length;r++){const i=t[r];n.set(i,s),s+=i.length}return n}class Bc{}function Js(t){const e=r=>t().update(Oo(r)).digest(),n=t();return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=()=>t(),e}function No(t=32){if(on&&typeof on.getRandomValues=="function")return on.getRandomValues(new Uint8Array(t));if(on&&typeof on.randomBytes=="function")return Uint8Array.from(on.randomBytes(t));throw new Error("crypto.getRandomValues must be defined")}function Tc(t,e,n,r){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,n,r);const s=BigInt(32),i=BigInt(4294967295),o=Number(n>>s&i),a=Number(n&i),c=r?4:0,u=r?0:4;t.setUint32(e+c,o,r),t.setUint32(e+u,a,r)}function Sc(t,e,n){return t&e^~t&n}function Ac(t,e,n){return t&e^t&n^e&n}class Ro extends Bc{constructor(e,n,r,s){super(),this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.blockLen=e,this.outputLen=n,this.padOffset=r,this.isLE=s,this.buffer=new Uint8Array(e),this.view=xs(this.buffer)}update(e){ki(this),e=Oo(e),De(e);const{view:n,buffer:r,blockLen:s}=this,i=e.length;for(let o=0;o<i;){const a=Math.min(s-this.pos,i-o);if(a===s){const c=xs(e);for(;s<=i-o;o+=s)this.process(c,o);continue}r.set(e.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===s&&(this.process(n,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){ki(this),vc(e,this),this.finished=!0;const{buffer:n,view:r,blockLen:s,isLE:i}=this;let{pos:o}=this;n[o++]=128,Kn(this.buffer.subarray(o)),this.padOffset>s-o&&(this.process(r,0),o=0);for(let d=o;d<s;d++)n[d]=0;Tc(r,s-8,BigInt(this.length*8),i),this.process(r,0);const a=xs(e),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const u=c/4,l=this.get();if(u>l.length)throw new Error("_sha2: outputLen bigger than state");for(let d=0;d<u;d++)a.setUint32(4*d,l[d],i)}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const r=e.slice(0,n);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:n,buffer:r,length:s,finished:i,destroyed:o,pos:a}=this;return e.destroyed=o,e.finished=i,e.length=s,e.pos=a,s%n&&e.buffer.set(r),e}clone(){return this._cloneInto()}}const mt=Uint32Array.from([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),gt=Uint32Array.from([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428]),we=Uint32Array.from([1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209]),Ar=BigInt(2**32-1),Vi=BigInt(32);function Cc(t,e=!1){return e?{h:Number(t&Ar),l:Number(t>>Vi&Ar)}:{h:Number(t>>Vi&Ar)|0,l:Number(t&Ar)|0}}function Oc(t,e=!1){const n=t.length;let r=new Uint32Array(n),s=new Uint32Array(n);for(let i=0;i<n;i++){const{h:o,l:a}=Cc(t[i],e);[r[i],s[i]]=[o,a]}return[r,s]}const ji=(t,e,n)=>t>>>n,Fi=(t,e,n)=>t<<32-n|e>>>n,an=(t,e,n)=>t>>>n|e<<32-n,cn=(t,e,n)=>t<<32-n|e>>>n,Cr=(t,e,n)=>t<<64-n|e>>>n-32,Or=(t,e,n)=>t>>>n-32|e<<64-n;function ot(t,e,n,r){const s=(e>>>0)+(r>>>0);return{h:t+n+(s/2**32|0)|0,l:s|0}}const Nc=(t,e,n)=>(t>>>0)+(e>>>0)+(n>>>0),Rc=(t,e,n,r)=>e+n+r+(t/2**32|0)|0,Uc=(t,e,n,r)=>(t>>>0)+(e>>>0)+(n>>>0)+(r>>>0),qc=(t,e,n,r,s)=>e+n+r+s+(t/2**32|0)|0,$c=(t,e,n,r,s)=>(t>>>0)+(e>>>0)+(n>>>0)+(r>>>0)+(s>>>0),Mc=(t,e,n,r,s,i)=>e+n+r+s+i+(t/2**32|0)|0,Dc=Uint32Array.from([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),wt=new Uint32Array(64);class Uo extends Ro{constructor(e=32){super(64,e,8,!1),this.A=mt[0]|0,this.B=mt[1]|0,this.C=mt[2]|0,this.D=mt[3]|0,this.E=mt[4]|0,this.F=mt[5]|0,this.G=mt[6]|0,this.H=mt[7]|0}get(){const{A:e,B:n,C:r,D:s,E:i,F:o,G:a,H:c}=this;return[e,n,r,s,i,o,a,c]}set(e,n,r,s,i,o,a,c){this.A=e|0,this.B=n|0,this.C=r|0,this.D=s|0,this.E=i|0,this.F=o|0,this.G=a|0,this.H=c|0}process(e,n){for(let d=0;d<16;d++,n+=4)wt[d]=e.getUint32(n,!1);for(let d=16;d<64;d++){const f=wt[d-15],h=wt[d-2],b=Qe(f,7)^Qe(f,18)^f>>>3,y=Qe(h,17)^Qe(h,19)^h>>>10;wt[d]=y+wt[d-7]+b+wt[d-16]|0}let{A:r,B:s,C:i,D:o,E:a,F:c,G:u,H:l}=this;for(let d=0;d<64;d++){const f=Qe(a,6)^Qe(a,11)^Qe(a,25),h=l+f+Sc(a,c,u)+Dc[d]+wt[d]|0,y=(Qe(r,2)^Qe(r,13)^Qe(r,22))+Ac(r,s,i)|0;l=u,u=c,c=a,a=o+h|0,o=i,i=s,s=r,r=h+y|0}r=r+this.A|0,s=s+this.B|0,i=i+this.C|0,o=o+this.D|0,a=a+this.E|0,c=c+this.F|0,u=u+this.G|0,l=l+this.H|0,this.set(r,s,i,o,a,c,u,l)}roundClean(){Kn(wt)}destroy(){this.set(0,0,0,0,0,0,0,0),Kn(this.buffer)}}class Pc extends Uo{constructor(){super(28),this.A=gt[0]|0,this.B=gt[1]|0,this.C=gt[2]|0,this.D=gt[3]|0,this.E=gt[4]|0,this.F=gt[5]|0,this.G=gt[6]|0,this.H=gt[7]|0}}const qo=Oc(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(t=>BigInt(t))),kc=qo[0],Lc=qo[1],xt=new Uint32Array(80),_t=new Uint32Array(80);class Vc extends Ro{constructor(e=64){super(128,e,16,!1),this.Ah=we[0]|0,this.Al=we[1]|0,this.Bh=we[2]|0,this.Bl=we[3]|0,this.Ch=we[4]|0,this.Cl=we[5]|0,this.Dh=we[6]|0,this.Dl=we[7]|0,this.Eh=we[8]|0,this.El=we[9]|0,this.Fh=we[10]|0,this.Fl=we[11]|0,this.Gh=we[12]|0,this.Gl=we[13]|0,this.Hh=we[14]|0,this.Hl=we[15]|0}get(){const{Ah:e,Al:n,Bh:r,Bl:s,Ch:i,Cl:o,Dh:a,Dl:c,Eh:u,El:l,Fh:d,Fl:f,Gh:h,Gl:b,Hh:y,Hl:g}=this;return[e,n,r,s,i,o,a,c,u,l,d,f,h,b,y,g]}set(e,n,r,s,i,o,a,c,u,l,d,f,h,b,y,g){this.Ah=e|0,this.Al=n|0,this.Bh=r|0,this.Bl=s|0,this.Ch=i|0,this.Cl=o|0,this.Dh=a|0,this.Dl=c|0,this.Eh=u|0,this.El=l|0,this.Fh=d|0,this.Fl=f|0,this.Gh=h|0,this.Gl=b|0,this.Hh=y|0,this.Hl=g|0}process(e,n){for(let m=0;m<16;m++,n+=4)xt[m]=e.getUint32(n),_t[m]=e.getUint32(n+=4);for(let m=16;m<80;m++){const v=xt[m-15]|0,B=_t[m-15]|0,S=an(v,B,1)^an(v,B,8)^ji(v,B,7),A=cn(v,B,1)^cn(v,B,8)^Fi(v,B,7),U=xt[m-2]|0,x=_t[m-2]|0,T=an(U,x,19)^Cr(U,x,61)^ji(U,x,6),q=cn(U,x,19)^Or(U,x,61)^Fi(U,x,6),C=Uc(A,q,_t[m-7],_t[m-16]),_=qc(C,S,T,xt[m-7],xt[m-16]);xt[m]=_|0,_t[m]=C|0}let{Ah:r,Al:s,Bh:i,Bl:o,Ch:a,Cl:c,Dh:u,Dl:l,Eh:d,El:f,Fh:h,Fl:b,Gh:y,Gl:g,Hh:p,Hl:w}=this;for(let m=0;m<80;m++){const v=an(d,f,14)^an(d,f,18)^Cr(d,f,41),B=cn(d,f,14)^cn(d,f,18)^Or(d,f,41),S=d&h^~d&y,A=f&b^~f&g,U=$c(w,B,A,Lc[m],_t[m]),x=Mc(U,p,v,S,kc[m],xt[m]),T=U|0,q=an(r,s,28)^Cr(r,s,34)^Cr(r,s,39),C=cn(r,s,28)^Or(r,s,34)^Or(r,s,39),_=r&i^r&a^i&a,I=s&o^s&c^o&c;p=y|0,w=g|0,y=h|0,g=b|0,h=d|0,b=f|0,{h:d,l:f}=ot(u|0,l|0,x|0,T|0),u=a|0,l=c|0,a=i|0,c=o|0,i=r|0,o=s|0;const N=Nc(T,C,I);r=Rc(N,x,q,_),s=N|0}({h:r,l:s}=ot(this.Ah|0,this.Al|0,r|0,s|0)),{h:i,l:o}=ot(this.Bh|0,this.Bl|0,i|0,o|0),{h:a,l:c}=ot(this.Ch|0,this.Cl|0,a|0,c|0),{h:u,l}=ot(this.Dh|0,this.Dl|0,u|0,l|0),{h:d,l:f}=ot(this.Eh|0,this.El|0,d|0,f|0),{h,l:b}=ot(this.Fh|0,this.Fl|0,h|0,b|0),{h:y,l:g}=ot(this.Gh|0,this.Gl|0,y|0,g|0),{h:p,l:w}=ot(this.Hh|0,this.Hl|0,p|0,w|0),this.set(r,s,i,o,a,c,u,l,d,f,h,b,y,g,p,w)}roundClean(){Kn(xt,_t)}destroy(){Kn(this.buffer),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}const Me=Js(()=>new Uo),jc=Js(()=>new Pc),Fc=Js(()=>new Vc),Nr="__principal__",Gc=2,Gi=4,Hc="aaaaa-aa";let z=class un{static anonymous(){return new this(new Uint8Array([Gi]))}static managementCanister(){return this.fromText(Hc)}static selfAuthenticating(e){const n=jc(e);return new this(new Uint8Array([...n,Gc]))}static from(e){if(typeof e=="string")return un.fromText(e);if(Object.getPrototypeOf(e)===Uint8Array.prototype)return new un(e);if(un.isPrincipal(e))return new un(e._arr);throw new Error(`Impossible to convert ${JSON.stringify(e)} to Principal.`)}static fromHex(e){return new this(wr(e))}static fromText(e){let n=e;if(e.includes(Nr)){const o=JSON.parse(e);Nr in o&&(n=o[Nr])}const r=n.toLowerCase().replace(/-/g,"");let s=wc(r);s=s.slice(4,s.length);const i=new this(s);if(i.toText()!==n)throw new Error(`Principal "${i.toText()}" does not have a valid checksum (original value "${n}" may not be a valid Principal ID).`);return i}static fromUint8Array(e){return new this(e)}static isPrincipal(e){return e instanceof un||typeof e=="object"&&e!==null&&"_isPrincipal"in e&&e._isPrincipal===!0&&"_arr"in e&&e._arr instanceof Uint8Array}constructor(e){this._arr=e,this._isPrincipal=!0}isAnonymous(){return this._arr.byteLength===1&&this._arr[0]===Gi}toUint8Array(){return this._arr}toHex(){return ee(this._arr).toUpperCase()}toText(){const e=new ArrayBuffer(4);new DataView(e).setUint32(0,_c(this._arr));const r=new Uint8Array(e),s=new Uint8Array([...r,...this._arr]),o=gc(s).match(/.{1,5}/g);if(!o)throw new Error;return o.join("-")}toString(){return this.toText()}toJSON(){return{[Nr]:this.toText()}}compareTo(e){for(let n=0;n<Math.min(this._arr.length,e._arr.length);n++){if(this._arr[n]<e._arr[n])return"lt";if(this._arr[n]>e._arr[n])return"gt"}return this._arr.length<e._arr.length?"lt":this._arr.length>e._arr.length?"gt":"eq"}ltEq(e){const n=this.compareTo(e);return n=="lt"||n=="eq"}gtEq(e){const n=this.compareTo(e);return n=="gt"||n=="eq"}};var bt;(function(t){t.Trust="Trust",t.Protocol="Protocol",t.Reject="Reject",t.Transport="Transport",t.External="External",t.Limit="Limit",t.Input="Input",t.Unknown="Unknown"})(bt||(bt={}));class G{constructor(e=!1){this.isCertified=e}toString(){let e=this.toErrorMessage();return this.requestContext&&(e+=`
Request context:
  Request ID (hex): ${this.requestContext.requestId?ee(this.requestContext.requestId):"undefined"}
  Sender pubkey (hex): ${ee(this.requestContext.senderPubKey)}
  Sender signature (hex): ${ee(this.requestContext.senderSignature)}
  Ingress expiry: ${this.requestContext.ingressExpiry.toString()}`),this.callContext&&(e+=`
Call context:
  Canister ID: ${this.callContext.canisterId.toText()}
  Method name: ${this.callContext.methodName}
  HTTP details: ${JSON.stringify(this.callContext.httpDetails,null,2)}`),e}}class dt extends Error{get code(){return this.cause.code}set code(e){this.cause.code=e}get kind(){return this.cause.kind}set kind(e){this.cause.kind=e}get isCertified(){return this.code.isCertified}constructor(e,n){super(e.toString()),this.name="AgentError",this.cause={code:e,kind:n},Object.setPrototypeOf(this,dt.prototype)}hasCode(e){return this.code instanceof e}toString(){return`${this.name} (${this.kind}): ${this.message}`}}class Qt extends dt{static fromCode(e){return new this(e)}}class qe extends Qt{constructor(e){super(e,bt.Trust),this.name="TrustError",Object.setPrototypeOf(this,qe.prototype)}}class se extends Qt{constructor(e){super(e,bt.Protocol),this.name="ProtocolError",Object.setPrototypeOf(this,se.prototype)}}class mn extends Qt{constructor(e){super(e,bt.Reject),this.name="RejectError",Object.setPrototypeOf(this,mn.prototype)}}class jr extends Qt{constructor(e){super(e,bt.Transport),this.name="TransportError",Object.setPrototypeOf(this,jr.prototype)}}class Be extends Qt{constructor(e){super(e,bt.External),this.name="ExternalError",Object.setPrototypeOf(this,Be.prototype)}}class J extends Qt{constructor(e){super(e,bt.Input),this.name="InputError",Object.setPrototypeOf(this,J.prototype)}}class Te extends Qt{constructor(e){super(e,bt.Unknown),this.name="UnknownError",Object.setPrototypeOf(this,Te.prototype)}}class gn extends G{constructor(e,n){super(),this.reason=e,this.error=n,this.name="CertificateVerificationErrorCode",Object.setPrototypeOf(this,gn.prototype)}toErrorMessage(){let e=this.reason;return this.error&&(e+=`: ${_r(this.error)}`),`Certificate verification error: "${e}"`}}class Yn extends G{constructor(e,n,r,s,i){super(),this.maxAgeInMinutes=e,this.certificateTime=n,this.currentTime=r,this.timeDiffMsecs=s,this.ageType=i,this.name="CertificateTimeErrorCode",Object.setPrototypeOf(this,Yn.prototype)}toErrorMessage(){return`Certificate is signed more than ${this.maxAgeInMinutes} minutes in the ${this.ageType}. Certificate time: ${this.certificateTime.toISOString()} Current time: ${this.currentTime.toISOString()} Clock drift: ${this.timeDiffMsecs}ms`}}class ei extends G{constructor(){super(),this.name="CertificateHasTooManyDelegationsErrorCode",Object.setPrototypeOf(this,ei.prototype)}toErrorMessage(){return"Certificate has too many delegations"}}class ss extends G{constructor(e,n){super(),this.canisterId=e,this.subnetId=n,this.name="CertificateNotAuthorizedErrorCode",Object.setPrototypeOf(this,ss.prototype)}toErrorMessage(){return`The certificate contains a delegation that does not include the canister ${this.canisterId.toText()} in the canister_ranges field. Subnet ID: ${this.subnetId.toText()}`}}class Rn extends G{constructor(e,n){super(),this.message=e,this.lookupStatus=n,this.name="LookupErrorCode",Object.setPrototypeOf(this,Rn.prototype)}toErrorMessage(){return`${this.message}. Lookup status: ${this.lookupStatus}`}}class is extends G{constructor(e){super(),this.message=e,this.name="MalformedLookupFoundValueErrorCode",Object.setPrototypeOf(this,is.prototype)}toErrorMessage(){return this.message}}class ti extends G{constructor(e){super(),this.message=e,this.name="MissingLookupValueErrorCode",Object.setPrototypeOf(this,ti.prototype)}toErrorMessage(){return this.message}}class os extends G{constructor(e,n){super(),this.expectedLength=e,this.actualLength=n,this.name="DerKeyLengthMismatchErrorCode",Object.setPrototypeOf(this,os.prototype)}toErrorMessage(){return`BLS DER-encoded public key must be ${this.expectedLength} bytes long, but is ${this.actualLength} bytes long`}}class ni extends G{constructor(e,n){super(),this.expectedPrefix=e,this.actualPrefix=n,this.name="DerPrefixMismatchErrorCode",Object.setPrototypeOf(this,ni.prototype)}toErrorMessage(){return`BLS DER-encoded public key is invalid. Expected the following prefix: ${ee(this.expectedPrefix)}, but got ${ee(this.actualPrefix)}`}}class ri extends G{constructor(e,n){super(),this.expectedLength=e,this.actualLength=n,this.name="DerDecodeLengthMismatchErrorCode",Object.setPrototypeOf(this,ri.prototype)}toErrorMessage(){return`DER payload mismatch: Expected length ${this.expectedLength}, actual length: ${this.actualLength}`}}class yt extends G{constructor(e){super(),this.error=e,this.name="DerDecodeErrorCode",Object.setPrototypeOf(this,yt.prototype)}toErrorMessage(){return`Failed to decode DER: ${this.error}`}}class as extends G{constructor(e){super(),this.error=e,this.name="DerEncodeErrorCode",Object.setPrototypeOf(this,as.prototype)}toErrorMessage(){return`Failed to encode DER: ${this.error}`}}class si extends G{constructor(e,n){super(),this.error=e,this.input=n,this.name="CborDecodeErrorCode",Object.setPrototypeOf(this,si.prototype)}toErrorMessage(){return`Failed to decode CBOR: ${_r(this.error)}, input: ${ee(this.input)}`}}class ii extends G{constructor(e,n){super(),this.error=e,this.value=n,this.name="CborEncodeErrorCode",Object.setPrototypeOf(this,ii.prototype)}toErrorMessage(){return`Failed to encode CBOR: ${_r(this.error)}, input: ${this.value}`}}class Xn extends G{constructor(e,n,r){super(),this.message=e,this.requestId=n,this.status=r,this.name="TimeoutWaitingForResponseErrorCode",Object.setPrototypeOf(this,Xn.prototype)}toErrorMessage(){let e=`${this.message}
`;return this.requestId&&(e+=`  Request ID: ${ee(this.requestId)}
`),this.status&&(e+=`  Request status: ${this.status}
`),e}}class oi extends G{constructor(e,n,r){super(),this.maxIngressExpiryInMinutes=e,this.requestId=n,this.retryTimes=r,this.name="CertificateOutdatedErrorCode",Object.setPrototypeOf(this,oi.prototype)}toErrorMessage(){let e=`Certificate is stale (over ${this.maxIngressExpiryInMinutes} minutes). Is the computer's clock synchronized?
  Request ID: ${ee(this.requestId)}
`;return this.retryTimes!==void 0&&(e+=`  Retried ${this.retryTimes} times.`),e}}class cs extends G{constructor(e,n,r,s){super(!0),this.requestId=e,this.rejectCode=n,this.rejectMessage=r,this.rejectErrorCode=s,this.name="CertifiedRejectErrorCode",Object.setPrototypeOf(this,cs.prototype)}toErrorMessage(){return`The replica returned a rejection error:
  Request ID: ${ee(this.requestId)}
  Reject code: ${this.rejectCode}
  Reject text: ${this.rejectMessage}
  Error code: ${this.rejectErrorCode}
`}}class ai extends G{constructor(e,n,r,s,i){super(),this.requestId=e,this.rejectCode=n,this.rejectMessage=r,this.rejectErrorCode=s,this.signatures=i,this.name="UncertifiedRejectErrorCode",Object.setPrototypeOf(this,ai.prototype)}toErrorMessage(){return`The replica returned a rejection error:
  Request ID: ${ee(this.requestId)}
  Reject code: ${this.rejectCode}
  Reject text: ${this.rejectMessage}
  Error code: ${this.rejectErrorCode}
`}}class ci extends G{constructor(e,n,r,s){super(),this.requestId=e,this.rejectCode=n,this.rejectMessage=r,this.rejectErrorCode=s,this.name="UncertifiedRejectUpdateErrorCode",Object.setPrototypeOf(this,ci.prototype)}toErrorMessage(){return`The replica returned a rejection error:
  Request ID: ${ee(this.requestId)}
  Reject code: ${this.rejectCode}
  Reject text: ${this.rejectMessage}
  Error code: ${this.rejectErrorCode}
`}}class fi extends G{constructor(e){super(),this.requestId=e,this.name="RequestStatusDoneNoReplyErrorCode",Object.setPrototypeOf(this,fi.prototype)}toErrorMessage(){return`Call was marked as done but we never saw the reply:
  Request ID: ${ee(this.requestId)}
`}}class Mn extends G{constructor(e){super(),this.shouldFetchRootKey=e,this.name="MissingRootKeyErrorCode",Object.setPrototypeOf(this,Mn.prototype)}toErrorMessage(){return this.shouldFetchRootKey===void 0?"Agent is missing root key":`Agent is missing root key and the shouldFetchRootKey value is set to ${this.shouldFetchRootKey}. The root key should only be unknown if you are in local development. Otherwise you should avoid fetching and use the default IC Root Key or the known root key of your environment.`}}class ui extends G{constructor(e){super(),this.value=e,this.name="HashValueErrorCode",Object.setPrototypeOf(this,ui.prototype)}toErrorMessage(){return`Attempt to hash a value of unsupported type: ${this.value}`}}class Gn extends G{constructor(e){super(),this.error=e,this.name="HttpDefaultFetchErrorCode",Object.setPrototypeOf(this,Gn.prototype)}toErrorMessage(){return this.error}}class Pt extends G{constructor(){super(),this.name="IdentityInvalidErrorCode",Object.setPrototypeOf(this,Pt.prototype)}toErrorMessage(){return"This identity has expired due this application's security policy. Please refresh your authentication."}}class hn extends G{constructor(e,n){super(),this.message=e,this.providedIngressExpiryInMinutes=n,this.name="IngressExpiryInvalidErrorCode",Object.setPrototypeOf(this,hn.prototype)}toErrorMessage(){return`${this.message}. Provided ingress expiry time is ${this.providedIngressExpiryInMinutes} minutes.`}}class di extends G{constructor(){super(),this.name="CreateHttpAgentErrorCode",Object.setPrototypeOf(this,di.prototype)}toErrorMessage(){return"Failed to create agent from provided agent"}}class li extends G{constructor(e){super(),this.error=e,this.name="MalformedSignatureErrorCode",Object.setPrototypeOf(this,li.prototype)}toErrorMessage(){return`Query response contained a malformed signature: ${this.error}`}}class hi extends G{constructor(){super(),this.name="MissingSignatureErrorCode",Object.setPrototypeOf(this,hi.prototype)}toErrorMessage(){return"Query response did not contain any node signatures"}}class bi extends G{constructor(){super(),this.name="MalformedPublicKeyErrorCode",Object.setPrototypeOf(this,bi.prototype)}toErrorMessage(){return"Read state response contained a malformed public key"}}class yi extends G{constructor(e){super(),this.nodeId=e,this.name="QuerySignatureVerificationFailedErrorCode",Object.setPrototypeOf(this,yi.prototype)}toErrorMessage(){return`Query signature verification failed. Node ID: ${this.nodeId}`}}class Ke extends G{constructor(e){super(),this.error=e,this.name="UnexpectedErrorCode",Object.setPrototypeOf(this,Ke.prototype)}toErrorMessage(){return`Unexpected error: ${_r(this.error)}`}}class xr extends G{constructor(e){super(),this.error=e,this.name="HashTreeDecodeErrorCode",Object.setPrototypeOf(this,xr.prototype)}toErrorMessage(){return`Failed to decode certificate: ${this.error}`}}class Fr extends G{constructor(e,n,r,s){super(),this.status=e,this.statusText=n,this.headers=r,this.bodyText=s,this.name="HttpErrorCode",Object.setPrototypeOf(this,Fr.prototype)}toErrorMessage(){let e=`HTTP request failed:
  Status: ${this.status} (${this.statusText})
  Headers: ${JSON.stringify(this.headers)}
`;return this.bodyText&&(e+=`  Body: ${this.bodyText}
`),e}}class Gr extends G{constructor(){super(),this.name="HttpV3ApiNotSupportedErrorCode",Object.setPrototypeOf(this,Gr.prototype)}toErrorMessage(){return"HTTP request failed: v3 API is not supported"}}class Hr extends G{constructor(e){super(),this.error=e,this.name="HttpFetchErrorCode",Object.setPrototypeOf(this,Hr.prototype)}toErrorMessage(){return`Failed to fetch HTTP request: ${_r(this.error)}`}}class Zr extends G{constructor(e){super(),this.receivedCanisterId=e,this.name="MissingCanisterIdErrorCode",Object.setPrototypeOf(this,Zr.prototype)}toErrorMessage(){return`Canister ID is required, but received ${typeof this.receivedCanisterId} instead. If you are using automatically generated declarations, this may be because your application is not setting the canister ID in process.env correctly.`}}class pi extends G{constructor(e){super(),this.request=e,this.name="InvalidReadStateRequestErrorCode",Object.setPrototypeOf(this,pi.prototype)}toErrorMessage(){return`Invalid read state request: ${this.request}`}}class Kr extends G{constructor(e){super(),this.error=e,this.name="ExpiryJsonDeserializeErrorCode",Object.setPrototypeOf(this,Kr.prototype)}toErrorMessage(){return`Failed to deserialize expiry: ${this.error}`}}function _r(t){if(t instanceof Error)return t.stack??t.message;try{return JSON.stringify(t)}catch{return String(t)}}const wn=new Error("unreachable");function Y(...t){const e=new Uint8Array(t.reduce((r,s)=>r+s.byteLength,0));let n=0;for(const r of t)e.set(r,n),n+=r.byteLength;return e}class Dn{save(){return this._view}restore(e){if(!(e instanceof Uint8Array))throw new Error("Checkpoint must be a Uint8Array");this._view=e}constructor(e,n=(e==null?void 0:e.byteLength)||0){if(e&&!(e instanceof Uint8Array))try{e=$o(e)}catch{throw new Error("Buffer must be a Uint8Array")}if(n<0||!Number.isInteger(n))throw new Error("Length must be a non-negative integer");if(e&&n>e.byteLength)throw new Error("Length cannot exceed buffer length");this._buffer=e||new Uint8Array(0),this._view=new Uint8Array(this._buffer.buffer,0,n)}get buffer(){return this._view.slice()}get byteLength(){return this._view.byteLength}read(e){const n=this._view.subarray(0,e);return this._view=this._view.subarray(e),n.slice()}readUint8(){if(this._view.byteLength===0)return;const e=this._view[0];return this._view=this._view.subarray(1),e}write(e){if(!(e instanceof Uint8Array))throw new Error("Buffer must be a Uint8Array");const n=this._view.byteLength;this._view.byteOffset+this._view.byteLength+e.byteLength>=this._buffer.byteLength?this.alloc(e.byteLength):this._view=new Uint8Array(this._buffer.buffer,this._view.byteOffset,this._view.byteLength+e.byteLength),this._view.set(e,n)}get end(){return this._view.byteLength===0}alloc(e){if(e<=0||!Number.isInteger(e))throw new Error("Amount must be a positive integer");const n=new Uint8Array((this._buffer.byteLength+e)*1.2|0),r=new Uint8Array(n.buffer,0,this._view.byteLength+e);r.set(this._view),this._buffer=n,this._view=r}}function $o(t){if(!t)throw new Error("Input cannot be null or undefined");return t instanceof Uint8Array?t:t instanceof ArrayBuffer?new Uint8Array(t):Array.isArray(t)?new Uint8Array(t):"buffer"in t?$o(t.buffer):new Uint8Array(t)}function Zc(t,e){if(t.byteLength!==e.byteLength)return t.byteLength-e.byteLength;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return t[n]-e[n];return 0}function Kc(t){if(!(t instanceof Uint8Array))throw new Error("Input must be a Uint8Array");return new DataView(t.buffer,t.byteOffset,t.byteLength)}function Yc(t){const n=new TextEncoder().encode(t);let r=0;for(const s of n)r=(r*223+s)%2**32;return r}function Se(t){if(/^_\d+_$/.test(t)||/^_0x[0-9a-fA-F]+_$/.test(t)){const e=+t.slice(1,-1);if(Number.isSafeInteger(e)&&e>=0&&e<2**32)return e}return Yc(t)}function Mo(t){const e=BigInt(t);if(t<=0)throw new RangeError("Input must be positive");return e.toString(2).length-1}function ks(t){const e=BigInt(t);if(t<0)throw new RangeError("Input must be non-negative");return BigInt(1)<<e}function Do(){throw new Error("unexpected end of buffer")}function Kt(t,e){return t.byteLength<e&&Do(),t.read(e)}function Yt(t){const e=t.readUint8();return e===void 0&&Do(),e}function ne(t){if(typeof t=="number"&&(t=BigInt(t)),t<BigInt(0))throw new Error("Cannot leb encode negative values.");const e=(t===BigInt(0)?0:Mo(t))+1,n=new Dn(new Uint8Array(e),0);for(;;){const r=Number(t&BigInt(127));if(t/=BigInt(128),t===BigInt(0)){n.write(new Uint8Array([r]));break}else n.write(new Uint8Array([r|128]))}return n.buffer}function he(t){let e=BigInt(1),n=BigInt(0),r;do r=Yt(t),n+=BigInt(r&127).valueOf()*e,e*=BigInt(128);while(r>=128);return n}function ue(t){typeof t=="number"&&(t=BigInt(t));const e=t<BigInt(0);e&&(t=-t-BigInt(1));const n=(t===BigInt(0)?0:Mo(t))+1,r=new Dn(new Uint8Array(n),0);for(;;){const i=s(t);if(t/=BigInt(128),e&&t===BigInt(0)&&i&64||!e&&t===BigInt(0)&&!(i&64)){r.write(new Uint8Array([i]));break}else r.write(new Uint8Array([i|128]))}function s(i){const o=i%BigInt(128);return Number(e?BigInt(128)-o-BigInt(1):o)}return r.buffer}function vt(t){const e=new Uint8Array(t.buffer);let n=0;for(;n<e.byteLength;n++)if(e[n]<128){if(!(e[n]&64))return he(t);break}const r=new Uint8Array(Kt(t,n+1));let s=BigInt(0);for(let i=r.byteLength-1;i>=0;i--)s=s*BigInt(128)+BigInt(128-(r[i]&127)-1);return-s-BigInt(1)}function Xc(t,e){if(BigInt(t)<BigInt(0))throw new Error("Cannot write negative values.");return Po(t,e)}function Po(t,e){t=BigInt(t);const n=new Dn(new Uint8Array(Math.min(1,e)),0);let r=0,s=BigInt(256),i=BigInt(0),o=Number(t%s);for(n.write(new Uint8Array([o]));++r<e;)t<0&&i===BigInt(0)&&o!==0&&(i=BigInt(1)),o=Number((t/s-i)%BigInt(256)),n.write(new Uint8Array([o])),s*=BigInt(256);return n.buffer}function ko(t,e){if(e<=0||!Number.isInteger(e))throw new Error("Byte length must be a positive integer");let n=BigInt(Yt(t)),r=BigInt(1),s=0;for(;++s<e;){r*=BigInt(256);const i=BigInt(Yt(t));n=n+r*i}return n}function zc(t,e){if(e<=0||!Number.isInteger(e))throw new Error("Byte length must be a positive integer");let n=ko(t,e);const r=BigInt(2)**(BigInt(8)*BigInt(e-1)+BigInt(7));return n>=r&&(n-=r*BigInt(2)),n}var K;(function(t){t[t.Null=-1]="Null",t[t.Bool=-2]="Bool",t[t.Nat=-3]="Nat",t[t.Int=-4]="Int",t[t.Float32=-13]="Float32",t[t.Float64=-14]="Float64",t[t.Text=-15]="Text",t[t.Reserved=-16]="Reserved",t[t.Empty=-17]="Empty",t[t.Opt=-18]="Opt",t[t.Vector=-19]="Vector",t[t.Record=-20]="Record",t[t.Variant=-21]="Variant",t[t.Func=-22]="Func",t[t.Service=-23]="Service",t[t.Principal=-24]="Principal"})(K||(K={}));const $r="DIDL",Hi=400;function zn(t,e,n){return t.map((r,s)=>n(r,e[s]))}class Wc{constructor(){this._typs=[],this._idx=new Map,this._idxRefCount=new Map}has(e){return this._idx.has(e.name)}add(e,n){const r=this._typs.length;this._idx.set(e.name,r),this._idxRefCount.set(r,1),this._typs.push(n)}merge(e,n){const r=this._idx.get(e.name),s=this._idx.get(n);if(r===void 0)throw new Error("Missing type index for "+e);if(s===void 0)throw new Error("Missing type index for "+n);this._typs[r]=this._typs[s];const i=this._getIdxRefCount(r),o=this._getIdxRefCount(s);this._idxRefCount.set(r,i+o),this._idx.set(n,r),this._idxRefCount.set(s,0),this._compactFromEnd()}_getIdxRefCount(e){return this._idxRefCount.get(e)||0}_compactFromEnd(){for(;this._typs.length>0;){const e=this._typs.length-1;if(this._getIdxRefCount(e)>0)break;this._typs.pop(),this._idxRefCount.delete(e)}}encode(){const e=ne(this._typs.length),n=Y(...this._typs);return Y(e,n)}indexOf(e){if(!this._idx.has(e))throw new Error("Missing type index for "+e);return ue(this._idx.get(e)||0)}}class Qc{visitType(e,n){throw new Error("Not implemented")}visitPrimitive(e,n){return this.visitType(e,n)}visitEmpty(e,n){return this.visitPrimitive(e,n)}visitBool(e,n){return this.visitPrimitive(e,n)}visitNull(e,n){return this.visitPrimitive(e,n)}visitReserved(e,n){return this.visitPrimitive(e,n)}visitText(e,n){return this.visitPrimitive(e,n)}visitNumber(e,n){return this.visitPrimitive(e,n)}visitInt(e,n){return this.visitNumber(e,n)}visitNat(e,n){return this.visitNumber(e,n)}visitFloat(e,n){return this.visitPrimitive(e,n)}visitFixedInt(e,n){return this.visitNumber(e,n)}visitFixedNat(e,n){return this.visitNumber(e,n)}visitPrincipal(e,n){return this.visitPrimitive(e,n)}visitConstruct(e,n){return this.visitType(e,n)}visitVec(e,n,r){return this.visitConstruct(e,r)}visitOpt(e,n,r){return this.visitConstruct(e,r)}visitRecord(e,n,r){return this.visitConstruct(e,r)}visitTuple(e,n,r){const s=n.map((i,o)=>[`_${o}_`,i]);return this.visitRecord(e,s,r)}visitVariant(e,n,r){return this.visitConstruct(e,r)}visitRec(e,n,r){return this.visitConstruct(n,r)}visitFunc(e,n){return this.visitConstruct(e,n)}visitService(e,n){return this.visitConstruct(e,n)}}var V;(function(t){t.EmptyClass="__IDL_EmptyClass__",t.UnknownClass="__IDL_UnknownClass__",t.BoolClass="__IDL_BoolClass__",t.NullClass="__IDL_NullClass__",t.ReservedClass="__IDL_ReservedClass__",t.TextClass="__IDL_TextClass__",t.IntClass="__IDL_IntClass__",t.NatClass="__IDL_NatClass__",t.FloatClass="__IDL_FloatClass__",t.FixedIntClass="__IDL_FixedIntClass__",t.FixedNatClass="__IDL_FixedNatClass__",t.VecClass="__IDL_VecClass__",t.OptClass="__IDL_OptClass__",t.RecordClass="__IDL_RecordClass__",t.TupleClass="__IDL_TupleClass__",t.VariantClass="__IDL_VariantClass__",t.RecClass="__IDL_RecClass__",t.PrincipalClass="__IDL_PrincipalClass__",t.FuncClass="__IDL_FuncClass__",t.ServiceClass="__IDL_ServiceClass__"})(V||(V={}));class fs{display(){return this.name}valueToString(e){return oe(e)}buildTypeTable(e){e.has(this)||this._buildTypeTableImpl(e)}}class Le extends fs{checkType(e){if(this.name!==e.name)throw new Error(`type mismatch: type on the wire ${e.name}, expect type ${this.name}`);return e}_buildTypeTableImpl(e){}}class Mt extends fs{checkType(e){if(e instanceof Pe){const n=e.getType();if(typeof n>"u")throw new Error("type mismatch with uninitialized type");return n}throw new Error(`type mismatch: type on the wire ${e.name}, expect type ${this.name}`)}encodeType(e){return e.indexOf(this.name)}}class mi extends Le{get typeName(){return V.EmptyClass}static[Symbol.hasInstance](e){return e.typeName===V.EmptyClass}accept(e,n){return e.visitEmpty(this,n)}covariant(e){throw new Error(`Invalid ${this.display()} argument: ${oe(e)}`)}encodeValue(){throw new Error("Empty cannot appear as a function argument")}valueToString(){throw new Error("Empty cannot appear as a value")}encodeType(){return ue(K.Empty)}decodeValue(){throw new Error("Empty cannot appear as an output")}get name(){return"empty"}}class Lo extends fs{get typeName(){return V.UnknownClass}static[Symbol.hasInstance](e){return e.typeName===V.UnknownClass}checkType(e){throw new Error("Method not implemented for unknown.")}accept(e,n){throw e.visitType(this,n)}covariant(e){throw new Error(`Invalid ${this.display()} argument: ${oe(e)}`)}encodeValue(){throw new Error("Unknown cannot appear as a function argument")}valueToString(){throw new Error("Unknown cannot appear as a value")}encodeType(){throw new Error("Unknown cannot be serialized")}decodeValue(e,n){let r=n.decodeValue(e,n);Object(r)!==r&&(r=Object(r));let s;return n instanceof Pe?s=()=>n.getType():s=()=>n,Object.defineProperty(r,"type",{value:s,writable:!0,enumerable:!1,configurable:!0}),r}_buildTypeTableImpl(){throw new Error("Unknown cannot be serialized")}get name(){return"Unknown"}}class Vo extends Le{get typeName(){return V.BoolClass}static[Symbol.hasInstance](e){return e.typeName===V.BoolClass}accept(e,n){return e.visitBool(this,n)}covariant(e){if(typeof e=="boolean")return!0;throw new Error(`Invalid ${this.display()} argument: ${oe(e)}`)}encodeValue(e){return new Uint8Array([e?1:0])}encodeType(){return ue(K.Bool)}decodeValue(e,n){switch(this.checkType(n),Yt(e)){case 0:return!1;case 1:return!0;default:throw new Error("Boolean value out of range")}}get name(){return"bool"}}class Wn extends Le{get typeName(){return V.NullClass}static[Symbol.hasInstance](e){return e.typeName===V.NullClass}accept(e,n){return e.visitNull(this,n)}covariant(e){if(e===null)return!0;throw new Error(`Invalid ${this.display()} argument: ${oe(e)}`)}encodeValue(){return new Uint8Array(0)}encodeType(){return ue(K.Null)}decodeValue(e,n){return this.checkType(n),null}get name(){return"null"}}class $t extends Le{get typeName(){return V.ReservedClass}static[Symbol.hasInstance](e){return e.typeName===V.ReservedClass}accept(e,n){return e.visitReserved(this,n)}covariant(e){return!0}encodeValue(){return new Uint8Array(0)}encodeType(){return ue(K.Reserved)}decodeValue(e,n){return n.name!==this.name&&n.decodeValue(e,n),null}get name(){return"reserved"}}class jo extends Le{get typeName(){return V.TextClass}static[Symbol.hasInstance](e){return e.typeName===V.TextClass}accept(e,n){return e.visitText(this,n)}covariant(e){if(typeof e=="string")return!0;throw new Error(`Invalid ${this.display()} argument: ${oe(e)}`)}encodeValue(e){const n=new TextEncoder().encode(e),r=ne(n.byteLength);return Y(r,n)}encodeType(){return ue(K.Text)}decodeValue(e,n){this.checkType(n);const r=he(e),s=Kt(e,Number(r));return new TextDecoder("utf8",{fatal:!0}).decode(s)}get name(){return"text"}valueToString(e){return'"'+e+'"'}}class gi extends Le{get typeName(){return V.IntClass}static[Symbol.hasInstance](e){return e.typeName===V.IntClass}accept(e,n){return e.visitInt(this,n)}covariant(e){if(typeof e=="bigint"||Number.isInteger(e))return!0;throw new Error(`Invalid ${this.display()} argument: ${oe(e)}`)}encodeValue(e){return ue(e)}encodeType(){return ue(K.Int)}decodeValue(e,n){return this.checkType(n),vt(e)}get name(){return"int"}valueToString(e){return e.toString()}}class wi extends Le{get typeName(){return V.NatClass}static[Symbol.hasInstance](e){return e.typeName===V.NatClass}accept(e,n){return e.visitNat(this,n)}covariant(e){if(typeof e=="bigint"&&e>=BigInt(0)||Number.isInteger(e)&&e>=0)return!0;throw new Error(`Invalid ${this.display()} argument: ${oe(e)}`)}encodeValue(e){return ne(e)}encodeType(){return ue(K.Nat)}decodeValue(e,n){return this.checkType(n),he(e)}get name(){return"nat"}valueToString(e){return e.toString()}}class xi extends Le{get typeName(){return V.FloatClass}static[Symbol.hasInstance](e){return e.typeName===V.FloatClass}constructor(e){if(super(),this._bits=e,e!==32&&e!==64)throw new Error("not a valid float type")}accept(e,n){return e.visitFloat(this,n)}covariant(e){if(typeof e=="number"||e instanceof Number)return!0;throw new Error(`Invalid ${this.display()} argument: ${oe(e)}`)}encodeValue(e){const n=new ArrayBuffer(this._bits/8),r=new DataView(n);return this._bits===32?r.setFloat32(0,e,!0):r.setFloat64(0,e,!0),new Uint8Array(n)}encodeType(){const e=this._bits===32?K.Float32:K.Float64;return ue(e)}decodeValue(e,n){this.checkType(n);const r=Kt(e,this._bits/8),s=Kc(r);return this._bits===32?s.getFloat32(0,!0):s.getFloat64(0,!0)}get name(){return"float"+this._bits}valueToString(e){return e.toString()}}class Xt extends Le{get typeName(){return V.FixedIntClass}static[Symbol.hasInstance](e){return e.typeName===V.FixedIntClass}constructor(e){super(),this._bits=e}accept(e,n){return e.visitFixedInt(this,n)}covariant(e){const n=ks(this._bits-1)*BigInt(-1),r=ks(this._bits-1)-BigInt(1);let s=!1;if(typeof e=="bigint")s=e>=n&&e<=r;else if(Number.isInteger(e)){const i=BigInt(e);s=i>=n&&i<=r}else s=!1;if(s)return!0;throw new Error(`Invalid ${this.display()} argument: ${oe(e)}`)}encodeValue(e){return Po(e,this._bits/8)}encodeType(){const e=Math.log2(this._bits)-3;return ue(-9-e)}decodeValue(e,n){this.checkType(n);const r=zc(e,this._bits/8);return this._bits<=32?Number(r):r}get name(){return`int${this._bits}`}valueToString(e){return e.toString()}}class qt extends Le{get typeName(){return V.FixedNatClass}static[Symbol.hasInstance](e){return e.typeName===V.FixedNatClass}constructor(e){super(),this._bits=e}accept(e,n){return e.visitFixedNat(this,n)}covariant(e){const n=ks(this._bits);let r=!1;if(typeof e=="bigint"&&e>=BigInt(0)?r=e<n:Number.isInteger(e)&&e>=0?r=BigInt(e)<n:r=!1,r)return!0;throw new Error(`Invalid ${this.display()} argument: ${oe(e)}`)}encodeValue(e){return Xc(e,this._bits/8)}encodeType(){const e=Math.log2(this._bits)-3;return ue(-5-e)}decodeValue(e,n){this.checkType(n);const r=ko(e,this._bits/8);return this._bits<=32?Number(r):r}get name(){return`nat${this._bits}`}valueToString(e){return e.toString()}}class Un extends Mt{get typeName(){return V.VecClass}static[Symbol.hasInstance](e){return e.typeName===V.VecClass}constructor(e){super(),this._type=e,this._blobOptimization=!1,e instanceof qt&&e._bits===8&&(this._blobOptimization=!0)}accept(e,n){return e.visitVec(this,this._type,n)}covariant(e){const n=this._type instanceof qt?this._type._bits:this._type instanceof Xt?this._type._bits:0;if(ArrayBuffer.isView(e)&&n==e.BYTES_PER_ELEMENT*8||Array.isArray(e)&&e.every((r,s)=>{try{return this._type.covariant(r)}catch(i){throw new Error(`Invalid ${this.display()} argument: 

index ${s} -> ${i.message}`)}}))return!0;throw new Error(`Invalid ${this.display()} argument: ${oe(e)}`)}encodeValue(e){const n=ne(e.length);if(this._blobOptimization)return Y(n,new Uint8Array(e));if(ArrayBuffer.isView(e))if(e instanceof Int16Array||e instanceof Uint16Array){const s=new DataView(new ArrayBuffer(e.length*2));for(let i=0;i<e.length;i++)e instanceof Int16Array?s.setInt16(i*2,e[i],!0):s.setUint16(i*2,e[i],!0);return Y(n,new Uint8Array(s.buffer))}else if(e instanceof Int32Array||e instanceof Uint32Array){const s=new DataView(new ArrayBuffer(e.length*4));for(let i=0;i<e.length;i++)e instanceof Int32Array?s.setInt32(i*4,e[i],!0):s.setUint32(i*4,e[i],!0);return Y(n,new Uint8Array(s.buffer))}else if(e instanceof BigInt64Array||e instanceof BigUint64Array){const s=new DataView(new ArrayBuffer(e.length*8));for(let i=0;i<e.length;i++)e instanceof BigInt64Array?s.setBigInt64(i*8,e[i],!0):s.setBigUint64(i*8,e[i],!0);return Y(n,new Uint8Array(s.buffer))}else return Y(n,new Uint8Array(e.buffer,e.byteOffset,e.byteLength));const r=new Dn(new Uint8Array(n.byteLength+e.length),0);r.write(n);for(const s of e){const i=this._type.encodeValue(s);r.write(new Uint8Array(i))}return r.buffer}_buildTypeTableImpl(e){this._type.buildTypeTable(e);const n=ue(K.Vector),r=this._type.encodeType(e);e.add(this,Y(n,r))}decodeValue(e,n){const r=this.checkType(n);if(!(r instanceof Un))throw new Error("Not a vector type");const s=Number(he(e));if(this._type instanceof qt){if(this._type._bits==8)return new Uint8Array(e.read(s));if(this._type._bits==16){const o=e.read(s*2);return new Uint16Array(o.buffer,o.byteOffset,s)}if(this._type._bits==32){const o=e.read(s*4);return new Uint32Array(o.buffer,o.byteOffset,s)}if(this._type._bits==64)return new BigUint64Array(e.read(s*8).buffer)}if(this._type instanceof Xt){if(this._type._bits==8)return new Int8Array(e.read(s));if(this._type._bits==16){const o=e.read(s*2),a=new DataView(o.buffer,o.byteOffset,o.byteLength),c=new Int16Array(s);for(let u=0;u<s;u++)c[u]=a.getInt16(u*2,!0);return c}if(this._type._bits==32){const o=e.read(s*4),a=new DataView(o.buffer,o.byteOffset,o.byteLength),c=new Int32Array(s);for(let u=0;u<s;u++)c[u]=a.getInt32(u*4,!0);return c}if(this._type._bits==64){const o=e.read(s*8),a=new DataView(o.buffer,o.byteOffset,o.byteLength),c=new BigInt64Array(s);for(let u=0;u<s;u++)c[u]=a.getBigInt64(u*8,!0);return c}}const i=[];for(let o=0;o<s;o++)i.push(this._type.decodeValue(e,r._type));return i}get name(){return`vec ${this._type.name}`}display(){return`vec ${this._type.display()}`}valueToString(e){return"vec {"+e.map(r=>this._type.valueToString(r)).join("; ")+"}"}}class pt extends Mt{get typeName(){return V.OptClass}static[Symbol.hasInstance](e){return e.typeName===V.OptClass}constructor(e){super(),this._type=e}accept(e,n){return e.visitOpt(this,this._type,n)}covariant(e){try{if(Array.isArray(e)&&(e.length===0||e.length===1&&this._type.covariant(e[0])))return!0}catch(n){throw new Error(`Invalid ${this.display()} argument: ${oe(e)} 

-> ${n.message}`)}throw new Error(`Invalid ${this.display()} argument: ${oe(e)}`)}encodeValue(e){return e.length===0?new Uint8Array([0]):Y(new Uint8Array([1]),this._type.encodeValue(e[0]))}_buildTypeTableImpl(e){this._type.buildTypeTable(e);const n=ue(K.Opt),r=this._type.encodeType(e);e.add(this,Y(n,r))}decodeValue(e,n){if(n instanceof Wn)return[];if(n instanceof $t)return[];let r=n;if(n instanceof Pe){const s=n.getType();if(typeof s>"u")throw new Error("type mismatch with uninitialized type");r=s}if(r instanceof pt)switch(Yt(e)){case 0:return[];case 1:{const s=e.save();try{return[this._type.decodeValue(e,r._type)]}catch{return e.restore(s),r._type.decodeValue(e,r._type),[]}}default:throw new Error("Not an option value")}else{if(this._type instanceof Wn||this._type instanceof pt||this._type instanceof $t)return r.decodeValue(e,r),[];{const s=e.save();try{return[this._type.decodeValue(e,n)]}catch{return e.restore(s),r.decodeValue(e,n),[]}}}}get name(){return`opt ${this._type.name}`}display(){return`opt ${this._type.display()}`}valueToString(e){return e.length===0?"null":`opt ${this._type.valueToString(e[0])}`}}class zt extends Mt{get typeName(){return V.RecordClass}static[Symbol.hasInstance](e){return e.typeName===V.RecordClass||e.typeName===V.TupleClass}constructor(e={}){super(),this._fields=Object.entries(e).sort((n,r)=>Se(n[0])-Se(r[0]))}accept(e,n){return e.visitRecord(this,this._fields,n)}tryAsTuple(){const e=[];for(let n=0;n<this._fields.length;n++){const[r,s]=this._fields[n];if(r!==`_${n}_`)return null;e.push(s)}return e}covariant(e){if(typeof e=="object"&&this._fields.every(([n,r])=>{if(!e.hasOwnProperty(n))throw new Error(`Record is missing key "${n}".`);try{return r.covariant(e[n])}catch(s){throw new Error(`Invalid ${this.display()} argument: 

field ${n} -> ${s.message}`)}}))return!0;throw new Error(`Invalid ${this.display()} argument: ${oe(e)}`)}encodeValue(e){const n=this._fields.map(([s])=>e[s]),r=zn(this._fields,n,([,s],i)=>s.encodeValue(i));return Y(...r)}_buildTypeTableImpl(e){this._fields.forEach(([i,o])=>o.buildTypeTable(e));const n=ue(K.Record),r=ne(this._fields.length),s=this._fields.map(([i,o])=>Y(ne(Se(i)),o.encodeType(e)));e.add(this,Y(n,r,Y(...s)))}decodeValue(e,n){const r=this.checkType(n);if(!(r instanceof zt))throw new Error("Not a record type");const s={};let i=0,o=0;for(;o<r._fields.length;){const[a,c]=r._fields[o];if(i>=this._fields.length){c.decodeValue(e,c),o++;continue}const[u,l]=this._fields[i],d=Se(this._fields[i][0]),f=Se(a);if(d===f)s[u]=l.decodeValue(e,c),i++,o++;else if(f>d)if(l instanceof pt||l instanceof $t)s[u]=[],i++;else throw new Error("Cannot find required field "+u);else c.decodeValue(e,c),o++}for(const[a,c]of this._fields.slice(i))if(c instanceof pt||c instanceof $t)s[a]=[];else throw new Error("Cannot find required field "+a);return s}get fieldsAsObject(){const e={};for(const[n,r]of this._fields)e[Se(n)]=r;return e}get name(){return`record {${this._fields.map(([n,r])=>n+":"+r.name).join("; ")}}`}display(){return`record {${this._fields.map(([n,r])=>n+":"+r.display()).join("; ")}}`}valueToString(e){const n=this._fields.map(([s])=>e[s]);return`record {${zn(this._fields,n,([s,i],o)=>s+"="+i.valueToString(o)).join("; ")}}`}}class us extends zt{get typeName(){return V.TupleClass}static[Symbol.hasInstance](e){return e.typeName===V.TupleClass}constructor(e){const n={};e.forEach((r,s)=>n["_"+s+"_"]=r),super(n),this._components=e}accept(e,n){return e.visitTuple(this,this._components,n)}covariant(e){if(Array.isArray(e)&&e.length>=this._fields.length&&this._components.every((n,r)=>{try{return n.covariant(e[r])}catch(s){throw new Error(`Invalid ${this.display()} argument: 

index ${r} -> ${s.message}`)}}))return!0;throw new Error(`Invalid ${this.display()} argument: ${oe(e)}`)}encodeValue(e){const n=zn(this._components,e,(r,s)=>r.encodeValue(s));return Y(...n)}decodeValue(e,n){const r=this.checkType(n);if(!(r instanceof us))throw new Error("not a tuple type");if(r._components.length<this._components.length)throw new Error("tuple mismatch");const s=[];for(const[i,o]of r._components.entries())i>=this._components.length?o.decodeValue(e,o):s.push(this._components[i].decodeValue(e,o));return s}display(){return`record {${this._components.map(n=>n.display()).join("; ")}}`}valueToString(e){return`record {${zn(this._components,e,(r,s)=>r.valueToString(s)).join("; ")}}`}}class qn extends Mt{get typeName(){return V.VariantClass}static[Symbol.hasInstance](e){return e.typeName===V.VariantClass}constructor(e={}){super(),this._fields=Object.entries(e).sort((n,r)=>Se(n[0])-Se(r[0]))}accept(e,n){return e.visitVariant(this,this._fields,n)}covariant(e){if(typeof e=="object"&&Object.entries(e).length===1&&this._fields.every(([n,r])=>{try{return!e.hasOwnProperty(n)||r.covariant(e[n])}catch(s){throw new Error(`Invalid ${this.display()} argument: 

variant ${n} -> ${s.message}`)}}))return!0;throw new Error(`Invalid ${this.display()} argument: ${oe(e)}`)}encodeValue(e){for(let n=0;n<this._fields.length;n++){const[r,s]=this._fields[n];if(e.hasOwnProperty(r)){const i=ne(n),o=s.encodeValue(e[r]);return Y(i,o)}}throw Error("Variant has no data: "+e)}_buildTypeTableImpl(e){this._fields.forEach(([,i])=>{i.buildTypeTable(e)});const n=ue(K.Variant),r=ne(this._fields.length),s=this._fields.map(([i,o])=>Y(ne(Se(i)),o.encodeType(e)));e.add(this,Y(n,r,...s))}decodeValue(e,n){const r=this.checkType(n);if(!(r instanceof qn))throw new Error("Not a variant type");const s=Number(he(e));if(s>=r._fields.length)throw Error("Invalid variant index: "+s);const[i,o]=r._fields[s];for(const[a,c]of this._fields)if(Se(i)===Se(a)){const u=c.decodeValue(e,o);return{[a]:u}}throw new Error("Cannot find field hash "+i)}get name(){return`variant {${this._fields.map(([n,r])=>n+":"+r.name).join("; ")}}`}display(){return`variant {${this._fields.map(([n,r])=>n+(r.name==="null"?"":`:${r.display()}`)).join("; ")}}`}valueToString(e){for(const[n,r]of this._fields)if(e.hasOwnProperty(n)){const s=r.valueToString(e[n]);return s==="null"?`variant {${n}}`:`variant {${n}=${s}}`}throw new Error("Variant has no data: "+e)}get alternativesAsObject(){const e={};for(const[n,r]of this._fields)e[Se(n)]=r;return e}}const ns=class ns extends Mt{constructor(){super(...arguments),this._id=ns._counter++}get typeName(){return V.RecClass}static[Symbol.hasInstance](e){return e.typeName===V.RecClass}accept(e,n){if(!this._type)throw Error("Recursive type uninitialized.");return e.visitRec(this,this._type,n)}fill(e){this._type=e}getType(){return this._type}covariant(e){if(this._type&&this._type.covariant(e))return!0;throw new Error(`Invalid ${this.display()} argument: ${oe(e)}`)}encodeValue(e){if(!this._type)throw Error("Recursive type uninitialized.");return this._type.encodeValue(e)}_buildTypeTableImpl(e){if(!this._type)throw Error("Recursive type uninitialized.");e.add(this,new Uint8Array([])),this._type.buildTypeTable(e),e.merge(this,this._type.name)}decodeValue(e,n){if(!this._type)throw Error("Recursive type uninitialized.");return this._type.decodeValue(e,n)}get name(){return`rec_${this._id}`}display(){if(!this._type)throw Error("Recursive type uninitialized.");return`${this.name}.${this._type.name}`}valueToString(e){if(!this._type)throw Error("Recursive type uninitialized.");return this._type.valueToString(e)}};ns._counter=0;let Pe=ns;function _i(t){if(Yt(t)!==1)throw new Error("Cannot decode principal");const n=Number(he(t));return z.fromUint8Array(new Uint8Array(Kt(t,n)))}class Fo extends Le{get typeName(){return V.PrincipalClass}static[Symbol.hasInstance](e){return e.typeName===V.PrincipalClass}accept(e,n){return e.visitPrincipal(this,n)}covariant(e){if(e&&e._isPrincipal)return!0;throw new Error(`Invalid ${this.display()} argument: ${oe(e)}`)}encodeValue(e){const n=e.toUint8Array(),r=ne(n.byteLength);return Y(new Uint8Array([1]),r,n)}encodeType(){return ue(K.Principal)}decodeValue(e,n){return this.checkType(n),_i(e)}get name(){return"principal"}valueToString(e){return`${this.name} "${e.toText()}"`}}class Qn extends Mt{get typeName(){return V.FuncClass}static[Symbol.hasInstance](e){return e.typeName===V.FuncClass}static argsToString(e,n){if(e.length!==n.length)throw new Error("arity mismatch");return"("+e.map((r,s)=>r.valueToString(n[s])).join(", ")+")"}constructor(e,n,r=[]){super(),this.argTypes=e,this.retTypes=n,this.annotations=r}accept(e,n){return e.visitFunc(this,n)}covariant(e){if(Array.isArray(e)&&e.length===2&&e[0]&&e[0]._isPrincipal&&typeof e[1]=="string")return!0;throw new Error(`Invalid ${this.display()} argument: ${oe(e)}`)}encodeValue([e,n]){const r=e.toUint8Array(),s=ne(r.byteLength),i=Y(new Uint8Array([1]),s,r),o=new TextEncoder().encode(n),a=ne(o.byteLength);return Y(new Uint8Array([1]),i,a,o)}_buildTypeTableImpl(e){this.argTypes.forEach(u=>u.buildTypeTable(e)),this.retTypes.forEach(u=>u.buildTypeTable(e));const n=ue(K.Func),r=ne(this.argTypes.length),s=Y(...this.argTypes.map(u=>u.encodeType(e))),i=ne(this.retTypes.length),o=Y(...this.retTypes.map(u=>u.encodeType(e))),a=ne(this.annotations.length),c=Y(...this.annotations.map(u=>this.encodeAnnotation(u)));e.add(this,Y(n,r,s,i,o,a,c))}decodeValue(e,n){const r=n instanceof Pe?n.getType()??n:n;if(!Ei(r,this))throw new Error(`Cannot decode function reference at type ${this.display()} from wire type ${r.display()}`);if(Yt(e)!==1)throw new Error("Cannot decode function reference");const i=_i(e),o=Number(he(e)),a=Kt(e,o),u=new TextDecoder("utf8",{fatal:!0}).decode(a);return[i,u]}get name(){const e=this.argTypes.map(s=>s.name).join(", "),n=this.retTypes.map(s=>s.name).join(", "),r=" "+this.annotations.join(" ");return`(${e}) -> (${n})${r}`}valueToString([e,n]){return`func "${e.toText()}".${n}`}display(){const e=this.argTypes.map(s=>s.display()).join(", "),n=this.retTypes.map(s=>s.display()).join(", "),r=" "+this.annotations.join(" ");return`(${e})  (${n})${r}`}encodeAnnotation(e){if(e==="query")return new Uint8Array([1]);if(e==="oneway")return new Uint8Array([2]);if(e==="composite_query")return new Uint8Array([3]);throw new Error("Illegal function annotation")}}class Yr extends Mt{get typeName(){return V.ServiceClass}static[Symbol.hasInstance](e){return e.typeName===V.ServiceClass}constructor(e){super(),this._fields=Object.entries(e).sort((n,r)=>n[0]<r[0]?-1:n[0]>r[0]?1:0)}accept(e,n){return e.visitService(this,n)}covariant(e){if(e&&e._isPrincipal)return!0;throw new Error(`Invalid ${this.display()} argument: ${oe(e)}`)}encodeValue(e){const n=e.toUint8Array(),r=ne(n.length);return Y(new Uint8Array([1]),r,n)}_buildTypeTableImpl(e){this._fields.forEach(([i,o])=>o.buildTypeTable(e));const n=ue(K.Service),r=ne(this._fields.length),s=this._fields.map(([i,o])=>{const a=new TextEncoder().encode(i),c=ne(a.length);return Y(c,a,o.encodeType(e))});e.add(this,Y(n,r,...s))}decodeValue(e,n){const r=n instanceof Pe?n.getType()??n:n;if(!Ei(r,this))throw new Error(`Cannot decode service reference at type ${this.display()} from wire type ${r.display()}`);return _i(e)}get name(){return`service {${this._fields.map(([n,r])=>n+":"+r.name).join("; ")}}`}valueToString(e){return`service "${e.toText()}"`}fieldsAsObject(){const e={};for(const[n,r]of this._fields)e[n]=r;return e}}function oe(t){const e=JSON.stringify(t,(n,r)=>typeof r=="bigint"?`BigInt(${r})`:r);return e&&e.length>Hi?e.substring(0,Hi-3)+"...":e}function Ls(t,e){if(e.length<t.length)throw Error("Wrong number of message arguments");const n=new Wc;t.forEach(c=>c.buildTypeTable(n));const r=new TextEncoder().encode($r),s=n.encode(),i=ne(e.length),o=Y(...t.map(c=>c.encodeType(n))),a=Y(...zn(t,e,(c,u)=>{try{c.covariant(u)}catch(l){throw new Error(l.message+`

`)}return c.encodeValue(u)}));return Y(r,s,i,o,a)}function Go(t,e){const n=new Dn(e);if(e.byteLength<$r.length)throw new Error("Message length smaller than magic number");const r=Kt(n,$r.length),s=new TextDecoder().decode(r);if(s!==$r)throw new Error("Wrong magic number: "+JSON.stringify(s));function i(f){const h=[],b=Number(he(f));for(let p=0;p<b;p++){const w=Number(vt(f));switch(w){case K.Opt:case K.Vector:{const m=Number(vt(f));h.push([w,m]);break}case K.Record:case K.Variant:{const m=[];let v=Number(he(f)),B;for(;v--;){const S=Number(he(f));if(S>=Math.pow(2,32))throw new Error("field id out of 32-bit range");if(typeof B=="number"&&B>=S)throw new Error("field id collision or not sorted");B=S;const A=Number(vt(f));m.push([S,A])}h.push([w,m]);break}case K.Func:{const m=[];let v=Number(he(f));for(;v--;)m.push(Number(vt(f)));const B=[];let S=Number(he(f));for(;S--;)B.push(Number(vt(f)));const A=[];let U=Number(he(f));for(;U--;)switch(Number(he(f))){case 1:{A.push("query");break}case 2:{A.push("oneway");break}case 3:{A.push("composite_query");break}default:throw new Error("unknown annotation")}h.push([w,[m,B,A]]);break}case K.Service:{let m=Number(he(f));const v=[];for(;m--;){const B=Number(he(f)),S=new TextDecoder().decode(Kt(f,B)),A=vt(f);v.push([S,A])}h.push([w,v]);break}default:throw new Error("Illegal op_code: "+w)}}const y=[],g=Number(he(f));for(let p=0;p<g;p++)y.push(Number(vt(f)));return[h,y]}const[o,a]=i(n);if(a.length<t.length)throw new Error("Wrong number of return values");const c=o.map(f=>ba());function u(f){if(f<-24)throw new Error("future value not supported");if(f<0)switch(f){case-1:return Yo;case-2:return Ko;case-3:return Wo;case-4:return zo;case-5:return sa;case-6:return ia;case-7:return oa;case-8:return aa;case-9:return ea;case-10:return ta;case-11:return na;case-12:return ra;case-13:return Qo;case-14:return Jo;case-15:return Xo;case-16:return Zo;case-17:return Ho;case-24:return ca;default:throw new Error("Illegal op_code: "+f)}if(f>=o.length)throw new Error("type index out of range");return c[f]}function l(f){switch(f[0]){case K.Vector:{const h=u(f[1]);return ua(h)}case K.Opt:{const h=u(f[1]);return da(h)}case K.Record:{const h={};for(const[g,p]of f[1]){const w=`_${g}_`;h[w]=u(p)}const b=la(h),y=b.tryAsTuple();return Array.isArray(y)?fa(...y):b}case K.Variant:{const h={};for(const[b,y]of f[1]){const g=`_${b}_`;h[g]=u(y)}return ha(h)}case K.Func:{const[h,b,y]=f[1];return ya(h.map(g=>u(g)),b.map(g=>u(g)),y)}case K.Service:{const h={},b=f[1];for(const[y,g]of b){let p=u(g);if(p instanceof Pe&&(p=p.getType()),!(p instanceof Qn))throw new Error("Illegal service definition: services can only contain functions");h[y]=p}return pa(h)}default:throw new Error("Illegal op_code: "+f[0])}}o.forEach((f,h)=>{if(f[0]===K.Func){const b=l(f);c[h].fill(b)}}),o.forEach((f,h)=>{if(f[0]!==K.Func){const b=l(f);c[h].fill(b)}}),Vs();const d=a.map(f=>u(f));try{const f=t.map((h,b)=>h.decodeValue(n,d[b]));for(let h=t.length;h<d.length;h++)d[h].decodeValue(n,d[h]);if(n.byteLength>0)throw new Error("decode: Left-over bytes");return f}finally{Vs()}}const Ho=new mi,Zo=new $t,Jc=new Lo,Ko=new Vo,Yo=new Wn,Xo=new jo,zo=new gi,Wo=new wi,Qo=new xi(32),Jo=new xi(64),ea=new Xt(8),ta=new Xt(16),na=new Xt(32),ra=new Xt(64),sa=new qt(8),ia=new qt(16),oa=new qt(32),aa=new qt(64),ca=new Fo;function fa(...t){return new us(t)}function ua(t){return new Un(t)}function da(t){return new pt(t)}function la(t){return new zt(t)}function ha(t){return new qn(t)}function ba(){return new Pe}function ya(t,e,n=[]){return new Qn(t,e,n)}function pa(t){return new Yr(t)}class ds{constructor(e=new Map){this.rels=e}copy(){const e=new Map;for(const[n,r]of this.rels.entries()){const s=new Map(r);e.set(n,s)}return new ds(e)}known(e,n){var r;return(r=this.rels.get(e.name))==null?void 0:r.get(n.name)}addNegative(e,n){this.addNames(e.name,n.name,!1)}add(e,n){this.addNames(e.name,n.name,!0)}display(){let e="";for(const[n,r]of this.rels)for(const[s,i]of r)e+=`${n} ${i?":<":"!<:"} ${s}
`;return e}addNames(e,n,r){const s=this.rels.get(e);if(s==null){const i=new Map;i.set(n,r),this.rels.set(e,i)}else s.set(n,r)}}let Mr=new ds;function Vs(){Mr=new ds}function ef(t,e){const n=new Set(t.annotations),r=new Set(e.annotations);if(n.size!==r.size)return!1;for(const s of n)if(!r.has(s))return!1;return!0}function _s(t){return t instanceof pt||t instanceof Wn||t instanceof $t}function Ei(t,e){const n=Mr.copy(),r=at(n,t,e);return r?Mr.add(t,e):Mr.addNegative(t,e),r}function at(t,e,n){if(e.name===n.name)return!0;const r=t.known(e,n);if(r!==void 0)return r;if(t.add(e,n),n instanceof $t||e instanceof mi||e instanceof wi&&n instanceof gi)return!0;if(e instanceof Un&&n instanceof Un)return at(t,e._type,n._type);if(n instanceof pt)return!0;if(e instanceof zt&&n instanceof zt){const s=e.fieldsAsObject;for(const[i,o]of n._fields){const a=s[Se(i)];if(a){if(!at(t,a,o))return!1}else if(!_s(o))return!1}return!0}if(e instanceof Qn&&n instanceof Qn){if(!ef(e,n))return!1;for(let s=0;s<e.argTypes.length;s++){const i=e.argTypes[s];if(s<n.argTypes.length){if(!at(t,n.argTypes[s],i))return!1}else if(!_s(i))return!1}for(let s=0;s<n.retTypes.length;s++){const i=n.retTypes[s];if(s<e.retTypes.length){if(!at(t,e.retTypes[s],i))return!1}else if(!_s(i))return!1}return!0}if(e instanceof qn&&n instanceof qn){const s=n.alternativesAsObject;for(const[i,o]of e._fields){const a=s[Se(i)];if(!a||!at(t,o,a))return!1}return!0}if(e instanceof Yr&&n instanceof Yr){const s=e.fieldsAsObject();for(const[i,o]of n._fields){const a=s[i];if(!a||!at(t,a,o))return!1}return!0}return e instanceof Pe?at(t,e.getType(),n):n instanceof Pe?at(t,e,n.getType()):!1}const tf=Object.freeze(Object.defineProperty({__proto__:null,Bool:Ko,BoolClass:Vo,ConstructType:Mt,Empty:Ho,EmptyClass:mi,FixedIntClass:Xt,FixedNatClass:qt,Float32:Qo,Float64:Jo,FloatClass:xi,Func:ya,FuncClass:Qn,Int:zo,Int16:ta,Int32:na,Int64:ra,Int8:ea,IntClass:gi,Nat:Wo,Nat16:ia,Nat32:oa,Nat64:aa,Nat8:sa,NatClass:wi,Null:Yo,NullClass:Wn,Opt:da,OptClass:pt,PrimitiveType:Le,Principal:ca,PrincipalClass:Fo,Rec:ba,RecClass:Pe,Record:la,RecordClass:zt,Reserved:Zo,ReservedClass:$t,Service:pa,ServiceClass:Yr,Text:Xo,TextClass:jo,Tuple:fa,TupleClass:us,Type:fs,Unknown:Jc,UnknownClass:Lo,Variant:ha,VariantClass:qn,Vec:ua,VecClass:Un,Visitor:Qc,decode:Go,encode:Ls,resetSubtypeCache:Vs,subtype:Ei},Symbol.toStringTag,{value:"Module"}));function Xr(t){if(!t)throw new Error("Input cannot be null or undefined");return t instanceof Uint8Array?t:t instanceof ArrayBuffer?new Uint8Array(t):Array.isArray(t)?new Uint8Array(t):"buffer"in t?Xr(t.buffer):new Uint8Array(t)}function ls(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}function js(t){if(typeof t=="string")return ma(t);if(typeof t=="number")return Me(ne(t));if(t instanceof Uint8Array||ArrayBuffer.isView(t))return Me(Xr(t));if(Array.isArray(t)){const e=t.map(js);return Me(X(...e))}else{if(t&&typeof t=="object"&&t._isPrincipal)return Me(t.toUint8Array());if(typeof t=="object"&&t!==null&&typeof t.toHash=="function")return js(t.toHash());if(typeof t=="object")return zr(t);if(typeof t=="bigint")return Me(ne(t))}throw J.fromCode(new ui(t))}const ma=t=>{const e=new TextEncoder().encode(t);return Me(e)};function Es(t){return zr(t)}function zr(t){const r=Object.entries(t).filter(([,o])=>o!==void 0).map(([o,a])=>{const c=ma(o),u=js(a);return[c,u]}).sort(([o],[a])=>Zc(o,a)),s=X(...r.map(o=>X(...o)));return Me(s)}new TextEncoder().encode(`
ic-request`);const nf=new TextEncoder().encode("\vic-response");new TextEncoder().encode("ic-request-auth-delegation");class Zi{getPrincipal(){return z.anonymous()}async transformRequest(e){return{...e,body:{content:e.body}}}}class Jt extends Error{constructor(e){super(e),this.name="DecodingError"}}const ga=55799,wa=Symbol("CBOR_STOP_CODE");var Ye=(t=>(t[t.False=20]="False",t[t.True=21]="True",t[t.Null=22]="Null",t[t.Undefined=23]="Undefined",t[t.Break=31]="Break",t))(Ye||{}),fe=(t=>(t[t.UnsignedInteger=0]="UnsignedInteger",t[t.NegativeInteger=1]="NegativeInteger",t[t.ByteString=2]="ByteString",t[t.TextString=3]="TextString",t[t.Array=4]="Array",t[t.Map=5]="Map",t[t.Tag=6]="Tag",t[t.Simple=7]="Simple",t))(fe||{});const rf=23,sf=255,of=65535,af=4294967295,cf=BigInt("0xffffffffffffffff");var Ze=(t=>(t[t.Value=23]="Value",t[t.OneByte=24]="OneByte",t[t.TwoBytes=25]="TwoBytes",t[t.FourBytes=26]="FourBytes",t[t.EightBytes=27]="EightBytes",t[t.Indefinite=31]="Indefinite",t))(Ze||{});const xn=!1;function ff(t){return t==null}function xa(t,e){const n=new Uint8Array(e);return n.set(t),n}const uf=new TextDecoder;function df(t){return(t&224)>>5}function lf(t){return t&31}let Jn=new Uint8Array,Ln,Xe=0;function hf(t,e){Jn=t,Xe=0;const n=Zt();return(e==null?void 0:e(n))??n}function Zt(t){const[e,n]=Dr();switch(e){case fe.UnsignedInteger:return Pn(n);case fe.NegativeInteger:return mf(n);case fe.ByteString:return _a(n);case fe.TextString:return Fs(n);case fe.Array:return bf(n);case fe.Map:return pf(n);case fe.Tag:return gf(n);case fe.Simple:return yf(n)}throw new Jt(`Unsupported major type: ${e}`)}function Dr(){const t=Jn.at(Xe);if(ff(t))throw new Jt("Provided CBOR data is empty");const e=df(t),n=lf(t);return Xe++,[e,n]}function bf(t,e){const n=Pn(t);if(n===1/0){const s=[];let i=Zt();for(;i!==wa;)s.push(i),i=Zt();return s}const r=new Array(n);for(let s=0;s<n;s++){const i=Zt();r[s]=i}return r}function yf(t){switch(t){case Ye.False:return!1;case Ye.True:return!0;case Ye.Null:return null;case Ye.Undefined:return;case Ye.Break:return wa}throw new Jt(`Unrecognized simple type: ${t.toString(2)}`)}function pf(t,e){const n=Pn(t),r={};if(n===1/0){let[s,i]=Dr();for(;s!==fe.Simple&&i!==Ye.Break;){const o=Fs(i),a=Zt();r[o]=a,[s,i]=Dr()}return r}for(let s=0;s<n;s++){const[i,o]=Dr();if(i!==fe.TextString)throw new Jt("Map keys must be text strings");const a=Fs(o),c=Zt();r[a]=c}return r}function Pn(t){if(t<=Ze.Value)return t;switch(Ln=new DataView(Jn.buffer,Jn.byteOffset+Xe),t){case Ze.OneByte:return Xe++,Ln.getUint8(0);case Ze.TwoBytes:return Xe+=2,Ln.getUint16(0,xn);case Ze.FourBytes:return Xe+=4,Ln.getUint32(0,xn);case Ze.EightBytes:return Xe+=8,Ln.getBigUint64(0,xn);case Ze.Indefinite:return 1/0;default:throw new Jt(`Unsupported integer info: ${t.toString(2)}`)}}function mf(t){const e=Pn(t);return typeof e=="number"?-1-e:-1n-e}function _a(t){const e=Pn(t);if(e>Number.MAX_SAFE_INTEGER)throw new Jt("Byte length is too large");const n=Number(e);return Xe+=n,Jn.slice(Xe-n,Xe)}function Fs(t){const e=_a(t);return uf.decode(e)}function gf(t,e){const n=Pn(t);if(n===ga)return Zt();throw new Jt(`Unsupported tag: ${n}.`)}class vi extends Error{constructor(e){super(e),this.name="SerializationError"}}const wf=2*1024,xf=100,_f=new TextEncoder;function Vn(t){return t<<5}let Ce=new Uint8Array(wf),Fe=new DataView(Ce.buffer),ce=0,vs=[];function Ef(t,e){ce=0;const n=(e==null?void 0:e(t))??t;return Of(ga,n,e),Ce.slice(0,ce)}function Ii(t,e){if(ce>Ce.length-xf&&(Ce=xa(Ce,Ce.length*2),Fe=new DataView(Ce.buffer)),t===!1||t===!0||t===null||t===void 0){Bf(t);return}if(typeof t=="number"||typeof t=="bigint"){Cf(t);return}if(typeof t=="string"){Ia(t);return}if(t instanceof Uint8Array){Ki(t);return}if(t instanceof ArrayBuffer){Ki(new Uint8Array(t));return}if(Array.isArray(t)){vf(t,e);return}if(typeof t=="object"){If(t,e);return}throw new vi(`Unsupported type: ${typeof t}`)}function vf(t,e){kn(fe.Array,t.length),t.forEach((n,r)=>{Ii((e==null?void 0:e(n,r.toString()))??n,e)})}function If(t,e){vs=Object.entries(t),kn(fe.Map,vs.length),vs.forEach(([n,r])=>{Ia(n),Ii((e==null?void 0:e(r,n))??r,e)})}function kn(t,e){if(e<=rf){Fe.setUint8(ce++,Vn(t)|Number(e));return}if(e<=sf){Fe.setUint8(ce++,Vn(t)|Ze.OneByte),Fe.setUint8(ce,Number(e)),ce+=1;return}if(e<=of){Fe.setUint8(ce++,Vn(t)|Ze.TwoBytes),Fe.setUint16(ce,Number(e),xn),ce+=2;return}if(e<=af){Fe.setUint8(ce++,Vn(t)|Ze.FourBytes),Fe.setUint32(ce,Number(e),xn),ce+=4;return}if(e<=cf){Fe.setUint8(ce++,Vn(t)|Ze.EightBytes),Fe.setBigUint64(ce,BigInt(e),xn),ce+=8;return}throw new vi(`Value too large to encode: ${e}`)}function Bf(t){kn(fe.Simple,Tf(t))}function Tf(t){if(t===!1)return Ye.False;if(t===!0)return Ye.True;if(t===null)return Ye.Null;if(t===void 0)return Ye.Undefined;throw new vi(`Unrecognized simple value: ${t.toString()}`)}function Ea(t,e){kn(t,e.length),ce>Ce.length-e.length&&(Ce=xa(Ce,Ce.length+e.length),Fe=new DataView(Ce.buffer)),Ce.set(e,ce),ce+=e.length}function va(t,e){kn(t,e)}function Sf(t){va(fe.UnsignedInteger,t)}function Af(t){va(fe.NegativeInteger,typeof t=="bigint"?-1n-t:-1-t)}function Cf(t){t>=0?Sf(t):Af(t)}function Ia(t){Ea(fe.TextString,_f.encode(t))}function Ki(t){Ea(fe.ByteString,t)}function Of(t,e,n){kn(fe.Tag,t),Ii(e,n)}function Nf(t){return typeof t=="object"&&t!==null&&"toCborValue"in t}function Is(t){try{return Ef(t,e=>z.isPrincipal(e)?e.toUint8Array():_n.isExpiry(e)?e.toBigInt():Nf(e)?e.toCborValue():e)}catch(e){throw J.fromCode(new ii(e,t))}}function rt(t){try{return hf(t)}catch(e){throw J.fromCode(new si(e,t))}}const Rr=()=>{if(typeof window<"u"&&window.crypto&&window.crypto.getRandomValues){const t=new Uint32Array(1);return window.crypto.getRandomValues(t),t[0]}if(typeof crypto<"u"&&crypto.getRandomValues){const t=new Uint32Array(1);return crypto.getRandomValues(t),t[0]}return typeof crypto<"u"&&crypto.randomInt?crypto.randomInt(0,4294967295):Math.floor(Math.random()*4294967295)};var Lt;(function(t){t.Query="read",t.ReadState="read_state",t.Call="call"})(Lt||(Lt={}));var Gs;(function(t){t.Call="call"})(Gs||(Gs={}));var er;(function(t){t.Query="query",t.ReadState="read_state"})(er||(er={}));function Hs(){const t=new ArrayBuffer(16),e=new DataView(t),n=Rr(),r=Rr(),s=Rr(),i=Rr();return e.setUint32(0,n),e.setUint32(4,r),e.setUint32(8,s),e.setUint32(12,i),Object.assign(new Uint8Array(t),{__nonce__:void 0})}const Ur="__expiry__",Bi=BigInt(1e3),Rf=BigInt(1e6),Ba=BigInt(60),Uf=BigInt(90)*Bi;function Ta(t){return t/Bi}function qf(t){return Ta(t)/Ba}class _n{constructor(e){this.__expiry__=e,this._isExpiry=!0}static fromDeltaInMilliseconds(e,n=0){const r=BigInt(e),s=BigInt(Date.now())+r+BigInt(n);let i;return r<Uf?i=Ta(s):i=qf(s)*Ba,new _n(i*Bi*Rf)}toBigInt(){return this.__expiry__}toHash(){return ne(this.__expiry__)}toString(){return this.__expiry__.toString()}toJSON(){return{[Ur]:this.toString()}}static fromJSON(e){const n=JSON.parse(e);if(n[Ur])try{const r=BigInt(n[Ur]);return new _n(r)}catch(r){throw new J(new Kr(`Not a valid BigInt: ${r}`))}throw new J(new Kr(`The input does not contain the key ${Ur}`))}static isExpiry(e){return e instanceof _n||typeof e=="object"&&e!==null&&"_isExpiry"in e&&e._isExpiry===!0&&"__expiry__"in e&&typeof e.__expiry__=="bigint"}}function Yi(t=Hs){return async e=>{const n=e.request.headers;e.request.headers=n,e.endpoint===Lt.Call&&(e.body.nonce=t())}}function Bs(t){const e=[];return t.forEach((n,r)=>{e.push([r,n])}),e}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Ti=BigInt(0),Wr=BigInt(1);function tr(t,e=""){if(typeof t!="boolean"){const n=e&&`"${e}"`;throw new Error(n+"expected boolean, got type="+typeof t)}return t}function En(t,e,n=""){const r=gr(t),s=t==null?void 0:t.length,i=e!==void 0;if(!r||i&&s!==e){const o=n&&`"${n}" `,a=i?` of length ${e}`:"",c=r?`length=${s}`:`type=${typeof t}`;throw new Error(o+"expected Uint8Array"+a+", got "+c)}return t}function Sa(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);return t===""?Ti:BigInt("0x"+t)}function st(t){return Sa(ee(t))}function nr(t){return De(t),Sa(ee(Uint8Array.from(t).reverse()))}function pe(t,e){return wr(t.toString(16).padStart(e*2,"0"))}function Aa(t,e){return pe(t,e).reverse()}function Ie(t,e,n){let r;if(typeof e=="string")try{r=wr(e)}catch(i){throw new Error(t+" must be hex string or Uint8Array, cause: "+i)}else if(gr(e))r=Uint8Array.from(e);else throw new Error(t+" must be hex string or Uint8Array");const s=r.length;if(typeof n=="number"&&s!==n)throw new Error(t+" of length "+n+" expected, got "+s);return r}function Xi(t){return Uint8Array.from(t)}const Ts=t=>typeof t=="bigint"&&Ti<=t;function Ca(t,e,n){return Ts(t)&&Ts(e)&&Ts(n)&&e<=t&&t<n}function zi(t,e,n,r){if(!Ca(e,n,r))throw new Error("expected valid "+t+": "+n+" <= n < "+r+", got "+e)}function rr(t){let e;for(e=0;t>Ti;t>>=Wr,e+=1);return e}function $f(t,e){return t>>BigInt(e)&Wr}const en=t=>(Wr<<BigInt(t))-Wr;function Mf(t){return typeof t=="function"&&Number.isSafeInteger(t.outputLen)}function Er(t,e,n={}){if(!t||typeof t!="object")throw new Error("expected valid options object");function r(s,i,o){const a=t[s];if(o&&a===void 0)return;const c=typeof a;if(c!==i||a===null)throw new Error(`param "${s}" is invalid: expected ${i}, got ${c}`)}Object.entries(e).forEach(([s,i])=>r(s,i,!1)),Object.entries(n).forEach(([s,i])=>r(s,i,!0))}const Oa=()=>{throw new Error("not implemented")};function sr(t){const e=new WeakMap;return(n,...r)=>{const s=e.get(n);if(s!==void 0)return s;const i=t(n,...r);return e.set(n,i),i}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Ae=BigInt(0),ge=BigInt(1),Vt=BigInt(2),Na=BigInt(3),Ra=BigInt(4),Ua=BigInt(5),Df=BigInt(7),qa=BigInt(8),Pf=BigInt(9),$a=BigInt(16);function ie(t,e){const n=t%e;return n>=Ae?n:e+n}function Je(t,e,n){let r=t;for(;e-- >Ae;)r*=r,r%=n;return r}function Wi(t,e){if(t===Ae)throw new Error("invert: expected non-zero number");if(e<=Ae)throw new Error("invert: expected positive modulus, got "+e);let n=ie(t,e),r=e,s=Ae,i=ge;for(;n!==Ae;){const a=r/n,c=r%n,u=s-i*a;r=n,n=c,s=i,i=u}if(r!==ge)throw new Error("invert: does not exist");return ie(s,e)}function Si(t,e,n){if(!t.eql(t.sqr(e),n))throw new Error("Cannot find square root")}function Ma(t,e){const n=(t.ORDER+ge)/Ra,r=t.pow(e,n);return Si(t,r,e),r}function kf(t,e){const n=(t.ORDER-Ua)/qa,r=t.mul(e,Vt),s=t.pow(r,n),i=t.mul(e,s),o=t.mul(t.mul(i,Vt),s),a=t.mul(i,t.sub(o,t.ONE));return Si(t,a,e),a}function Lf(t){const e=Dt(t),n=Da(t),r=n(e,e.neg(e.ONE)),s=n(e,r),i=n(e,e.neg(r)),o=(t+Df)/$a;return(a,c)=>{let u=a.pow(c,o),l=a.mul(u,r);const d=a.mul(u,s),f=a.mul(u,i),h=a.eql(a.sqr(l),c),b=a.eql(a.sqr(d),c);u=a.cmov(u,l,h),l=a.cmov(f,d,b);const y=a.eql(a.sqr(l),c),g=a.cmov(u,l,y);return Si(a,g,c),g}}function Da(t){if(t<Na)throw new Error("sqrt is not defined for small field");let e=t-ge,n=0;for(;e%Vt===Ae;)e/=Vt,n++;let r=Vt;const s=Dt(t);for(;Qr(s,r)===1;)if(r++>1e3)throw new Error("Cannot find square root: probably non-prime P");if(n===1)return Ma;let i=s.pow(r,e);const o=(e+ge)/Vt;return function(c,u){if(c.is0(u))return u;if(Qr(c,u)!==1)throw new Error("Cannot find square root");let l=n,d=c.mul(c.ONE,i),f=c.pow(u,e),h=c.pow(u,o);for(;!c.eql(f,c.ONE);){if(c.is0(f))return c.ZERO;let b=1,y=c.sqr(f);for(;!c.eql(y,c.ONE);)if(b++,y=c.sqr(y),b===l)throw new Error("Cannot find square root");const g=ge<<BigInt(l-b-1),p=c.pow(d,g);l=b,d=c.sqr(p),f=c.mul(f,d),h=c.mul(h,p)}return h}}function Vf(t){return t%Ra===Na?Ma:t%qa===Ua?kf:t%$a===Pf?Lf(t):Da(t)}const jf=(t,e)=>(ie(t,e)&ge)===ge,Ff=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function Pa(t){const e={ORDER:"bigint",MASK:"bigint",BYTES:"number",BITS:"number"},n=Ff.reduce((r,s)=>(r[s]="function",r),e);return Er(t,n),t}function hs(t,e,n){if(n<Ae)throw new Error("invalid exponent, negatives unsupported");if(n===Ae)return t.ONE;if(n===ge)return e;let r=t.ONE,s=e;for(;n>Ae;)n&ge&&(r=t.mul(r,s)),s=t.sqr(s),n>>=ge;return r}function tn(t,e,n=!1){const r=new Array(e.length).fill(n?t.ZERO:void 0),s=e.reduce((o,a,c)=>t.is0(a)?o:(r[c]=o,t.mul(o,a)),t.ONE),i=t.inv(s);return e.reduceRight((o,a,c)=>t.is0(a)?o:(r[c]=t.mul(o,r[c]),t.mul(o,a)),i),r}function Qr(t,e){const n=(t.ORDER-ge)/Vt,r=t.pow(e,n),s=t.eql(r,t.ONE),i=t.eql(r,t.ZERO),o=t.eql(r,t.neg(t.ONE));if(!s&&!i&&!o)throw new Error("invalid Legendre symbol result");return s?1:i?0:-1}function Gf(t,e){e!==void 0&&Ec(e);const n=e!==void 0?e:t.toString(2).length,r=Math.ceil(n/8);return{nBitLength:n,nByteLength:r}}function Dt(t,e,n=!1,r={}){if(t<=Ae)throw new Error("invalid field: expected ORDER > 0, got "+t);let s,i,o=!1,a;if(typeof e=="object"&&e!=null){if(r.sqrt||n)throw new Error("cannot specify opts in two arguments");const f=e;f.BITS&&(s=f.BITS),f.sqrt&&(i=f.sqrt),typeof f.isLE=="boolean"&&(n=f.isLE),typeof f.modFromBytes=="boolean"&&(o=f.modFromBytes),a=f.allowedLengths}else typeof e=="number"&&(s=e),r.sqrt&&(i=r.sqrt);const{nBitLength:c,nByteLength:u}=Gf(t,s);if(u>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let l;const d=Object.freeze({ORDER:t,isLE:n,BITS:c,BYTES:u,MASK:en(c),ZERO:Ae,ONE:ge,allowedLengths:a,create:f=>ie(f,t),isValid:f=>{if(typeof f!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof f);return Ae<=f&&f<t},is0:f=>f===Ae,isValidNot0:f=>!d.is0(f)&&d.isValid(f),isOdd:f=>(f&ge)===ge,neg:f=>ie(-f,t),eql:(f,h)=>f===h,sqr:f=>ie(f*f,t),add:(f,h)=>ie(f+h,t),sub:(f,h)=>ie(f-h,t),mul:(f,h)=>ie(f*h,t),pow:(f,h)=>hs(d,f,h),div:(f,h)=>ie(f*Wi(h,t),t),sqrN:f=>f*f,addN:(f,h)=>f+h,subN:(f,h)=>f-h,mulN:(f,h)=>f*h,inv:f=>Wi(f,t),sqrt:i||(f=>(l||(l=Vf(t)),l(d,f))),toBytes:f=>n?Aa(f,u):pe(f,u),fromBytes:(f,h=!0)=>{if(a){if(!a.includes(f.length)||f.length>u)throw new Error("Field.fromBytes: expected "+a+" bytes, got "+f.length);const y=new Uint8Array(u);y.set(f,n?0:y.length-f.length),f=y}if(f.length!==u)throw new Error("Field.fromBytes: expected "+u+" bytes, got "+f.length);let b=n?nr(f):st(f);if(o&&(b=ie(b,t)),!h&&!d.isValid(b))throw new Error("invalid field element: outside of range 0..ORDER");return b},invertBatch:f=>tn(d,f),cmov:(f,h,b)=>b?h:f});return Object.freeze(d)}function ka(t){if(typeof t!="bigint")throw new Error("field order must be bigint");const e=t.toString(2).length;return Math.ceil(e/8)}function La(t){const e=ka(t);return e+Math.ceil(e/2)}function Hf(t,e,n=!1){const r=t.length,s=ka(e),i=La(e);if(r<16||r<i||r>1024)throw new Error("expected "+i+"-1024 bytes of input, got "+r);const o=n?nr(t):st(t),a=ie(o,e-ge)+ge;return n?Aa(a,s):pe(a,s)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const $n=BigInt(0),jt=BigInt(1);function Jr(t,e){const n=e.negate();return t?n:e}function lt(t,e){const n=tn(t.Fp,e.map(r=>r.Z));return e.map((r,s)=>t.fromAffine(r.toAffine(n[s])))}function Va(t,e){if(!Number.isSafeInteger(t)||t<=0||t>e)throw new Error("invalid window size, expected [1.."+e+"], got W="+t)}function Ss(t,e){Va(t,e);const n=Math.ceil(e/t)+1,r=2**(t-1),s=2**t,i=en(t),o=BigInt(t);return{windows:n,windowSize:r,mask:i,maxNumber:s,shiftBy:o}}function Qi(t,e,n){const{windowSize:r,mask:s,maxNumber:i,shiftBy:o}=n;let a=Number(t&s),c=t>>o;a>r&&(a-=i,c+=jt);const u=e*r,l=u+Math.abs(a)-1,d=a===0,f=a<0,h=e%2!==0;return{nextN:c,offset:l,isZero:d,isNeg:f,isNegF:h,offsetF:u}}function Zf(t,e){if(!Array.isArray(t))throw new Error("array expected");t.forEach((n,r)=>{if(!(n instanceof e))throw new Error("invalid point at index "+r)})}function Kf(t,e){if(!Array.isArray(t))throw new Error("array of scalars expected");t.forEach((n,r)=>{if(!e.isValid(n))throw new Error("invalid scalar at index "+r)})}const As=new WeakMap,ja=new WeakMap;function Cs(t){return ja.get(t)||1}function Ji(t){if(t!==$n)throw new Error("invalid wNAF")}class Fa{constructor(e,n){this.BASE=e.BASE,this.ZERO=e.ZERO,this.Fn=e.Fn,this.bits=n}_unsafeLadder(e,n,r=this.ZERO){let s=e;for(;n>$n;)n&jt&&(r=r.add(s)),s=s.double(),n>>=jt;return r}precomputeWindow(e,n){const{windows:r,windowSize:s}=Ss(n,this.bits),i=[];let o=e,a=o;for(let c=0;c<r;c++){a=o,i.push(a);for(let u=1;u<s;u++)a=a.add(o),i.push(a);o=a.double()}return i}wNAF(e,n,r){if(!this.Fn.isValid(r))throw new Error("invalid scalar");let s=this.ZERO,i=this.BASE;const o=Ss(e,this.bits);for(let a=0;a<o.windows;a++){const{nextN:c,offset:u,isZero:l,isNeg:d,isNegF:f,offsetF:h}=Qi(r,a,o);r=c,l?i=i.add(Jr(f,n[h])):s=s.add(Jr(d,n[u]))}return Ji(r),{p:s,f:i}}wNAFUnsafe(e,n,r,s=this.ZERO){const i=Ss(e,this.bits);for(let o=0;o<i.windows&&r!==$n;o++){const{nextN:a,offset:c,isZero:u,isNeg:l}=Qi(r,o,i);if(r=a,!u){const d=n[c];s=s.add(l?d.negate():d)}}return Ji(r),s}getPrecomputes(e,n,r){let s=As.get(n);return s||(s=this.precomputeWindow(n,e),e!==1&&(typeof r=="function"&&(s=r(s)),As.set(n,s))),s}cached(e,n,r){const s=Cs(e);return this.wNAF(s,this.getPrecomputes(s,e,r),n)}unsafe(e,n,r,s){const i=Cs(e);return i===1?this._unsafeLadder(e,n,s):this.wNAFUnsafe(i,this.getPrecomputes(i,e,r),n,s)}createCache(e,n){Va(n,this.bits),ja.set(e,n),As.delete(e)}hasCache(e){return Cs(e)!==1}}function Yf(t,e,n,r){let s=e,i=t.ZERO,o=t.ZERO;for(;n>$n||r>$n;)n&jt&&(i=i.add(s)),r&jt&&(o=o.add(s)),s=s.double(),n>>=jt,r>>=jt;return{p1:i,p2:o}}function Ga(t,e,n,r){Zf(n,t),Kf(r,e);const s=n.length,i=r.length;if(s!==i)throw new Error("arrays of points and scalars must have equal length");const o=t.ZERO,a=rr(BigInt(s));let c=1;a>12?c=a-3:a>4?c=a-2:a>0&&(c=2);const u=en(c),l=new Array(Number(u)+1).fill(o),d=Math.floor((e.BITS-1)/c)*c;let f=o;for(let h=d;h>=0;h-=c){l.fill(o);for(let y=0;y<i;y++){const g=r[y],p=Number(g>>BigInt(h)&u);l[p]=l[p].add(n[y])}let b=o;for(let y=l.length-1,g=o;y>0;y--)g=g.add(l[y]),b=b.add(g);if(f=f.add(b),h!==0)for(let y=0;y<c;y++)f=f.double()}return f}function eo(t,e,n){if(e){if(e.ORDER!==t)throw new Error("Field.ORDER must match order: Fp == p, Fn == n");return Pa(e),e}else return Dt(t,{isLE:n})}function Ha(t,e,n={},r){if(r===void 0&&(r=t==="edwards"),!e||typeof e!="object")throw new Error(`expected valid ${t} CURVE object`);for(const c of["p","n","h"]){const u=e[c];if(!(typeof u=="bigint"&&u>$n))throw new Error(`CURVE.${c} must be positive bigint`)}const s=eo(e.p,n.Fp,r),i=eo(e.n,n.Fn,r),a=["Gx","Gy","a",t==="weierstrass"?"b":"d"];for(const c of a)if(!s.isValid(e[c]))throw new Error(`CURVE.${c} must be valid field element of CURVE.Fp`);return e=Object.freeze(Object.assign({},e)),{CURVE:e,Fp:s,Fn:i}}const Xf=st;function It(t,e){if(ir(t),ir(e),t<0||t>=1<<8*e)throw new Error("invalid I2OSP input: "+t);const n=Array.from({length:e}).fill(0);for(let r=e-1;r>=0;r--)n[r]=t&255,t>>>=8;return new Uint8Array(n)}function zf(t,e){const n=new Uint8Array(t.length);for(let r=0;r<t.length;r++)n[r]=t[r]^e[r];return n}function ir(t){if(!Number.isSafeInteger(t))throw new Error("number expected")}function Za(t){if(!gr(t)&&typeof t!="string")throw new Error("DST must be Uint8Array or string");return typeof t=="string"?re(t):t}function Wf(t,e,n,r){De(t),ir(n),e=Za(e),e.length>255&&(e=r(X(re("H2C-OVERSIZE-DST-"),e)));const{outputLen:s,blockLen:i}=r,o=Math.ceil(n/s);if(n>65535||o>255)throw new Error("expand_message_xmd: invalid lenInBytes");const a=X(e,It(e.length,1)),c=It(0,i),u=It(n,2),l=new Array(o),d=r(X(c,t,u,It(0,1),a));l[0]=r(X(d,It(1,1),a));for(let h=1;h<=o;h++){const b=[zf(d,l[h-1]),It(h+1,1),a];l[h]=r(X(...b))}return X(...l).slice(0,n)}function Qf(t,e,n,r,s){if(De(t),ir(n),e=Za(e),e.length>255){const i=Math.ceil(2*r/8);e=s.create({dkLen:i}).update(re("H2C-OVERSIZE-DST-")).update(e).digest()}if(n>65535||e.length>255)throw new Error("expand_message_xof: invalid lenInBytes");return s.create({dkLen:n}).update(t).update(It(n,2)).update(e).update(It(e.length,1)).digest()}function Os(t,e,n){Er(n,{p:"bigint",m:"number",k:"number",hash:"function"});const{p:r,k:s,m:i,hash:o,expand:a,DST:c}=n;if(!Mf(n.hash))throw new Error("expected valid hash");De(t),ir(e);const u=r.toString(2).length,l=Math.ceil((u+s)/8),d=e*i*l;let f;if(a==="xmd")f=Wf(t,c,d,o);else if(a==="xof")f=Qf(t,c,d,s,o);else if(a==="_internal_pass")f=t;else throw new Error('expand must be "xmd" or "xof"');const h=new Array(e);for(let b=0;b<e;b++){const y=new Array(i);for(let g=0;g<i;g++){const p=l*(g+b*i),w=f.subarray(p,p+l);y[g]=ie(Xf(w),r)}h[b]=y}return h}function Ka(t,e){const n=e.map(r=>Array.from(r).reverse());return(r,s)=>{const[i,o,a,c]=n.map(d=>d.reduce((f,h)=>t.add(t.mul(f,r),h))),[u,l]=tn(t,[o,c],!0);return r=t.mul(i,u),s=t.mul(s,t.mul(a,l)),{x:r,y:s}}}const Jf=re("HashToScalar-");function to(t,e,n){if(typeof e!="function")throw new Error("mapToCurve() must be defined");function r(i){return t.fromAffine(e(i))}function s(i){const o=i.clearCofactor();return o.equals(t.ZERO)?t.ZERO:(o.assertValidity(),o)}return{defaults:n,hashToCurve(i,o){const a=Object.assign({},n,o),c=Os(i,2,a),u=r(c[0]),l=r(c[1]);return s(u.add(l))},encodeToCurve(i,o){const a=n.encodeDST?{DST:n.encodeDST}:{},c=Object.assign({},n,a,o),u=Os(i,1,c),l=r(u[0]);return s(l)},mapToCurve(i){if(!Array.isArray(i))throw new Error("expected array of bigints");for(const o of i)if(typeof o!="bigint")throw new Error("expected array of bigints");return s(r(i))},hashToScalar(i,o){const a=t.Fn.ORDER,c=Object.assign({},n,{p:a,m:1,DST:Jf},o);return Os(i,1,c)[0][0]}}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const no=(t,e)=>(t+(t>=0?e:-e)/ct)/e;function eu(t,e,n){const[[r,s],[i,o]]=e,a=no(o*t,n),c=no(-s*t,n);let u=t-a*r-c*i,l=-a*s-c*o;const d=u<Ft,f=l<Ft;d&&(u=-u),f&&(l=-l);const h=en(Math.ceil(rr(n)/2))+Ee;if(u<Ft||u>=h||l<Ft||l>=h)throw new Error("splitScalar (endomorphism): failed, k="+t);return{k1neg:d,k1:u,k2neg:f,k2:l}}const Ft=BigInt(0),Ee=BigInt(1),ct=BigInt(2),bn=BigInt(3),Zs=BigInt(4);function es(t,e){const{BYTES:n}=t;let r;if(typeof e=="bigint")r=e;else{let s=Ie("private key",e);try{r=t.fromBytes(s)}catch{throw new Error(`invalid private key: expected ui8a of size ${n}, got ${typeof e}`)}}if(!t.isValidNot0(r))throw new Error("invalid private key: out of range [1..N-1]");return r}function tu(t,e={}){const n=Ha("weierstrass",t,e),{Fp:r,Fn:s}=n;let i=n.CURVE;const{h:o,n:a}=i;Er(e,{},{allowInfinityPoint:"boolean",clearCofactor:"function",isTorsionFree:"function",fromBytes:"function",toBytes:"function",endo:"object",wrapPrivateKey:"boolean"});const{endo:c}=e;if(c&&(!r.is0(i.a)||typeof c.beta!="bigint"||!Array.isArray(c.basises)))throw new Error('invalid endo: expected "beta": bigint and "basises": array');const u=su(r,s);function l(){if(!r.isOdd)throw new Error("compression is not supported: Field does not have .isOdd()")}function d(C,_,I){const{x:N,y:M}=_.toAffine(),j=r.toBytes(N);if(tr(I,"isCompressed"),I){l();const O=!r.isOdd(M);return X(nu(O),j)}else return X(Uint8Array.of(4),j,r.toBytes(M))}function f(C){En(C,void 0,"Point");const{publicKey:_,publicKeyUncompressed:I}=u,N=C.length,M=C[0],j=C.subarray(1);if(N===_&&(M===2||M===3)){const O=r.fromBytes(j);if(!r.isValid(O))throw new Error("bad point: is not on curve, wrong x");const R=y(O);let $;try{$=r.sqrt(R)}catch(be){const ae=be instanceof Error?": "+be.message:"";throw new Error("bad point: is not on curve, sqrt error"+ae)}l();const k=r.isOdd($);return(M&1)===1!==k&&($=r.neg($)),{x:O,y:$}}else if(N===I&&M===4){const O=r.BYTES,R=r.fromBytes(j.subarray(0,O)),$=r.fromBytes(j.subarray(O,O*2));if(!g(R,$))throw new Error("bad point: is not on curve");return{x:R,y:$}}else throw new Error(`bad point: got length ${N}, expected compressed=${_} or uncompressed=${I}`)}const h=e.toBytes||d,b=e.fromBytes||f;function y(C){const _=r.sqr(C),I=r.mul(_,C);return r.add(r.add(I,r.mul(C,i.a)),i.b)}function g(C,_){const I=r.sqr(_),N=y(C);return r.eql(I,N)}if(!g(i.Gx,i.Gy))throw new Error("bad curve params: generator point");const p=r.mul(r.pow(i.a,bn),Zs),w=r.mul(r.sqr(i.b),BigInt(27));if(r.is0(r.add(p,w)))throw new Error("bad curve params: a or b");function m(C,_,I=!1){if(!r.isValid(_)||I&&r.is0(_))throw new Error(`bad point coordinate ${C}`);return _}function v(C){if(!(C instanceof x))throw new Error("ProjectivePoint expected")}function B(C){if(!c||!c.basises)throw new Error("no endo");return eu(C,c.basises,s.ORDER)}const S=sr((C,_)=>{const{X:I,Y:N,Z:M}=C;if(r.eql(M,r.ONE))return{x:I,y:N};const j=C.is0();_==null&&(_=j?r.ONE:r.inv(M));const O=r.mul(I,_),R=r.mul(N,_),$=r.mul(M,_);if(j)return{x:r.ZERO,y:r.ZERO};if(!r.eql($,r.ONE))throw new Error("invZ was invalid");return{x:O,y:R}}),A=sr(C=>{if(C.is0()){if(e.allowInfinityPoint&&!r.is0(C.Y))return;throw new Error("bad point: ZERO")}const{x:_,y:I}=C.toAffine();if(!r.isValid(_)||!r.isValid(I))throw new Error("bad point: x or y not field elements");if(!g(_,I))throw new Error("bad point: equation left != right");if(!C.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});function U(C,_,I,N,M){return I=new x(r.mul(I.X,C),I.Y,I.Z),_=Jr(N,_),I=Jr(M,I),_.add(I)}class x{constructor(_,I,N){this.X=m("x",_),this.Y=m("y",I,!0),this.Z=m("z",N),Object.freeze(this)}static CURVE(){return i}static fromAffine(_){const{x:I,y:N}=_||{};if(!_||!r.isValid(I)||!r.isValid(N))throw new Error("invalid affine point");if(_ instanceof x)throw new Error("projective point not allowed");return r.is0(I)&&r.is0(N)?x.ZERO:new x(I,N,r.ONE)}static fromBytes(_){const I=x.fromAffine(b(En(_,void 0,"point")));return I.assertValidity(),I}static fromHex(_){return x.fromBytes(Ie("pointHex",_))}get x(){return this.toAffine().x}get y(){return this.toAffine().y}precompute(_=8,I=!0){return q.createCache(this,_),I||this.multiply(bn),this}assertValidity(){A(this)}hasEvenY(){const{y:_}=this.toAffine();if(!r.isOdd)throw new Error("Field doesn't support isOdd");return!r.isOdd(_)}equals(_){v(_);const{X:I,Y:N,Z:M}=this,{X:j,Y:O,Z:R}=_,$=r.eql(r.mul(I,R),r.mul(j,M)),k=r.eql(r.mul(N,R),r.mul(O,M));return $&&k}negate(){return new x(this.X,r.neg(this.Y),this.Z)}double(){const{a:_,b:I}=i,N=r.mul(I,bn),{X:M,Y:j,Z:O}=this;let R=r.ZERO,$=r.ZERO,k=r.ZERO,L=r.mul(M,M),be=r.mul(j,j),ae=r.mul(O,O),W=r.mul(M,j);return W=r.add(W,W),k=r.mul(M,O),k=r.add(k,k),R=r.mul(_,k),$=r.mul(N,ae),$=r.add(R,$),R=r.sub(be,$),$=r.add(be,$),$=r.mul(R,$),R=r.mul(W,R),k=r.mul(N,k),ae=r.mul(_,ae),W=r.sub(L,ae),W=r.mul(_,W),W=r.add(W,k),k=r.add(L,L),L=r.add(k,L),L=r.add(L,ae),L=r.mul(L,W),$=r.add($,L),ae=r.mul(j,O),ae=r.add(ae,ae),L=r.mul(ae,W),R=r.sub(R,L),k=r.mul(ae,be),k=r.add(k,k),k=r.add(k,k),new x(R,$,k)}add(_){v(_);const{X:I,Y:N,Z:M}=this,{X:j,Y:O,Z:R}=_;let $=r.ZERO,k=r.ZERO,L=r.ZERO;const be=i.a,ae=r.mul(i.b,bn);let W=r.mul(I,j),Ve=r.mul(N,O),je=r.mul(M,R),nn=r.add(I,N),_e=r.add(j,O);nn=r.mul(nn,_e),_e=r.add(W,Ve),nn=r.sub(nn,_e),_e=r.add(I,M);let ze=r.add(j,R);return _e=r.mul(_e,ze),ze=r.add(W,je),_e=r.sub(_e,ze),ze=r.add(N,M),$=r.add(O,R),ze=r.mul(ze,$),$=r.add(Ve,je),ze=r.sub(ze,$),L=r.mul(be,_e),$=r.mul(ae,je),L=r.add($,L),$=r.sub(Ve,L),L=r.add(Ve,L),k=r.mul($,L),Ve=r.add(W,W),Ve=r.add(Ve,W),je=r.mul(be,je),_e=r.mul(ae,_e),Ve=r.add(Ve,je),je=r.sub(W,je),je=r.mul(be,je),_e=r.add(_e,je),W=r.mul(Ve,_e),k=r.add(k,W),W=r.mul(ze,_e),$=r.mul(nn,$),$=r.sub($,W),W=r.mul(nn,Ve),L=r.mul(ze,L),L=r.add(L,W),new x($,k,L)}subtract(_){return this.add(_.negate())}is0(){return this.equals(x.ZERO)}multiply(_){const{endo:I}=e;if(!s.isValidNot0(_))throw new Error("invalid scalar: out of range");let N,M;const j=O=>q.cached(this,O,R=>lt(x,R));if(I){const{k1neg:O,k1:R,k2neg:$,k2:k}=B(_),{p:L,f:be}=j(R),{p:ae,f:W}=j(k);M=be.add(W),N=U(I.beta,L,ae,O,$)}else{const{p:O,f:R}=j(_);N=O,M=R}return lt(x,[N,M])[0]}multiplyUnsafe(_){const{endo:I}=e,N=this;if(!s.isValid(_))throw new Error("invalid scalar: out of range");if(_===Ft||N.is0())return x.ZERO;if(_===Ee)return N;if(q.hasCache(this))return this.multiply(_);if(I){const{k1neg:M,k1:j,k2neg:O,k2:R}=B(_),{p1:$,p2:k}=Yf(x,N,j,R);return U(I.beta,$,k,M,O)}else return q.unsafe(N,_)}multiplyAndAddUnsafe(_,I,N){const M=this.multiplyUnsafe(I).add(_.multiplyUnsafe(N));return M.is0()?void 0:M}toAffine(_){return S(this,_)}isTorsionFree(){const{isTorsionFree:_}=e;return o===Ee?!0:_?_(x,this):q.unsafe(this,a).is0()}clearCofactor(){const{clearCofactor:_}=e;return o===Ee?this:_?_(x,this):this.multiplyUnsafe(o)}isSmallOrder(){return this.multiplyUnsafe(o).is0()}toBytes(_=!0){return tr(_,"isCompressed"),this.assertValidity(),h(x,this,_)}toHex(_=!0){return ee(this.toBytes(_))}toString(){return`<Point ${this.is0()?"ZERO":this.toHex()}>`}get px(){return this.X}get py(){return this.X}get pz(){return this.Z}toRawBytes(_=!0){return this.toBytes(_)}_setWindowSize(_){this.precompute(_)}static normalizeZ(_){return lt(x,_)}static msm(_,I){return Ga(x,s,_,I)}static fromPrivateKey(_){return x.BASE.multiply(es(s,_))}}x.BASE=new x(i.Gx,i.Gy,r.ONE),x.ZERO=new x(r.ZERO,r.ONE,r.ZERO),x.Fp=r,x.Fn=s;const T=s.BITS,q=new Fa(x,e.endo?Math.ceil(T/2):T);return x.BASE.precompute(8),x}function nu(t){return Uint8Array.of(t?2:3)}function ru(t,e){const n=t.ORDER;let r=Ft;for(let b=n-Ee;b%ct===Ft;b/=ct)r+=Ee;const s=r,i=ct<<s-Ee-Ee,o=i*ct,a=(n-Ee)/o,c=(a-Ee)/ct,u=o-Ee,l=i,d=t.pow(e,a),f=t.pow(e,(a+Ee)/ct);let h=(b,y)=>{let g=d,p=t.pow(y,u),w=t.sqr(p);w=t.mul(w,y);let m=t.mul(b,w);m=t.pow(m,c),m=t.mul(m,p),p=t.mul(m,y),w=t.mul(m,b);let v=t.mul(w,p);m=t.pow(v,l);let B=t.eql(m,t.ONE);p=t.mul(w,f),m=t.mul(v,g),w=t.cmov(p,w,B),v=t.cmov(m,v,B);for(let S=s;S>Ee;S--){let A=S-ct;A=ct<<A-Ee;let U=t.pow(v,A);const x=t.eql(U,t.ONE);p=t.mul(w,g),g=t.mul(g,g),U=t.mul(v,g),w=t.cmov(p,w,x),v=t.cmov(U,v,x)}return{isValid:B,value:w}};if(t.ORDER%Zs===bn){const b=(t.ORDER-bn)/Zs,y=t.sqrt(t.neg(e));h=(g,p)=>{let w=t.sqr(p);const m=t.mul(g,p);w=t.mul(w,m);let v=t.pow(w,b);v=t.mul(v,m);const B=t.mul(v,y),S=t.mul(t.sqr(v),p),A=t.eql(S,g);let U=t.cmov(B,v,A);return{isValid:A,value:U}}}return h}function Ya(t,e){Pa(t);const{A:n,B:r,Z:s}=e;if(!t.isValid(n)||!t.isValid(r)||!t.isValid(s))throw new Error("mapToCurveSimpleSWU: invalid opts");const i=ru(t,s);if(!t.isOdd)throw new Error("Field does not have .isOdd()");return o=>{let a,c,u,l,d,f,h,b;a=t.sqr(o),a=t.mul(a,s),c=t.sqr(a),c=t.add(c,a),u=t.add(c,t.ONE),u=t.mul(u,r),l=t.cmov(s,t.neg(c),!t.eql(c,t.ZERO)),l=t.mul(l,n),c=t.sqr(u),f=t.sqr(l),d=t.mul(f,n),c=t.add(c,d),c=t.mul(c,u),f=t.mul(f,l),d=t.mul(f,r),c=t.add(c,d),h=t.mul(a,u);const{isValid:y,value:g}=i(c,f);b=t.mul(a,o),b=t.mul(b,g),h=t.cmov(h,u,y),b=t.cmov(b,g,y);const p=t.isOdd(o)===t.isOdd(b);b=t.cmov(t.neg(b),b,p);const w=tn(t,[l],!0)[0];return h=t.mul(h,w),{x:h,y:b}}}function su(t,e){return{secretKey:e.BYTES,publicKey:1+t.BYTES,publicKeyUncompressed:1+2*t.BYTES,publicKeyHasPrefix:!0,signature:2*e.BYTES}}function ro(t){const{CURVE:e,curveOpts:n}=iu(t),r=tu(e,n);return au(t,r)}function iu(t){const e={a:t.a,b:t.b,p:t.Fp.ORDER,n:t.n,h:t.h,Gx:t.Gx,Gy:t.Gy},n=t.Fp;let r=t.allowedPrivateKeyLengths?Array.from(new Set(t.allowedPrivateKeyLengths.map(o=>Math.ceil(o/2)))):void 0;const s=Dt(e.n,{BITS:t.nBitLength,allowedLengths:r,modFromBytes:t.wrapPrivateKey}),i={Fp:n,Fn:s,allowInfinityPoint:t.allowInfinityPoint,endo:t.endo,isTorsionFree:t.isTorsionFree,clearCofactor:t.clearCofactor,fromBytes:t.fromBytes,toBytes:t.toBytes};return{CURVE:e,curveOpts:i}}function ou(t,e,n){function r(s){const i=t.sqr(s),o=t.mul(i,s);return t.add(t.add(o,t.mul(s,e)),n)}return r}function au(t,e){const{Fp:n,Fn:r}=e;function s(o){return Ca(o,Ee,r.ORDER)}const i=ou(n,t.a,t.b);return Object.assign({},{CURVE:t,Point:e,ProjectivePoint:e,normPrivateKeyToScalar:o=>es(r,o),weierstrassEquation:i,isWithinCurveOrder:s})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const cu=BigInt(0),qr=BigInt(1),so=BigInt(2),yn=BigInt(3);function fu(t){const e=[];for(;t>qr;t>>=qr)(t&qr)===cu?e.unshift(0):(t&yn)===yn?(e.unshift(-1),t+=qr):e.unshift(1);return e}function Ns(t){if(!Array.isArray(t)||t.length===0)throw new Error("expected non-empty array")}function uu(t,e,n,r){const{Fp2:s,Fp12:i}=t,{twistType:o,ateLoopSize:a,xNegative:c,postPrecompute:u}=r;let l;if(o==="multiplicative")l=(m,v,B,S,A,U)=>i.mul014(S,m,s.mul(v,A),s.mul(B,U));else if(o==="divisive")l=(m,v,B,S,A,U)=>i.mul034(S,s.mul(B,U),s.mul(v,A),m);else throw new Error("bls: unknown twist type");const d=s.div(s.ONE,s.mul(s.ONE,so));function f(m,v,B,S){const A=s.sqr(B),U=s.sqr(S),x=s.mulByB(s.mul(U,yn)),T=s.mul(x,yn),q=s.sub(s.sub(s.sqr(s.add(B,S)),U),A),C=s.sub(x,A),_=s.mul(s.sqr(v),yn),I=s.neg(q);return m.push([C,_,I]),v=s.mul(s.mul(s.mul(s.sub(A,T),v),B),d),B=s.sub(s.sqr(s.mul(s.add(A,T),d)),s.mul(s.sqr(x),yn)),S=s.mul(A,q),{Rx:v,Ry:B,Rz:S}}function h(m,v,B,S,A,U){const x=s.sub(B,s.mul(U,S)),T=s.sub(v,s.mul(A,S)),q=s.sub(s.mul(x,A),s.mul(T,U)),C=s.neg(x),_=T;m.push([q,C,_]);const I=s.sqr(T),N=s.mul(I,T),M=s.mul(I,v),j=s.add(s.sub(N,s.mul(M,so)),s.mul(s.sqr(x),S));return v=s.mul(T,j),B=s.sub(s.mul(s.sub(M,j),x),s.mul(N,B)),S=s.mul(S,N),{Rx:v,Ry:B,Rz:S}}const b=fu(a),y=sr(m=>{const v=m,{x:B,y:S}=v.toAffine(),A=B,U=S,x=s.neg(S);let T=A,q=U,C=s.ONE;const _=[];for(const I of b){const N=[];({Rx:T,Ry:q,Rz:C}=f(N,T,q,C)),I&&({Rx:T,Ry:q,Rz:C}=h(N,T,q,C,A,I===-1?x:U)),_.push(N)}if(u){const I=_[_.length-1];u(T,q,C,A,U,h.bind(null,I))}return _});function g(m,v=!1){let B=i.ONE;if(m.length){const S=m[0][0].length;for(let A=0;A<S;A++){B=i.sqr(B);for(const[U,x,T]of m)for(const[q,C,_]of U[A])B=l(q,C,_,B,x,T)}}return c&&(B=i.conjugate(B)),v?i.finalExponentiate(B):B}function p(m,v=!0){const B=[];lt(e,m.map(({g1:S})=>S)),lt(n,m.map(({g2:S})=>S));for(const{g1:S,g2:A}of m){if(S.is0()||A.is0())throw new Error("pairing is not available for ZERO point");S.assertValidity(),A.assertValidity();const U=S.toAffine();B.push([y(A),U.x,U.y])}return g(B,v)}function w(m,v,B=!0){return p([{g1:m,g2:v}],B)}return{Fp12:i,millerLoopBatch:g,pairing:w,pairingBatch:p,calcPairingPrecomputes:y}}function io(t,e,n,r,s){const{Fp12:i,pairingBatch:o}=t;function a(d){return d instanceof e.Point?d:e.Point.fromHex(d)}function c(d){return d instanceof n.Point?d:n.Point.fromHex(d)}function u(d){if(!(d instanceof n.Point))throw new Error(`expected valid message hashed to ${s?"G1":"G2"} curve`);return d}const l=s?(d,f)=>({g1:f,g2:d}):(d,f)=>({g1:d,g2:f});return{getPublicKey(d){const f=es(e.Point.Fn,d);return e.Point.BASE.multiply(f)},sign(d,f,h){if(h!=null)throw new Error("sign() expects 2 arguments");const b=es(e.Point.Fn,f);return u(d).assertValidity(),d.multiply(b)},verify(d,f,h,b){if(b!=null)throw new Error("verify() expects 3 arguments");d=c(d),h=a(h);const y=h.negate(),g=e.Point.BASE,p=u(f),w=d,m=o([l(y,p),l(g,w)]);return i.eql(m,i.ONE)},verifyBatch(d,f,h){if(Ns(f),h.length!==f.length)throw new Error("amount of public keys and messages should be equal");const b=c(d),y=f,g=h.map(a),p=new Map;for(let v=0;v<g.length;v++){const B=g[v],S=y[v];let A=p.get(S);A===void 0&&(A=[],p.set(S,A)),A.push(B)}const w=[],m=e.Point.BASE;try{for(const[v,B]of p){const S=B.reduce((A,U)=>A.add(U));w.push(l(S,v))}return w.push(l(m.negate(),b)),i.eql(o(w),i.ONE)}catch{return!1}},aggregatePublicKeys(d){Ns(d),d=d.map(h=>a(h));const f=d.reduce((h,b)=>h.add(b),e.Point.ZERO);return f.assertValidity(),f},aggregateSignatures(d){Ns(d),d=d.map(h=>c(h));const f=d.reduce((h,b)=>h.add(b),n.Point.ZERO);return f.assertValidity(),f},hash(d,f){De(d);const h=f?{DST:f}:void 0;return n.hashToCurve(d,h)},Signature:r}}function du(t){const{Fp:e,Fr:n,Fp2:r,Fp6:s,Fp12:i}=t.fields,o=ro(t.G1),a=Object.assign(o,to(o.Point,t.G1.mapToCurve,{...t.htfDefaults,...t.G1.htfDefaults})),c=ro(t.G2),u=Object.assign(c,to(c.Point,t.G2.mapToCurve,{...t.htfDefaults,...t.G2.htfDefaults})),l=uu(t.fields,a.Point,u.Point,{...t.params,postPrecompute:t.postPrecompute}),{millerLoopBatch:d,pairing:f,pairingBatch:h,calcPairingPrecomputes:b}=l,y=io(l,a,u,t.G2.Signature,!1),g=io(l,u,a,t.G1.ShortSignature,!0),p=t.randomBytes||No,w=()=>{const O=La(n.ORDER);return Hf(p(O),n.ORDER)},m={randomSecretKey:w,randomPrivateKey:w,calcPairingPrecomputes:b},{ShortSignature:v}=t.G1,{Signature:B}=t.G2;function S(O,R){return O instanceof a.Point?O:g.hash(Ie("point",O),R==null?void 0:R.DST)}function A(O,R){return O instanceof u.Point?O:y.hash(Ie("point",O),R==null?void 0:R.DST)}function U(O){return y.getPublicKey(O).toBytes(!0)}function x(O){return g.getPublicKey(O).toBytes(!0)}function T(O,R,$){const k=A(O,$),L=y.sign(k,R);return O instanceof u.Point?L:B.toBytes(L)}function q(O,R,$){const k=S(O,$),L=g.sign(k,R);return O instanceof a.Point?L:v.toBytes(L)}function C(O,R,$,k){const L=A(R,k);return y.verify(O,L,$)}function _(O,R,$,k){const L=S(R,k);return g.verify(O,L,$)}function I(O){const R=y.aggregatePublicKeys(O);return O[0]instanceof a.Point?R:R.toBytes(!0)}function N(O){const R=y.aggregateSignatures(O);return O[0]instanceof u.Point?R:B.toBytes(R)}function M(O){const R=g.aggregateSignatures(O);return O[0]instanceof a.Point?R:v.toBytes(R)}function j(O,R,$,k){const L=R.map(be=>A(be,k));return y.verifyBatch(O,L,$)}return a.Point.BASE.precompute(4),{longSignatures:y,shortSignatures:g,millerLoopBatch:d,pairing:f,pairingBatch:h,verifyBatch:j,fields:{Fr:n,Fp:e,Fp2:r,Fp6:s,Fp12:i},params:{ateLoopSize:t.params.ateLoopSize,twistType:t.params.twistType,r:t.params.r,G1b:t.G1.b,G2b:t.G2.b},utils:m,getPublicKey:U,getPublicKeyForShortSignatures:x,sign:T,signShortSignature:q,verify:C,verifyShortSignature:_,aggregatePublicKeys:I,aggregateSignatures:N,aggregateShortSignatures:M,G1:a,G2:u,Signature:B,ShortSignature:v}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const oo=BigInt(0),ht=BigInt(1),ve=BigInt(2),ao=BigInt(3);function Ai(t,e,n,r,s=1,i){const o=BigInt(i===void 0?r:i),a=n**BigInt(r),c=[];for(let u=0;u<s;u++){const l=BigInt(u+1),d=[];for(let f=0,h=ht;f<r;f++){const b=(l*h-l)/o%a;d.push(t.pow(e,b)),h*=n}c.push(d)}return c}function lu(t,e,n){const r=e.pow(n,(t.ORDER-ht)/ao),s=e.pow(n,(t.ORDER-ht)/ve);function i(f,h){const b=e.mul(e.frobeniusMap(f,1),r),y=e.mul(e.frobeniusMap(h,1),s);return[b,y]}const o=e.pow(n,(t.ORDER**ve-ht)/ao),a=e.pow(n,(t.ORDER**ve-ht)/ve);if(!e.eql(a,e.neg(e.ONE)))throw new Error("psiFrobenius: PSI2_Y!==-1");function c(f,h){return[e.mul(f,o),e.neg(h)]}const u=f=>(h,b)=>{const y=b.toAffine(),g=f(y.x,y.y);return h.fromAffine({x:g[0],y:g[1]})},l=u(i),d=u(c);return{psi:i,psi2:c,G2psi:l,G2psi2:d,PSI_X:r,PSI_Y:s,PSI2_X:o,PSI2_Y:a}}const co=(t,e)=>{if(e.length!==2)throw new Error("invalid tuple");const n=e.map(r=>t.create(r));return{c0:n[0],c1:n[1]}};class hu{constructor(e,n={}){this.MASK=ht;const r=e.ORDER,s=r*r;this.Fp=e,this.ORDER=s,this.BITS=rr(s),this.BYTES=Math.ceil(rr(s)/8),this.isLE=e.isLE,this.ZERO={c0:e.ZERO,c1:e.ZERO},this.ONE={c0:e.ONE,c1:e.ZERO},this.Fp_NONRESIDUE=e.create(n.NONRESIDUE||BigInt(-1)),this.Fp_div2=e.div(e.ONE,ve),this.NONRESIDUE=co(e,n.FP2_NONRESIDUE),this.FROBENIUS_COEFFICIENTS=Ai(e,this.Fp_NONRESIDUE,e.ORDER,2)[0],this.mulByB=n.Fp2mulByB,Object.seal(this)}fromBigTuple(e){return co(this.Fp,e)}create(e){return e}isValid({c0:e,c1:n}){function r(s,i){return typeof s=="bigint"&&oo<=s&&s<i}return r(e,this.ORDER)&&r(n,this.ORDER)}is0({c0:e,c1:n}){return this.Fp.is0(e)&&this.Fp.is0(n)}isValidNot0(e){return!this.is0(e)&&this.isValid(e)}eql({c0:e,c1:n},{c0:r,c1:s}){return this.Fp.eql(e,r)&&this.Fp.eql(n,s)}neg({c0:e,c1:n}){return{c0:this.Fp.neg(e),c1:this.Fp.neg(n)}}pow(e,n){return hs(this,e,n)}invertBatch(e){return tn(this,e)}add(e,n){const{c0:r,c1:s}=e,{c0:i,c1:o}=n;return{c0:this.Fp.add(r,i),c1:this.Fp.add(s,o)}}sub({c0:e,c1:n},{c0:r,c1:s}){return{c0:this.Fp.sub(e,r),c1:this.Fp.sub(n,s)}}mul({c0:e,c1:n},r){const{Fp:s}=this;if(typeof r=="bigint")return{c0:s.mul(e,r),c1:s.mul(n,r)};const{c0:i,c1:o}=r;let a=s.mul(e,i),c=s.mul(n,o);const u=s.sub(a,c),l=s.sub(s.mul(s.add(e,n),s.add(i,o)),s.add(a,c));return{c0:u,c1:l}}sqr({c0:e,c1:n}){const{Fp:r}=this,s=r.add(e,n),i=r.sub(e,n),o=r.add(e,e);return{c0:r.mul(s,i),c1:r.mul(o,n)}}addN(e,n){return this.add(e,n)}subN(e,n){return this.sub(e,n)}mulN(e,n){return this.mul(e,n)}sqrN(e){return this.sqr(e)}div(e,n){const{Fp:r}=this;return this.mul(e,typeof n=="bigint"?r.inv(r.create(n)):this.inv(n))}inv({c0:e,c1:n}){const{Fp:r}=this,s=r.inv(r.create(e*e+n*n));return{c0:r.mul(s,r.create(e)),c1:r.mul(s,r.create(-n))}}sqrt(e){const{Fp:n}=this,r=this,{c0:s,c1:i}=e;if(n.is0(i))return Qr(n,s)===1?r.create({c0:n.sqrt(s),c1:n.ZERO}):r.create({c0:n.ZERO,c1:n.sqrt(n.div(s,this.Fp_NONRESIDUE))});const o=n.sqrt(n.sub(n.sqr(s),n.mul(n.sqr(i),this.Fp_NONRESIDUE)));let a=n.mul(n.add(o,s),this.Fp_div2);Qr(n,a)===-1&&(a=n.sub(a,o));const u=n.sqrt(a),l=r.create({c0:u,c1:n.div(n.mul(i,this.Fp_div2),u)});if(!r.eql(r.sqr(l),e))throw new Error("Cannot find square root");const d=l,f=r.neg(d),{re:h,im:b}=r.reim(d),{re:y,im:g}=r.reim(f);return b>g||b===g&&h>y?d:f}isOdd(e){const{re:n,im:r}=this.reim(e),s=n%ve,i=n===oo,o=r%ve;return BigInt(s||i&&o)==ht}fromBytes(e){const{Fp:n}=this;if(e.length!==this.BYTES)throw new Error("fromBytes invalid length="+e.length);return{c0:n.fromBytes(e.subarray(0,n.BYTES)),c1:n.fromBytes(e.subarray(n.BYTES))}}toBytes({c0:e,c1:n}){return X(this.Fp.toBytes(e),this.Fp.toBytes(n))}cmov({c0:e,c1:n},{c0:r,c1:s},i){return{c0:this.Fp.cmov(e,r,i),c1:this.Fp.cmov(n,s,i)}}reim({c0:e,c1:n}){return{re:e,im:n}}Fp4Square(e,n){const r=this,s=r.sqr(e),i=r.sqr(n);return{first:r.add(r.mulByNonresidue(i),s),second:r.sub(r.sub(r.sqr(r.add(e,n)),s),i)}}mulByNonresidue({c0:e,c1:n}){return this.mul({c0:e,c1:n},this.NONRESIDUE)}frobeniusMap({c0:e,c1:n},r){return{c0:e,c1:this.Fp.mul(n,this.FROBENIUS_COEFFICIENTS[r%2])}}}class bu{constructor(e){this.MASK=ht,this.Fp2=e,this.ORDER=e.ORDER,this.BITS=3*e.BITS,this.BYTES=3*e.BYTES,this.isLE=e.isLE,this.ZERO={c0:e.ZERO,c1:e.ZERO,c2:e.ZERO},this.ONE={c0:e.ONE,c1:e.ZERO,c2:e.ZERO};const{Fp:n}=e,r=Ai(e,e.NONRESIDUE,n.ORDER,6,2,3);this.FROBENIUS_COEFFICIENTS_1=r[0],this.FROBENIUS_COEFFICIENTS_2=r[1],Object.seal(this)}add({c0:e,c1:n,c2:r},{c0:s,c1:i,c2:o}){const{Fp2:a}=this;return{c0:a.add(e,s),c1:a.add(n,i),c2:a.add(r,o)}}sub({c0:e,c1:n,c2:r},{c0:s,c1:i,c2:o}){const{Fp2:a}=this;return{c0:a.sub(e,s),c1:a.sub(n,i),c2:a.sub(r,o)}}mul({c0:e,c1:n,c2:r},s){const{Fp2:i}=this;if(typeof s=="bigint")return{c0:i.mul(e,s),c1:i.mul(n,s),c2:i.mul(r,s)};const{c0:o,c1:a,c2:c}=s,u=i.mul(e,o),l=i.mul(n,a),d=i.mul(r,c);return{c0:i.add(u,i.mulByNonresidue(i.sub(i.mul(i.add(n,r),i.add(a,c)),i.add(l,d)))),c1:i.add(i.sub(i.mul(i.add(e,n),i.add(o,a)),i.add(u,l)),i.mulByNonresidue(d)),c2:i.sub(i.add(l,i.mul(i.add(e,r),i.add(o,c))),i.add(u,d))}}sqr({c0:e,c1:n,c2:r}){const{Fp2:s}=this;let i=s.sqr(e),o=s.mul(s.mul(e,n),ve),a=s.mul(s.mul(n,r),ve),c=s.sqr(r);return{c0:s.add(s.mulByNonresidue(a),i),c1:s.add(s.mulByNonresidue(c),o),c2:s.sub(s.sub(s.add(s.add(o,s.sqr(s.add(s.sub(e,n),r))),a),i),c)}}addN(e,n){return this.add(e,n)}subN(e,n){return this.sub(e,n)}mulN(e,n){return this.mul(e,n)}sqrN(e){return this.sqr(e)}create(e){return e}isValid({c0:e,c1:n,c2:r}){const{Fp2:s}=this;return s.isValid(e)&&s.isValid(n)&&s.isValid(r)}is0({c0:e,c1:n,c2:r}){const{Fp2:s}=this;return s.is0(e)&&s.is0(n)&&s.is0(r)}isValidNot0(e){return!this.is0(e)&&this.isValid(e)}neg({c0:e,c1:n,c2:r}){const{Fp2:s}=this;return{c0:s.neg(e),c1:s.neg(n),c2:s.neg(r)}}eql({c0:e,c1:n,c2:r},{c0:s,c1:i,c2:o}){const{Fp2:a}=this;return a.eql(e,s)&&a.eql(n,i)&&a.eql(r,o)}sqrt(e){return Oa()}div(e,n){const{Fp2:r}=this,{Fp:s}=r;return this.mul(e,typeof n=="bigint"?s.inv(s.create(n)):this.inv(n))}pow(e,n){return hs(this,e,n)}invertBatch(e){return tn(this,e)}inv({c0:e,c1:n,c2:r}){const{Fp2:s}=this;let i=s.sub(s.sqr(e),s.mulByNonresidue(s.mul(r,n))),o=s.sub(s.mulByNonresidue(s.sqr(r)),s.mul(e,n)),a=s.sub(s.sqr(n),s.mul(e,r)),c=s.inv(s.add(s.mulByNonresidue(s.add(s.mul(r,o),s.mul(n,a))),s.mul(e,i)));return{c0:s.mul(c,i),c1:s.mul(c,o),c2:s.mul(c,a)}}fromBytes(e){const{Fp2:n}=this;if(e.length!==this.BYTES)throw new Error("fromBytes invalid length="+e.length);const r=n.BYTES;return{c0:n.fromBytes(e.subarray(0,r)),c1:n.fromBytes(e.subarray(r,r*2)),c2:n.fromBytes(e.subarray(2*r))}}toBytes({c0:e,c1:n,c2:r}){const{Fp2:s}=this;return X(s.toBytes(e),s.toBytes(n),s.toBytes(r))}cmov({c0:e,c1:n,c2:r},{c0:s,c1:i,c2:o},a){const{Fp2:c}=this;return{c0:c.cmov(e,s,a),c1:c.cmov(n,i,a),c2:c.cmov(r,o,a)}}fromBigSix(e){const{Fp2:n}=this;if(!Array.isArray(e)||e.length!==6)throw new Error("invalid Fp6 usage");return{c0:n.fromBigTuple(e.slice(0,2)),c1:n.fromBigTuple(e.slice(2,4)),c2:n.fromBigTuple(e.slice(4,6))}}frobeniusMap({c0:e,c1:n,c2:r},s){const{Fp2:i}=this;return{c0:i.frobeniusMap(e,s),c1:i.mul(i.frobeniusMap(n,s),this.FROBENIUS_COEFFICIENTS_1[s%6]),c2:i.mul(i.frobeniusMap(r,s),this.FROBENIUS_COEFFICIENTS_2[s%6])}}mulByFp2({c0:e,c1:n,c2:r},s){const{Fp2:i}=this;return{c0:i.mul(e,s),c1:i.mul(n,s),c2:i.mul(r,s)}}mulByNonresidue({c0:e,c1:n,c2:r}){const{Fp2:s}=this;return{c0:s.mulByNonresidue(r),c1:e,c2:n}}mul1({c0:e,c1:n,c2:r},s){const{Fp2:i}=this;return{c0:i.mulByNonresidue(i.mul(r,s)),c1:i.mul(e,s),c2:i.mul(n,s)}}mul01({c0:e,c1:n,c2:r},s,i){const{Fp2:o}=this;let a=o.mul(e,s),c=o.mul(n,i);return{c0:o.add(o.mulByNonresidue(o.sub(o.mul(o.add(n,r),i),c)),a),c1:o.sub(o.sub(o.mul(o.add(s,i),o.add(e,n)),a),c),c2:o.add(o.sub(o.mul(o.add(e,r),s),a),c)}}}class yu{constructor(e,n){this.MASK=ht;const{Fp2:r}=e,{Fp:s}=r;this.Fp6=e,this.ORDER=r.ORDER,this.BITS=2*e.BITS,this.BYTES=2*e.BYTES,this.isLE=e.isLE,this.ZERO={c0:e.ZERO,c1:e.ZERO},this.ONE={c0:e.ONE,c1:e.ZERO},this.FROBENIUS_COEFFICIENTS=Ai(r,r.NONRESIDUE,s.ORDER,12,1,6)[0],this.X_LEN=n.X_LEN,this.finalExponentiate=n.Fp12finalExponentiate}create(e){return e}isValid({c0:e,c1:n}){const{Fp6:r}=this;return r.isValid(e)&&r.isValid(n)}is0({c0:e,c1:n}){const{Fp6:r}=this;return r.is0(e)&&r.is0(n)}isValidNot0(e){return!this.is0(e)&&this.isValid(e)}neg({c0:e,c1:n}){const{Fp6:r}=this;return{c0:r.neg(e),c1:r.neg(n)}}eql({c0:e,c1:n},{c0:r,c1:s}){const{Fp6:i}=this;return i.eql(e,r)&&i.eql(n,s)}sqrt(e){Oa()}inv({c0:e,c1:n}){const{Fp6:r}=this;let s=r.inv(r.sub(r.sqr(e),r.mulByNonresidue(r.sqr(n))));return{c0:r.mul(e,s),c1:r.neg(r.mul(n,s))}}div(e,n){const{Fp6:r}=this,{Fp2:s}=r,{Fp:i}=s;return this.mul(e,typeof n=="bigint"?i.inv(i.create(n)):this.inv(n))}pow(e,n){return hs(this,e,n)}invertBatch(e){return tn(this,e)}add({c0:e,c1:n},{c0:r,c1:s}){const{Fp6:i}=this;return{c0:i.add(e,r),c1:i.add(n,s)}}sub({c0:e,c1:n},{c0:r,c1:s}){const{Fp6:i}=this;return{c0:i.sub(e,r),c1:i.sub(n,s)}}mul({c0:e,c1:n},r){const{Fp6:s}=this;if(typeof r=="bigint")return{c0:s.mul(e,r),c1:s.mul(n,r)};let{c0:i,c1:o}=r,a=s.mul(e,i),c=s.mul(n,o);return{c0:s.add(a,s.mulByNonresidue(c)),c1:s.sub(s.mul(s.add(e,n),s.add(i,o)),s.add(a,c))}}sqr({c0:e,c1:n}){const{Fp6:r}=this;let s=r.mul(e,n);return{c0:r.sub(r.sub(r.mul(r.add(r.mulByNonresidue(n),e),r.add(e,n)),s),r.mulByNonresidue(s)),c1:r.add(s,s)}}addN(e,n){return this.add(e,n)}subN(e,n){return this.sub(e,n)}mulN(e,n){return this.mul(e,n)}sqrN(e){return this.sqr(e)}fromBytes(e){const{Fp6:n}=this;if(e.length!==this.BYTES)throw new Error("fromBytes invalid length="+e.length);return{c0:n.fromBytes(e.subarray(0,n.BYTES)),c1:n.fromBytes(e.subarray(n.BYTES))}}toBytes({c0:e,c1:n}){const{Fp6:r}=this;return X(r.toBytes(e),r.toBytes(n))}cmov({c0:e,c1:n},{c0:r,c1:s},i){const{Fp6:o}=this;return{c0:o.cmov(e,r,i),c1:o.cmov(n,s,i)}}fromBigTwelve(e){const{Fp6:n}=this;return{c0:n.fromBigSix(e.slice(0,6)),c1:n.fromBigSix(e.slice(6,12))}}frobeniusMap(e,n){const{Fp6:r}=this,{Fp2:s}=r,{c0:i,c1:o,c2:a}=r.frobeniusMap(e.c1,n),c=this.FROBENIUS_COEFFICIENTS[n%12];return{c0:r.frobeniusMap(e.c0,n),c1:r.create({c0:s.mul(i,c),c1:s.mul(o,c),c2:s.mul(a,c)})}}mulByFp2({c0:e,c1:n},r){const{Fp6:s}=this;return{c0:s.mulByFp2(e,r),c1:s.mulByFp2(n,r)}}conjugate({c0:e,c1:n}){return{c0:e,c1:this.Fp6.neg(n)}}mul014({c0:e,c1:n},r,s,i){const{Fp6:o}=this,{Fp2:a}=o;let c=o.mul01(e,r,s),u=o.mul1(n,i);return{c0:o.add(o.mulByNonresidue(u),c),c1:o.sub(o.sub(o.mul01(o.add(n,e),r,a.add(s,i)),c),u)}}mul034({c0:e,c1:n},r,s,i){const{Fp6:o}=this,{Fp2:a}=o,c=o.create({c0:a.mul(e.c0,r),c1:a.mul(e.c1,r),c2:a.mul(e.c2,r)}),u=o.mul01(n,s,i),l=o.mul01(o.add(e,n),a.add(r,s),i);return{c0:o.add(o.mulByNonresidue(u),c),c1:o.sub(l,o.add(c,u))}}_cyclotomicSquare({c0:e,c1:n}){const{Fp6:r}=this,{Fp2:s}=r,{c0:i,c1:o,c2:a}=e,{c0:c,c1:u,c2:l}=n,{first:d,second:f}=s.Fp4Square(i,u),{first:h,second:b}=s.Fp4Square(c,a),{first:y,second:g}=s.Fp4Square(o,l),p=s.mulByNonresidue(g);return{c0:r.create({c0:s.add(s.mul(s.sub(d,i),ve),d),c1:s.add(s.mul(s.sub(h,o),ve),h),c2:s.add(s.mul(s.sub(y,a),ve),y)}),c1:r.create({c0:s.add(s.mul(s.add(p,c),ve),p),c1:s.add(s.mul(s.add(f,u),ve),f),c2:s.add(s.mul(s.add(b,l),ve),b)})}}_cyclotomicExp(e,n){let r=this.ONE;for(let s=this.X_LEN-1;s>=0;s--)r=this._cyclotomicSquare(r),$f(n,s)&&(r=this.mul(r,e));return r}}function pu(t){const e=Dt(t.ORDER),n=new hu(e,t),r=new bu(n),s=new yu(r,t);return{Fp:e,Fp2:n,Fp6:r,Fp12:s}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const xe=BigInt(0),ts=BigInt(1),ke=BigInt(2),bs=BigInt(3),or=BigInt(4),Bt=BigInt("0xd201000000010000"),mu=rr(Bt),Wt={p:BigInt("0x1a0111ea397fe69a4b1ba7b6434bacd764774b84f38512bf6730d2a0f6b0f6241eabfffeb153ffffb9feffffffffaaab"),n:BigInt("0x73eda753299d7d483339d80809a1d80553bda402fffe5bfeffffffff00000001"),h:BigInt("0x396c8c005555e1568c00aaab0000aaab"),a:xe,b:or,Gx:BigInt("0x17f1d3a73197d7942695638c4fa9ac0fc3688c4f9774b905a14e3a3f171bac586c55e83ff97a1aeffb3af00adb22c6bb"),Gy:BigInt("0x08b3f481e3aaa0f1a09e30ed741d8ae4fcf5e095d5d00af600db18cb2c04b3edd03cc744a2888ae40caa232946c5e7e1")},gu=Dt(Wt.n,{modFromBytes:!0,isLE:!0}),{Fp:D,Fp2:F,Fp6:wu,Fp12:Z}=pu({ORDER:Wt.p,X_LEN:mu,FP2_NONRESIDUE:[ts,ts],Fp2mulByB:({c0:t,c1:e})=>{const n=D.mul(t,or),r=D.mul(e,or);return{c0:D.sub(n,r),c1:D.add(n,r)}},Fp12finalExponentiate:t=>{const e=Bt,n=Z.div(Z.frobeniusMap(t,6),t),r=Z.mul(Z.frobeniusMap(n,2),n),s=Z.conjugate(Z._cyclotomicExp(r,e)),i=Z.mul(Z.conjugate(Z._cyclotomicSquare(r)),s),o=Z.conjugate(Z._cyclotomicExp(i,e)),a=Z.conjugate(Z._cyclotomicExp(o,e)),c=Z.mul(Z.conjugate(Z._cyclotomicExp(a,e)),Z._cyclotomicSquare(s)),u=Z.conjugate(Z._cyclotomicExp(c,e)),l=Z.frobeniusMap(Z.mul(s,a),2),d=Z.frobeniusMap(Z.mul(o,r),3),f=Z.frobeniusMap(Z.mul(c,Z.conjugate(r)),1),h=Z.mul(Z.mul(u,Z.conjugate(i)),r);return Z.mul(Z.mul(Z.mul(l,d),f),h)}}),{G2psi:fo,G2psi2:xu}=lu(D,F,F.div(F.ONE,F.NONRESIDUE)),Rs=Object.freeze({DST:"BLS_SIG_BLS12381G2_XMD:SHA-256_SSWU_RO_NUL_",encodeDST:"BLS_SIG_BLS12381G2_XMD:SHA-256_SSWU_RO_NUL_",p:D.ORDER,m:2,k:128,expand:"xmd",hash:Me}),Ci={p:F.ORDER,n:Wt.n,h:BigInt("0x5d543a95414e7f1091d50792876a202cd91de4547085abaa68a205b2e5a7ddfa628f1cb4d9e82ef21537e293a6691ae1616ec6e786f0c70cf1c38e31c7238e5"),a:F.ZERO,b:F.fromBigTuple([or,or]),Gx:F.fromBigTuple([BigInt("0x024aa2b2f08f0a91260805272dc51051c6e47ad4fa403b02b4510b647ae3d1770bac0326a805bbefd48056c8c121bdb8"),BigInt("0x13e02b6052719f607dacd3a088274f65596bd0d09920b61ab5da61bbdc7f5049334cf11213945d57e5ac7d055d042b7e")]),Gy:F.fromBigTuple([BigInt("0x0ce5d527727d6e118cc9cdc6da2e351aadfd9baa8cbdd3a76d429a695160d12c923ac9cc3baca289e193548608b82801"),BigInt("0x0606c4a02ea734cc32acd2b02bc28b99cb3e287e85a763af267492ab572e99ab3f370d275cec1da1aaa9075ff05f79be")])},ys=vr(D.toBytes(xe),{infinity:!0,compressed:!0});function ps(t){t=t.slice();const e=t[0]&224,n=!!(e>>7&1),r=!!(e>>6&1),s=!!(e>>5&1);return t[0]&=31,{compressed:n,infinity:r,sort:s,value:t}}function vr(t,e){if(t[0]&224)throw new Error("setMask: non-empty mask");return e.compressed&&(t[0]|=128),e.infinity&&(t[0]|=64),e.sort&&(t[0]|=32),t}function _u(t,e,n){const{BYTES:r,ORDER:s}=D,i=e.is0(),{x:o,y:a}=e.toAffine();if(n){if(i)return ys.slice();const c=!!(a*ke/s);return vr(pe(o,r),{compressed:!0,sort:c})}else return i?X(Uint8Array.of(64),new Uint8Array(2*r-1)):X(pe(o,r),pe(a,r))}function Us(t){t.assertValidity();const{BYTES:e,ORDER:n}=D,{x:r,y:s}=t.toAffine();if(t.is0())return ys.slice();const i=!!(s*ke/n);return vr(pe(r,e),{compressed:!0,sort:i})}function Eu(t){const{compressed:e,infinity:n,sort:r,value:s}=ps(t),{BYTES:i,ORDER:o}=D;if(s.length===48&&e){const a=st(s),c=D.create(a&en(D.BITS));if(n){if(c!==xe)throw new Error("invalid G1 point: non-empty, at infinity, with compression");return{x:xe,y:xe}}const u=D.add(D.pow(c,bs),D.create(Wt.b));let l=D.sqrt(u);if(!l)throw new Error("invalid G1 point: compressed point");return l*ke/o!==BigInt(r)&&(l=D.neg(l)),{x:D.create(c),y:D.create(l)}}else if(s.length===96&&!e){const a=st(s.subarray(0,i)),c=st(s.subarray(i));if(n){if(a!==xe||c!==xe)throw new Error("G1: non-empty point at infinity");return ms.G1.Point.ZERO.toAffine()}return{x:D.create(a),y:D.create(c)}}else throw new Error("invalid G1 point: expected 48/96 bytes")}function uo(t){const{infinity:e,sort:n,value:r}=ps(Ie("signatureHex",t,48)),s=D.ORDER,i=ms.G1.Point,o=st(r);if(e)return i.ZERO;const a=D.create(o&en(D.BITS)),c=D.add(D.pow(a,bs),D.create(Wt.b));let u=D.sqrt(c);if(!u)throw new Error("invalid G1 point: compressed");const l=BigInt(n);u*ke/s!==l&&(u=D.neg(u));const d=i.fromAffine({x:a,y:u});return d.assertValidity(),d}function vu(t,e,n){const{BYTES:r,ORDER:s}=D,i=e.is0(),{x:o,y:a}=e.toAffine();if(n){if(i)return X(ys,pe(xe,r));const c=!!(a.c1===xe?a.c0*ke/s:a.c1*ke/s);return X(vr(pe(o.c1,r),{compressed:!0,sort:c}),pe(o.c0,r))}else{if(i)return X(Uint8Array.of(64),new Uint8Array(4*r-1));const{re:c,im:u}=F.reim(o),{re:l,im:d}=F.reim(a);return X(pe(u,r),pe(c,r),pe(d,r),pe(l,r))}}function qs(t){t.assertValidity();const{BYTES:e}=D;if(t.is0())return X(ys,pe(xe,e));const{x:n,y:r}=t.toAffine(),{re:s,im:i}=F.reim(n),{re:o,im:a}=F.reim(r),u=!!((a>xe?a*ke:o*ke)/D.ORDER&ts),l=s;return X(vr(pe(i,e),{sort:u,compressed:!0}),pe(l,e))}function Iu(t){const{BYTES:e,ORDER:n}=D,{compressed:r,infinity:s,sort:i,value:o}=ps(t);if(!r&&!s&&i||!r&&s&&i||i&&s&&r)throw new Error("invalid encoding flag: "+(t[0]&224));const a=(c,u,l)=>st(c.slice(u,l));if(o.length===96&&r){if(s){if(o.reduce((b,y)=>b!==0?y+1:y,0)>0)throw new Error("invalid G2 point: compressed");return{x:F.ZERO,y:F.ZERO}}const c=a(o,0,e),u=a(o,e,2*e),l=F.create({c0:D.create(u),c1:D.create(c)}),d=F.add(F.pow(l,bs),Ci.b);let f=F.sqrt(d);const h=f.c1===xe?f.c0*ke/n:f.c1*ke/n?ts:xe;return f=i&&h>0?f:F.neg(f),{x:l,y:f}}else if(o.length===192&&!r){if(s){if(o.reduce((f,h)=>f!==0?h+1:h,0)>0)throw new Error("invalid G2 point: uncompressed");return{x:F.ZERO,y:F.ZERO}}const c=a(o,0*e,1*e),u=a(o,1*e,2*e),l=a(o,2*e,3*e),d=a(o,3*e,4*e);return{x:F.fromBigTuple([u,c]),y:F.fromBigTuple([d,l])}}else throw new Error("invalid G2 point: expected 96/192 bytes")}function lo(t){const{ORDER:e}=D,{infinity:n,sort:r,value:s}=ps(Ie("signatureHex",t)),i=ms.G2.Point,o=s.length/2;if(o!==48&&o!==96)throw new Error("invalid compressed signature length, expected 96/192 bytes");const a=st(s.slice(0,o)),c=st(s.slice(o));if(n)return i.ZERO;const u=D.create(a&en(D.BITS)),l=D.create(c),d=F.create({c0:l,c1:u}),f=F.add(F.pow(d,bs),Ci.b);let h=F.sqrt(f);if(!h)throw new Error("Failed to find a square root");const{re:b,im:y}=F.reim(h),g=BigInt(r),p=y>xe&&y*ke/e!==g,w=y===xe&&b*ke/e!==g;(p||w)&&(h=F.neg(h));const m=i.fromAffine({x:d,y:h});return m.assertValidity(),m}const ms=du({fields:{Fp:D,Fp2:F,Fp6:wu,Fp12:Z,Fr:gu},G1:{...Wt,Fp:D,htfDefaults:{...Rs,m:1,DST:"BLS_SIG_BLS12381G1_XMD:SHA-256_SSWU_RO_NUL_"},wrapPrivateKey:!0,allowInfinityPoint:!0,isTorsionFree:(t,e)=>{const n=BigInt("0x5f19672fdf76ce51ba69c6076a0f77eaddb3a93be6f89688de17d813620a00022e01fffffffefffe"),r=new t(D.mul(e.X,n),e.Y,e.Z);return e.multiplyUnsafe(Bt).negate().multiplyUnsafe(Bt).equals(r)},clearCofactor:(t,e)=>e.multiplyUnsafe(Bt).add(e),mapToCurve:Cu,fromBytes:Eu,toBytes:_u,ShortSignature:{fromBytes(t){return De(t),uo(t)},fromHex(t){return uo(t)},toBytes(t){return Us(t)},toRawBytes(t){return Us(t)},toHex(t){return ee(Us(t))}}},G2:{...Ci,Fp:F,hEff:BigInt("0xbc69f08f2ee75b3584c6a0ea91b352888e2a8e9145ad7689986ff031508ffe1329c2f178731db956d82bf015d1212b02ec0ec69d7477c1ae954cbc06689f6a359894c0adebbf6b4e8020005aaa95551"),htfDefaults:{...Rs},wrapPrivateKey:!0,allowInfinityPoint:!0,mapToCurve:Ou,isTorsionFree:(t,e)=>e.multiplyUnsafe(Bt).negate().equals(fo(t,e)),clearCofactor:(t,e)=>{const n=Bt;let r=e.multiplyUnsafe(n).negate(),s=fo(t,e),i=e.double();return i=xu(t,i),i=i.subtract(s),s=r.add(s),s=s.multiplyUnsafe(n).negate(),i=i.add(s),i=i.subtract(r),i.subtract(e)},fromBytes:Iu,toBytes:vu,Signature:{fromBytes(t){return De(t),lo(t)},fromHex(t){return lo(t)},toBytes(t){return qs(t)},toRawBytes(t){return qs(t)},toHex(t){return ee(qs(t))}}},params:{ateLoopSize:Bt,r:Wt.n,xNegative:!0,twistType:"multiplicative"},htfDefaults:Rs}),Bu=Ka(F,[[["0x5c759507e8e333ebb5b7a9a47d7ed8532c52d39fd3a042a88b58423c50ae15d5c2638e343d9c71c6238aaaaaaaa97d6","0x5c759507e8e333ebb5b7a9a47d7ed8532c52d39fd3a042a88b58423c50ae15d5c2638e343d9c71c6238aaaaaaaa97d6"],["0x0","0x11560bf17baa99bc32126fced787c88f984f87adf7ae0c7f9a208c6b4f20a4181472aaa9cb8d555526a9ffffffffc71a"],["0x11560bf17baa99bc32126fced787c88f984f87adf7ae0c7f9a208c6b4f20a4181472aaa9cb8d555526a9ffffffffc71e","0x8ab05f8bdd54cde190937e76bc3e447cc27c3d6fbd7063fcd104635a790520c0a395554e5c6aaaa9354ffffffffe38d"],["0x171d6541fa38ccfaed6dea691f5fb614cb14b4e7f4e810aa22d6108f142b85757098e38d0f671c7188e2aaaaaaaa5ed1","0x0"]],[["0x0","0x1a0111ea397fe69a4b1ba7b6434bacd764774b84f38512bf6730d2a0f6b0f6241eabfffeb153ffffb9feffffffffaa63"],["0xc","0x1a0111ea397fe69a4b1ba7b6434bacd764774b84f38512bf6730d2a0f6b0f6241eabfffeb153ffffb9feffffffffaa9f"],["0x1","0x0"]],[["0x1530477c7ab4113b59a4c18b076d11930f7da5d4a07f649bf54439d87d27e500fc8c25ebf8c92f6812cfc71c71c6d706","0x1530477c7ab4113b59a4c18b076d11930f7da5d4a07f649bf54439d87d27e500fc8c25ebf8c92f6812cfc71c71c6d706"],["0x0","0x5c759507e8e333ebb5b7a9a47d7ed8532c52d39fd3a042a88b58423c50ae15d5c2638e343d9c71c6238aaaaaaaa97be"],["0x11560bf17baa99bc32126fced787c88f984f87adf7ae0c7f9a208c6b4f20a4181472aaa9cb8d555526a9ffffffffc71c","0x8ab05f8bdd54cde190937e76bc3e447cc27c3d6fbd7063fcd104635a790520c0a395554e5c6aaaa9354ffffffffe38f"],["0x124c9ad43b6cf79bfbf7043de3811ad0761b0f37a1e26286b0e977c69aa274524e79097a56dc4bd9e1b371c71c718b10","0x0"]],[["0x1a0111ea397fe69a4b1ba7b6434bacd764774b84f38512bf6730d2a0f6b0f6241eabfffeb153ffffb9feffffffffa8fb","0x1a0111ea397fe69a4b1ba7b6434bacd764774b84f38512bf6730d2a0f6b0f6241eabfffeb153ffffb9feffffffffa8fb"],["0x0","0x1a0111ea397fe69a4b1ba7b6434bacd764774b84f38512bf6730d2a0f6b0f6241eabfffeb153ffffb9feffffffffa9d3"],["0x12","0x1a0111ea397fe69a4b1ba7b6434bacd764774b84f38512bf6730d2a0f6b0f6241eabfffeb153ffffb9feffffffffaa99"],["0x1","0x0"]]].map(t=>t.map(e=>F.fromBigTuple(e.map(BigInt))))),Tu=Ka(D,[["0x11a05f2b1e833340b809101dd99815856b303e88a2d7005ff2627b56cdb4e2c85610c2d5f2e62d6eaeac1662734649b7","0x17294ed3e943ab2f0588bab22147a81c7c17e75b2f6a8417f565e33c70d1e86b4838f2a6f318c356e834eef1b3cb83bb","0xd54005db97678ec1d1048c5d10a9a1bce032473295983e56878e501ec68e25c958c3e3d2a09729fe0179f9dac9edcb0","0x1778e7166fcc6db74e0609d307e55412d7f5e4656a8dbf25f1b33289f1b330835336e25ce3107193c5b388641d9b6861","0xe99726a3199f4436642b4b3e4118e5499db995a1257fb3f086eeb65982fac18985a286f301e77c451154ce9ac8895d9","0x1630c3250d7313ff01d1201bf7a74ab5db3cb17dd952799b9ed3ab9097e68f90a0870d2dcae73d19cd13c1c66f652983","0xd6ed6553fe44d296a3726c38ae652bfb11586264f0f8ce19008e218f9c86b2a8da25128c1052ecaddd7f225a139ed84","0x17b81e7701abdbe2e8743884d1117e53356de5ab275b4db1a682c62ef0f2753339b7c8f8c8f475af9ccb5618e3f0c88e","0x80d3cf1f9a78fc47b90b33563be990dc43b756ce79f5574a2c596c928c5d1de4fa295f296b74e956d71986a8497e317","0x169b1f8e1bcfa7c42e0c37515d138f22dd2ecb803a0c5c99676314baf4bb1b7fa3190b2edc0327797f241067be390c9e","0x10321da079ce07e272d8ec09d2565b0dfa7dccdde6787f96d50af36003b14866f69b771f8c285decca67df3f1605fb7b","0x6e08c248e260e70bd1e962381edee3d31d79d7e22c837bc23c0bf1bc24c6b68c24b1b80b64d391fa9c8ba2e8ba2d229"],["0x8ca8d548cff19ae18b2e62f4bd3fa6f01d5ef4ba35b48ba9c9588617fc8ac62b558d681be343df8993cf9fa40d21b1c","0x12561a5deb559c4348b4711298e536367041e8ca0cf0800c0126c2588c48bf5713daa8846cb026e9e5c8276ec82b3bff","0xb2962fe57a3225e8137e629bff2991f6f89416f5a718cd1fca64e00b11aceacd6a3d0967c94fedcfcc239ba5cb83e19","0x3425581a58ae2fec83aafef7c40eb545b08243f16b1655154cca8abc28d6fd04976d5243eecf5c4130de8938dc62cd8","0x13a8e162022914a80a6f1d5f43e7a07dffdfc759a12062bb8d6b44e833b306da9bd29ba81f35781d539d395b3532a21e","0xe7355f8e4e667b955390f7f0506c6e9395735e9ce9cad4d0a43bcef24b8982f7400d24bc4228f11c02df9a29f6304a5","0x772caacf16936190f3e0c63e0596721570f5799af53a1894e2e073062aede9cea73b3538f0de06cec2574496ee84a3a","0x14a7ac2a9d64a8b230b3f5b074cf01996e7f63c21bca68a81996e1cdf9822c580fa5b9489d11e2d311f7d99bbdcc5a5e","0xa10ecf6ada54f825e920b3dafc7a3cce07f8d1d7161366b74100da67f39883503826692abba43704776ec3a79a1d641","0x95fc13ab9e92ad4476d6e3eb3a56680f682b4ee96f7d03776df533978f31c1593174e4b4b7865002d6384d168ecdd0a","0x000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001"],["0x90d97c81ba24ee0259d1f094980dcfa11ad138e48a869522b52af6c956543d3cd0c7aee9b3ba3c2be9845719707bb33","0x134996a104ee5811d51036d776fb46831223e96c254f383d0f906343eb67ad34d6c56711962fa8bfe097e75a2e41c696","0xcc786baa966e66f4a384c86a3b49942552e2d658a31ce2c344be4b91400da7d26d521628b00523b8dfe240c72de1f6","0x1f86376e8981c217898751ad8746757d42aa7b90eeb791c09e4a3ec03251cf9de405aba9ec61deca6355c77b0e5f4cb","0x8cc03fdefe0ff135caf4fe2a21529c4195536fbe3ce50b879833fd221351adc2ee7f8dc099040a841b6daecf2e8fedb","0x16603fca40634b6a2211e11db8f0a6a074a7d0d4afadb7bd76505c3d3ad5544e203f6326c95a807299b23ab13633a5f0","0x4ab0b9bcfac1bbcb2c977d027796b3ce75bb8ca2be184cb5231413c4d634f3747a87ac2460f415ec961f8855fe9d6f2","0x987c8d5333ab86fde9926bd2ca6c674170a05bfe3bdd81ffd038da6c26c842642f64550fedfe935a15e4ca31870fb29","0x9fc4018bd96684be88c9e221e4da1bb8f3abd16679dc26c1e8b6e6a1f20cabe69d65201c78607a360370e577bdba587","0xe1bba7a1186bdb5223abde7ada14a23c42a0ca7915af6fe06985e7ed1e4d43b9b3f7055dd4eba6f2bafaaebca731c30","0x19713e47937cd1be0dfd0b8f1d43fb93cd2fcbcb6caf493fd1183e416389e61031bf3a5cce3fbafce813711ad011c132","0x18b46a908f36f6deb918c143fed2edcc523559b8aaf0c2462e6bfe7f911f643249d9cdf41b44d606ce07c8a4d0074d8e","0xb182cac101b9399d155096004f53f447aa7b12a3426b08ec02710e807b4633f06c851c1919211f20d4c04f00b971ef8","0x245a394ad1eca9b72fc00ae7be315dc757b3b080d4c158013e6632d3c40659cc6cf90ad1c232a6442d9d3f5db980133","0x5c129645e44cf1102a159f748c4a3fc5e673d81d7e86568d9ab0f5d396a7ce46ba1049b6579afb7866b1e715475224b","0x15e6be4e990f03ce4ea50b3b42df2eb5cb181d8f84965a3957add4fa95af01b2b665027efec01c7704b456be69c8b604"],["0x16112c4c3a9c98b252181140fad0eae9601a6de578980be6eec3232b5be72e7a07f3688ef60c206d01479253b03663c1","0x1962d75c2381201e1a0cbd6c43c348b885c84ff731c4d59ca4a10356f453e01f78a4260763529e3532f6102c2e49a03d","0x58df3306640da276faaae7d6e8eb15778c4855551ae7f310c35a5dd279cd2eca6757cd636f96f891e2538b53dbf67f2","0x16b7d288798e5395f20d23bf89edb4d1d115c5dbddbcd30e123da489e726af41727364f2c28297ada8d26d98445f5416","0xbe0e079545f43e4b00cc912f8228ddcc6d19c9f0f69bbb0542eda0fc9dec916a20b15dc0fd2ededda39142311a5001d","0x8d9e5297186db2d9fb266eaac783182b70152c65550d881c5ecd87b6f0f5a6449f38db9dfa9cce202c6477faaf9b7ac","0x166007c08a99db2fc3ba8734ace9824b5eecfdfa8d0cf8ef5dd365bc400a0051d5fa9c01a58b1fb93d1a1399126a775c","0x16a3ef08be3ea7ea03bcddfabba6ff6ee5a4375efa1f4fd7feb34fd206357132b920f5b00801dee460ee415a15812ed9","0x1866c8ed336c61231a1be54fd1d74cc4f9fb0ce4c6af5920abc5750c4bf39b4852cfe2f7bb9248836b233d9d55535d4a","0x167a55cda70a6e1cea820597d94a84903216f763e13d87bb5308592e7ea7d4fbc7385ea3d529b35e346ef48bb8913f55","0x4d2f259eea405bd48f010a01ad2911d9c6dd039bb61a6290e591b36e636a5c871a5c29f4f83060400f8b49cba8f6aa8","0xaccbb67481d033ff5852c1e48c50c477f94ff8aefce42d28c0f9a88cea7913516f968986f7ebbea9684b529e2561092","0xad6b9514c767fe3c3613144b45f1496543346d98adf02267d5ceef9a00d9b8693000763e3b90ac11e99b138573345cc","0x2660400eb2e4f3b628bdd0d53cd76f2bf565b94e72927c1cb748df27942480e420517bd8714cc80d1fadc1326ed06f7","0xe0fa1d816ddc03e6b24255e0d7819c171c40f65e273b853324efcd6356caa205ca2f570f13497804415473a1d634b8f","0x000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001"]].map(t=>t.map(e=>BigInt(e)))),Su=Ya(D,{A:D.create(BigInt("0x144698a3b8e9433d693a02c96d4982b0ea985383ee66a8d8e8981aefd881ac98936f8da0e0f97f5cf428082d584c1d")),B:D.create(BigInt("0x12e2908d11688030018b12e8753eee3b2016c1f0f24f4070a0b9c14fcef35ef55a23215a316ceaa5d1cc48e98e172be0")),Z:D.create(BigInt(11))}),Au=Ya(F,{A:F.create({c0:D.create(xe),c1:D.create(BigInt(240))}),B:F.create({c0:D.create(BigInt(1012)),c1:D.create(BigInt(1012))}),Z:F.create({c0:D.create(BigInt(-2)),c1:D.create(BigInt(-1))})});function Cu(t){const{x:e,y:n}=Su(D.create(t[0]));return Tu(e,n)}function Ou(t){const{x:e,y:n}=Au(F.fromBigTuple(t));return Bu(e,n)}function Nu(t,e,n){const r=typeof t=="string"?t:ee(t),s=typeof e=="string"?e:ee(e),i=typeof n=="string"?n:ee(n);return ms.verifyShortSignature(s,i,r)}const Ru=BigInt(1e6),Xa=t=>he(new Dn(t)),Oi=t=>{const n=Xa(t)/Ru;return new Date(Number(n))},ho=60*1e3,Uu=60,qu=24,$u=qu*Uu,Mu=5,Du=5,Pu=30*$u;var me;(function(t){t[t.Empty=0]="Empty",t[t.Fork=1]="Fork",t[t.Labeled=2]="Labeled",t[t.Leaf=3]="Leaf",t[t.Pruned=4]="Pruned"})(me||(me={}));function ku(t,e){for(let n=0;n<t.length;n++)if(t[n]>e[n])return!0;return!1}var In,et;const Zn=class Zn{constructor(e,n,r,s,i=Mu,o=!1,a){H(this,In,!1);H(this,et);this._rootKey=n,this._canisterId=r,this._blsVerify=s,this._maxAgeInMinutes=i,P(this,In,o),this.cert=rt(e),a&&"getTimeDiffMsecs"in a&&"hasSyncedTime"in a&&"syncTime"in a&&P(this,et,a)}static async create(e){const n=Zn.createUnverified(e);return await n.verify(),n}static createUnverified(e){return new Zn(e.certificate,e.rootKey,e.canisterId,e.blsVerify??Nu,e.maxAgeInMinutes,e.disableTimeVerification,e.agent)}lookup_path(e){return Ir(e,this.cert.tree)}lookup_subtree(e){return Ni(e,this.cert.tree)}async verify(){var a,c;const e=await Pr(this.cert.tree),n=await this._checkDelegationAndGetKey(this.cert.delegation),r=this.cert.signature,s=Vu(n),i=X(Fn("ic-state-root"),e),o=Oe(this.lookup_path(["time"]));if(!o)throw se.fromCode(new gn("Certificate does not contain a time"));if(!E(this,In)){const u=((a=E(this,et))==null?void 0:a.getTimeDiffMsecs())??0,l=this._maxAgeInMinutes*ho,d=new Date,f=d.getTime()+u,h=f-l,b=f+Du*ho,y=Oi(o),g=y.getTime()<h,p=y.getTime()>b;if((g||p)&&E(this,et)&&!E(this,et).hasSyncedTime())return await E(this,et).syncTime(this._canisterId),await this.verify();if(g)throw qe.fromCode(new Yn(this._maxAgeInMinutes,y,d,u,"past"));if(p)throw(c=E(this,et))!=null&&c.hasSyncedTime()?Te.fromCode(new Ke("System time has been synced with the IC network, but certificate is still too far in the future.")):qe.fromCode(new Yn(5,y,d,u,"future"))}try{if(!await this._blsVerify(s,r,i))throw qe.fromCode(new gn("Invalid signature"))}catch(u){throw qe.fromCode(new gn("Signature verification failed",u))}}async _checkDelegationAndGetKey(e){if(!e)return this._rootKey;const n=Zn.createUnverified({certificate:e.certificate,rootKey:this._rootKey,canisterId:this._canisterId,blsVerify:this._blsVerify,disableTimeVerification:E(this,In),maxAgeInMinutes:Pu,agent:E(this,et)});if(n.cert.delegation)throw se.fromCode(new ei);await n.verify();const r=e.subnet_id,s=z.fromUint8Array(r);if(!Wa({canisterId:this._canisterId,subnetId:s,tree:n.cert.tree}))throw qe.fromCode(new ss(this._canisterId,s));const o=Oe(n.lookup_path(["subnet",r,"public_key"]));if(!o)throw qe.fromCode(new ti(`Could not find subnet key for subnet ID ${s.toText()}`));return o}};In=new WeakMap,et=new WeakMap;let ar=Zn;const jn=wr("308182301d060d2b0601040182dc7c0503010201060c2b0601040182dc7c05030201036100"),Lu=96;function Vu(t){const e=jn.byteLength+Lu;if(t.byteLength!==e)throw se.fromCode(new os(e,t.byteLength));const n=t.slice(0,jn.byteLength);if(!ls(n,jn))throw se.fromCode(new ni(jn,n));return t.slice(jn.byteLength)}function Oe(t){if(t.status===$e.Found&&t.value instanceof Uint8Array)return t.value}async function Pr(t){switch(t[0]){case me.Empty:return Me(Fn("ic-hashtree-empty"));case me.Pruned:return t[1];case me.Leaf:return Me(X(Fn("ic-hashtree-leaf"),t[1]));case me.Labeled:return Me(X(Fn("ic-hashtree-labeled"),t[1],await Pr(t[2])));case me.Fork:return Me(X(Fn("ic-hashtree-fork"),await Pr(t[1]),await Pr(t[2])));default:throw wn}}function Fn(t){const e=new Uint8Array([t.length]),n=new TextEncoder().encode(t);return X(e,n)}function za(t){return typeof t[0]=="string"?re(t[0]):t[0]}var $e;(function(t){t.Unknown="Unknown",t.Absent="Absent",t.Found="Found",t.Error="Error"})($e||($e={}));var vn;(function(t){t.Absent="Absent",t.Unknown="Unknown",t.Found="Found"})(vn||(vn={}));var te;(function(t){t.Absent="Absent",t.Unknown="Unknown",t.Found="Found",t.Less="Less",t.Greater="Greater"})(te||(te={}));function Ir(t,e){if(t.length===0)switch(e[0]){case me.Empty:return{status:$e.Absent};case me.Leaf:{if(!e[1])throw Te.fromCode(new xr("Invalid tree structure for leaf"));if(e[1]instanceof Uint8Array)return{status:$e.Found,value:e[1].slice(e[1].byteOffset,e[1].byteLength+e[1].byteOffset)};throw wn}case me.Pruned:return{status:$e.Unknown};case me.Labeled:case me.Fork:return{status:$e.Error};default:throw wn}const n=za(t),r=Hn(n,e);switch(r.status){case te.Found:return Ir(t.slice(1),r.value);case te.Absent:case te.Greater:case te.Less:return{status:$e.Absent};case te.Unknown:return{status:$e.Unknown};default:throw wn}}function Ni(t,e){if(t.length===0)return{status:vn.Found,value:e};const n=za(t),r=Hn(n,e);switch(r.status){case te.Found:return Ni(t.slice(1),r.value);case te.Unknown:return{status:vn.Unknown};case te.Absent:case te.Greater:case te.Less:return{status:vn.Absent};default:throw wn}}function Ks(t){switch(t[0]){case me.Empty:return[];case me.Fork:return Ks(t[1]).concat(Ks(t[2]));default:return[t]}}function Hn(t,e){switch(e[0]){case me.Labeled:return ku(t,e[1])?{status:te.Greater}:ls(t,e[1])?{status:te.Found,value:e[2]}:{status:te.Less};case me.Fork:{const n=Hn(t,e[1]);switch(n.status){case te.Greater:{const r=Hn(t,e[2]);return r.status===te.Less?{status:te.Absent}:r}case te.Unknown:{const r=Hn(t,e[2]);return r.status===te.Less?{status:te.Unknown}:r}default:return n}}case me.Pruned:return{status:te.Unknown};default:return{status:te.Absent}}}function Wa(t){const{canisterId:e,subnetId:n,tree:r}=t,s=Ir(["subnet",n.toUint8Array(),"canister_ranges"],r);if(s.status!==$e.Found)throw se.fromCode(new Rn(`Could not find canister ranges for subnet ${n.toText()}`,s.status));if(!(s.value instanceof Uint8Array))throw se.fromCode(new is(`Could not find canister ranges for subnet ${n.toText()}`));return rt(s.value).map(c=>[z.fromUint8Array(c[0]),z.fromUint8Array(c[1])]).some(c=>c[0].ltEq(e)&&c[1].gtEq(e))}const bo=async t=>{const{agent:e,paths:n,disableCertificateTimeVerification:r=!1}=t,s=z.from(t.canisterId),i=[...new Set(n)],o=new Map,a=i.map((c,u)=>{const l=Fu(c,s);return(async()=>{try{if(e.rootKey===null)throw Be.fromCode(new Mn);const d=e.rootKey,f=await e.readState(s,{paths:[l]}),h=await ar.create({certificate:f.certificate,rootKey:d,canisterId:s,disableTimeVerification:r,agent:e}),b=(p,w)=>{if(w==="subnet"){const m=ju(f.certificate,s,d);return{path:w,data:m}}else return{path:w,data:Oe(p.lookup_path(l))}},{path:y,data:g}=b(h,i[u]);if(!g)console.warn(`Expected to find result for path ${y}, but instead found nothing.`),typeof y=="string"?o.set(y,null):o.set(y.key,null);else switch(y){case"time":{o.set(y,Oi(g));break}case"controllers":{o.set(y,Gu(g));break}case"module_hash":{o.set(y,ee(g));break}case"subnet":{o.set(y,g);break}case"candid":{o.set(y,new TextDecoder().decode(g));break}default:if(typeof y!="string"&&"key"in y&&"path"in y)switch(y.decodeStrategy){case"raw":o.set(y.key,g);break;case"leb128":{o.set(y.key,Xa(g));break}case"cbor":{o.set(y.key,rt(g));break}case"hex":{o.set(y.key,ee(g));break}case"utf-8":o.set(y.key,new TextDecoder().decode(g))}}}catch(d){if(d instanceof dt&&(d.hasCode(gn)||d.hasCode(Yn)))throw d;typeof c!="string"&&"key"in c&&"path"in c?o.set(c.key,null):o.set(c,null),console.group(),console.warn(`Expected to find result for path ${c}, but instead found nothing.`),console.warn(d),console.groupEnd()}})()});return await Promise.all(a),o},ju=(t,e,n)=>{if(!e._isPrincipal)throw J.fromCode(new Ke("Invalid canisterId"));const r=rt(t),s=r.tree;let i=r.delegation,o;if(i&&i.subnet_id?o=z.fromUint8Array(new Uint8Array(i.subnet_id)):!i&&typeof n<"u"?(o=z.selfAuthenticating(new Uint8Array(n)),i={subnet_id:o.toUint8Array(),certificate:new Uint8Array(0)}):(o=z.selfAuthenticating(z.fromText("tdb26-jop6k-aogll-7ltgs-eruif-6kk7m-qpktf-gdiqx-mxtrf-vb5e6-eqe").toUint8Array()),i={subnet_id:o.toUint8Array(),certificate:new Uint8Array(0)}),!Wa({canisterId:e,subnetId:o,tree:s}))throw qe.fromCode(new ss(e,o));const c=Ni(["subnet",i.subnet_id,"node"],s);if(c.status!==vn.Found)throw se.fromCode(new Rn("Node not found",c.status));if(c.value instanceof Uint8Array)throw Te.fromCode(new xr("Invalid node tree"));const u=Ks(c.value),l=new Map;return u.forEach(d=>{const f=z.from(d[1]).toText(),h=Ir(["public_key"],d[2]);if(h.status!==$e.Found)throw se.fromCode(new Rn("Public key not found",h.status));const b=h.value;if(b.byteLength!==44)throw se.fromCode(new os(44,b.byteLength));l.set(f,b)}),{subnetId:z.fromUint8Array(new Uint8Array(i.subnet_id)).toText(),nodeKeys:l}},Fu=(t,e)=>{const n=e.toUint8Array();switch(t){case"time":return[re("time")];case"controllers":return[re("canister"),n,re("controllers")];case"module_hash":return[re("canister"),n,re("module_hash")];case"subnet":return[re("subnet")];case"candid":return[re("canister"),n,re("metadata"),re("candid:service")];default:if("key"in t&&"path"in t)if(typeof t.path=="string"||t.path instanceof Uint8Array){const r=t.path,s=typeof r=="string"?re(r):r;return[re("canister"),n,re("metadata"),s]}else return t.path}throw Te.fromCode(new Ke(`Error while encoding your path for canister status. Please ensure that your path ${t} was formatted correctly.`))},Gu=t=>rt(t).map(n=>z.fromUint8Array(n));/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Et=BigInt(0),le=BigInt(1),$s=BigInt(2),Hu=BigInt(8);function Zu(t,e,n,r){const s=t.sqr(n),i=t.sqr(r),o=t.add(t.mul(e.a,s),i),a=t.add(t.ONE,t.mul(e.d,t.mul(s,i)));return t.eql(o,a)}function Ku(t,e={}){const n=Ha("edwards",t,e,e.FpFnLE),{Fp:r,Fn:s}=n;let i=n.CURVE;const{h:o}=i;Er(e,{},{uvRatio:"function"});const a=$s<<BigInt(s.BYTES*8)-le,c=g=>r.create(g),u=e.uvRatio||((g,p)=>{try{return{isValid:!0,value:r.sqrt(r.div(g,p))}}catch{return{isValid:!1,value:Et}}});if(!Zu(r,i,i.Gx,i.Gy))throw new Error("bad curve params: generator point");function l(g,p,w=!1){const m=w?le:Et;return zi("coordinate "+g,p,m,a),p}function d(g){if(!(g instanceof b))throw new Error("ExtendedPoint expected")}const f=sr((g,p)=>{const{X:w,Y:m,Z:v}=g,B=g.is0();p==null&&(p=B?Hu:r.inv(v));const S=c(w*p),A=c(m*p),U=r.mul(v,p);if(B)return{x:Et,y:le};if(U!==le)throw new Error("invZ was invalid");return{x:S,y:A}}),h=sr(g=>{const{a:p,d:w}=i;if(g.is0())throw new Error("bad point: ZERO");const{X:m,Y:v,Z:B,T:S}=g,A=c(m*m),U=c(v*v),x=c(B*B),T=c(x*x),q=c(A*p),C=c(x*c(q+U)),_=c(T+c(w*c(A*U)));if(C!==_)throw new Error("bad point: equation left != right (1)");const I=c(m*v),N=c(B*S);if(I!==N)throw new Error("bad point: equation left != right (2)");return!0});class b{constructor(p,w,m,v){this.X=l("x",p),this.Y=l("y",w),this.Z=l("z",m,!0),this.T=l("t",v),Object.freeze(this)}static CURVE(){return i}static fromAffine(p){if(p instanceof b)throw new Error("extended point not allowed");const{x:w,y:m}=p||{};return l("x",w),l("y",m),new b(w,m,le,c(w*m))}static fromBytes(p,w=!1){const m=r.BYTES,{a:v,d:B}=i;p=Xi(En(p,m,"point")),tr(w,"zip215");const S=Xi(p),A=p[m-1];S[m-1]=A&-129;const U=nr(S),x=w?a:r.ORDER;zi("point.y",U,Et,x);const T=c(U*U),q=c(T-le),C=c(B*T-v);let{isValid:_,value:I}=u(q,C);if(!_)throw new Error("bad point: invalid y coordinate");const N=(I&le)===le,M=(A&128)!==0;if(!w&&I===Et&&M)throw new Error("bad point: x=0 and x_0=1");return M!==N&&(I=c(-I)),b.fromAffine({x:I,y:U})}static fromHex(p,w=!1){return b.fromBytes(Ie("point",p),w)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}precompute(p=8,w=!0){return y.createCache(this,p),w||this.multiply($s),this}assertValidity(){h(this)}equals(p){d(p);const{X:w,Y:m,Z:v}=this,{X:B,Y:S,Z:A}=p,U=c(w*A),x=c(B*v),T=c(m*A),q=c(S*v);return U===x&&T===q}is0(){return this.equals(b.ZERO)}negate(){return new b(c(-this.X),this.Y,this.Z,c(-this.T))}double(){const{a:p}=i,{X:w,Y:m,Z:v}=this,B=c(w*w),S=c(m*m),A=c($s*c(v*v)),U=c(p*B),x=w+m,T=c(c(x*x)-B-S),q=U+S,C=q-A,_=U-S,I=c(T*C),N=c(q*_),M=c(T*_),j=c(C*q);return new b(I,N,j,M)}add(p){d(p);const{a:w,d:m}=i,{X:v,Y:B,Z:S,T:A}=this,{X:U,Y:x,Z:T,T:q}=p,C=c(v*U),_=c(B*x),I=c(A*m*q),N=c(S*T),M=c((v+B)*(U+x)-C-_),j=N-I,O=N+I,R=c(_-w*C),$=c(M*j),k=c(O*R),L=c(M*R),be=c(j*O);return new b($,k,be,L)}subtract(p){return this.add(p.negate())}multiply(p){if(!s.isValidNot0(p))throw new Error("invalid scalar: expected 1 <= sc < curve.n");const{p:w,f:m}=y.cached(this,p,v=>lt(b,v));return lt(b,[w,m])[0]}multiplyUnsafe(p,w=b.ZERO){if(!s.isValid(p))throw new Error("invalid scalar: expected 0 <= sc < curve.n");return p===Et?b.ZERO:this.is0()||p===le?this:y.unsafe(this,p,m=>lt(b,m),w)}isSmallOrder(){return this.multiplyUnsafe(o).is0()}isTorsionFree(){return y.unsafe(this,i.n).is0()}toAffine(p){return f(this,p)}clearCofactor(){return o===le?this:this.multiplyUnsafe(o)}toBytes(){const{x:p,y:w}=this.toAffine(),m=r.toBytes(w);return m[m.length-1]|=p&le?128:0,m}toHex(){return ee(this.toBytes())}toString(){return`<Point ${this.is0()?"ZERO":this.toHex()}>`}get ex(){return this.X}get ey(){return this.Y}get ez(){return this.Z}get et(){return this.T}static normalizeZ(p){return lt(b,p)}static msm(p,w){return Ga(b,s,p,w)}_setWindowSize(p){this.precompute(p)}toRawBytes(){return this.toBytes()}}b.BASE=new b(i.Gx,i.Gy,le,c(i.Gx*i.Gy)),b.ZERO=new b(Et,le,le,Et),b.Fp=r,b.Fn=s;const y=new Fa(b,s.BITS);return b.BASE.precompute(8),b}function Yu(t,e,n={}){if(typeof e!="function")throw new Error('"hash" function param is required');Er(n,{},{adjustScalarBytes:"function",randomBytes:"function",domain:"function",prehash:"function",mapToCurve:"function"});const{prehash:r}=n,{BASE:s,Fp:i,Fn:o}=t,a=n.randomBytes||No,c=n.adjustScalarBytes||(x=>x),u=n.domain||((x,T,q)=>{if(tr(q,"phflag"),T.length||q)throw new Error("Contexts/pre-hash are not supported");return x});function l(x){return o.create(nr(x))}function d(x){const T=m.secretKey;x=Ie("private key",x,T);const q=Ie("hashed private key",e(x),2*T),C=c(q.slice(0,T)),_=q.slice(T,2*T),I=l(C);return{head:C,prefix:_,scalar:I}}function f(x){const{head:T,prefix:q,scalar:C}=d(x),_=s.multiply(C),I=_.toBytes();return{head:T,prefix:q,scalar:C,point:_,pointBytes:I}}function h(x){return f(x).pointBytes}function b(x=Uint8Array.of(),...T){const q=X(...T);return l(e(u(q,Ie("context",x),!!r)))}function y(x,T,q={}){x=Ie("message",x),r&&(x=r(x));const{prefix:C,scalar:_,pointBytes:I}=f(T),N=b(q.context,C,x),M=s.multiply(N).toBytes(),j=b(q.context,M,I,x),O=o.create(N+j*_);if(!o.isValid(O))throw new Error("sign failed: invalid s");const R=X(M,o.toBytes(O));return En(R,m.signature,"result")}const g={zip215:!0};function p(x,T,q,C=g){const{context:_,zip215:I}=C,N=m.signature;x=Ie("signature",x,N),T=Ie("message",T),q=Ie("publicKey",q,m.publicKey),I!==void 0&&tr(I,"zip215"),r&&(T=r(T));const M=N/2,j=x.subarray(0,M),O=nr(x.subarray(M,N));let R,$,k;try{R=t.fromBytes(q,I),$=t.fromBytes(j,I),k=s.multiplyUnsafe(O)}catch{return!1}if(!I&&R.isSmallOrder())return!1;const L=b(_,$.toBytes(),R.toBytes(),T);return $.add(R.multiplyUnsafe(L)).subtract(k).clearCofactor().is0()}const w=i.BYTES,m={secretKey:w,publicKey:w,signature:2*w,seed:w};function v(x=a(m.seed)){return En(x,m.seed,"seed")}function B(x){const T=U.randomSecretKey(x);return{secretKey:T,publicKey:h(T)}}function S(x){return gr(x)&&x.length===o.BYTES}function A(x,T){try{return!!t.fromBytes(x,T)}catch{return!1}}const U={getExtendedPublicKey:f,randomSecretKey:v,isValidSecretKey:S,isValidPublicKey:A,toMontgomery(x){const{y:T}=t.fromBytes(x),q=m.publicKey,C=q===32;if(!C&&q!==57)throw new Error("only defined for 25519 and 448");const _=C?i.div(le+T,le-T):i.div(T-le,T+le);return i.toBytes(_)},toMontgomerySecret(x){const T=m.secretKey;En(x,T);const q=e(x.subarray(0,T));return c(q).subarray(0,T)},randomPrivateKey:v,precompute(x=8,T=t.BASE){return T.precompute(x,!1)}};return Object.freeze({keygen:B,getPublicKey:h,sign:y,verify:p,utils:U,Point:t,lengths:m})}function Xu(t){const e={a:t.a,d:t.d,p:t.Fp.ORDER,n:t.n,h:t.h,Gx:t.Gx,Gy:t.Gy},n=t.Fp,r=Dt(e.n,t.nBitLength,!0),s={Fp:n,Fn:r,uvRatio:t.uvRatio},i={randomBytes:t.randomBytes,adjustScalarBytes:t.adjustScalarBytes,domain:t.domain,prehash:t.prehash,mapToCurve:t.mapToCurve};return{CURVE:e,curveOpts:s,hash:t.hash,eddsaOpts:i}}function zu(t,e){const n=e.Point;return Object.assign({},e,{ExtendedPoint:n,CURVE:t,nBitLength:n.Fn.BITS,nByteLength:n.Fn.BYTES})}function Wu(t){const{CURVE:e,curveOpts:n,hash:r,eddsaOpts:s}=Xu(t),i=Ku(e,n),o=Yu(i,r,s);return zu(t,o)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Qu=BigInt(1),yo=BigInt(2);BigInt(3);const Ju=BigInt(5),ed=BigInt(8),Ri=BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffed"),Qa={p:Ri,n:BigInt("0x1000000000000000000000000000000014def9dea2f79cd65812631a5cf5d3ed"),h:ed,a:BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffec"),d:BigInt("0x52036cee2b6ffe738cc740797779e89800700a4d4141d8ab75eb4dca135978a3"),Gx:BigInt("0x216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a"),Gy:BigInt("0x6666666666666666666666666666666666666666666666666666666666666658")};function td(t){const e=BigInt(10),n=BigInt(20),r=BigInt(40),s=BigInt(80),i=Ri,a=t*t%i*t%i,c=Je(a,yo,i)*a%i,u=Je(c,Qu,i)*t%i,l=Je(u,Ju,i)*u%i,d=Je(l,e,i)*l%i,f=Je(d,n,i)*d%i,h=Je(f,r,i)*f%i,b=Je(h,s,i)*h%i,y=Je(b,s,i)*h%i,g=Je(y,e,i)*l%i;return{pow_p_5_8:Je(g,yo,i)*t%i,b2:a}}function nd(t){return t[0]&=248,t[31]&=127,t[31]|=64,t}const po=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752");function rd(t,e){const n=Ri,r=ie(e*e*e,n),s=ie(r*r*e,n),i=td(t*s).pow_p_5_8;let o=ie(t*r*i,n);const a=ie(e*o*o,n),c=o,u=ie(o*po,n),l=a===t,d=a===ie(-t,n),f=a===ie(-t*po,n);return l&&(o=c),(d||f)&&(o=u),jf(o,n)&&(o=ie(-o,n)),{isValid:l||d,value:o}}const sd=Dt(Qa.p,{isLE:!0}),id={...Qa,Fp:sd,hash:Fc,adjustScalarBytes:nd,uvRatio:rd},od=Wu(id);var mo,go,ye,Bn;class ad{constructor(e={}){H(this,ye);H(this,Bn);this[mo]=this.entries.bind(this),this[go]="ExpirableMap";const{source:n=[],expirationTime:r=10*60*1e3}=e,s=Date.now();P(this,ye,new Map([...n].map(([i,o])=>[i,{value:o,timestamp:s}]))),P(this,Bn,r)}prune(){const e=Date.now();for(const[n,r]of E(this,ye).entries())e-r.timestamp>E(this,Bn)&&E(this,ye).delete(n);return this}set(e,n){this.prune();const r={value:n,timestamp:Date.now()};return E(this,ye).set(e,r),this}get(e){const n=E(this,ye).get(e);if(n!==void 0){if(Date.now()-n.timestamp>E(this,Bn)){E(this,ye).delete(e);return}return n.value}}clear(){E(this,ye).clear()}entries(){const e=E(this,ye).entries();return function*(){for(const[r,s]of e)yield[r,s.value]}()}values(){const e=E(this,ye).values();return function*(){for(const r of e)yield r.value}()}keys(){return E(this,ye).keys()}forEach(e,n){for(const[r,s]of E(this,ye).entries())e.call(n,s.value,r,this)}has(e){return E(this,ye).has(e)}delete(e){return E(this,ye).delete(e)}get size(){return E(this,ye).size}}ye=new WeakMap,Bn=new WeakMap,mo=Symbol.iterator,go=Symbol.toStringTag;const wo=t=>{if(t<=127)return 1;if(t<=255)return 2;if(t<=65535)return 3;if(t<=16777215)return 4;throw J.fromCode(new as("Length too long (> 4 bytes)"))},xo=(t,e,n)=>{if(n<=127)return t[e]=n,1;if(n<=255)return t[e]=129,t[e+1]=n,2;if(n<=65535)return t[e]=130,t[e+1]=n>>8,t[e+2]=n,3;if(n<=16777215)return t[e]=131,t[e+1]=n>>16,t[e+2]=n>>8,t[e+3]=n,4;throw J.fromCode(new as("Length too long (> 4 bytes)"))},Ys=(t,e)=>{if(t[e]<128)return 1;if(t[e]===128)throw J.fromCode(new yt("Invalid length 0"));if(t[e]===129)return 2;if(t[e]===130)return 3;if(t[e]===131)return 4;throw J.fromCode(new yt("Length too long (> 4 bytes)"))},cd=(t,e)=>{const n=Ys(t,e);if(n===1)return t[e];if(n===2)return t[e+1];if(n===3)return(t[e+1]<<8)+t[e+2];if(n===4)return(t[e+1]<<16)+(t[e+2]<<8)+t[e+3];throw J.fromCode(new yt("Length too long (> 4 bytes)"))};Uint8Array.from([48,12,6,10,43,6,1,4,1,131,184,67,1,1]);const _o=Uint8Array.from([48,5,6,3,43,101,112]);Uint8Array.from([48,16,6,7,42,134,72,206,61,2,1,6,5,43,129,4,0,10]);Uint8Array.from([48,29,6,13,43,6,1,4,1,130,220,124,5,3,1,2,1,6,12,43,6,1,4,1,130,220,124,5,3,2,1]);function fd(t,e){const n=2+wo(t.byteLength+1),r=e.byteLength+n+t.byteLength;let s=0;const i=new Uint8Array(1+wo(r)+r);return i[s++]=48,s+=xo(i,s,r),i.set(e,s),s+=e.byteLength,i[s++]=3,s+=xo(i,s,t.byteLength+1),i[s++]=0,i.set(new Uint8Array(t),s),i}const ud=(t,e)=>{let n=0;const r=(a,c)=>{if(s[n++]!==a)throw J.fromCode(new yt(`Expected ${c} at offset ${n}`))},s=new Uint8Array(t);if(r(48,"sequence"),n+=Ys(s,n),!ls(s.slice(n,n+e.byteLength),e))throw J.fromCode(new yt("Not the expected OID."));n+=e.byteLength,r(3,"bit string");const i=cd(s,n)-1;n+=Ys(s,n),r(0,"0 padding");const o=s.slice(n);if(i!==o.length)throw J.fromCode(new ri(i,o.length));return o};var fr,ur;const kt=class kt{constructor(e){H(this,fr);H(this,ur);if(e.byteLength!==kt.RAW_KEY_LENGTH)throw J.fromCode(new yt("An Ed25519 public key must be exactly 32 bytes long"));P(this,fr,e),P(this,ur,kt.derEncode(e))}static from(e){return this.fromDer(e.toDer())}static fromRaw(e){return new kt(e)}static fromDer(e){return new kt(this.derDecode(e))}static derEncode(e){return fd(e,_o)}static derDecode(e){const n=ud(e,_o);if(n.length!==this.RAW_KEY_LENGTH)throw J.fromCode(new yt("An Ed25519 public key must be exactly 32 bytes long"));return n}get rawKey(){return E(this,fr)}get derKey(){return E(this,ur)}toDer(){return this.derKey}toRaw(){return this.rawKey}};fr=new WeakMap,ur=new WeakMap,kt.RAW_KEY_LENGTH=32;let Xs=kt;class dd{constructor(){this.observers=[]}subscribe(e){this.observers.push(e)}unsubscribe(e){this.observers=this.observers.filter(n=>n!==e)}notify(e,...n){this.observers.forEach(r=>r(e,...n))}}class ld extends dd{constructor(){super()}print(e,...n){this.notify({message:e,level:"info"},...n)}warn(e,...n){this.notify({message:e,level:"warn"},...n)}error(e,n,...r){this.notify({message:e,level:"error",error:n},...r)}}const Eo=.5,vo=1.5,Io=500,Bo=6e4,To=9e5,So=10;var Ge,dr,lr,hr,br,yr,pr,mr,Tn;const rs=class rs{constructor(e=rs.default){H(this,Ge);H(this,dr);H(this,lr);H(this,hr);H(this,br);H(this,yr);H(this,pr);H(this,mr);H(this,Tn,0);const{initialInterval:n=Io,randomizationFactor:r=Eo,multiplier:s=vo,maxInterval:i=Bo,maxElapsedTime:o=To,maxIterations:a=So,date:c=Date}=e;P(this,Ge,n),P(this,dr,r),P(this,lr,s),P(this,hr,i),P(this,mr,c),P(this,br,c.now()),P(this,yr,o),P(this,pr,a)}get ellapsedTimeInMsec(){return E(this,mr).now()-E(this,br)}get currentInterval(){return E(this,Ge)}get count(){return E(this,Tn)}get randomValueFromInterval(){const e=E(this,dr)*E(this,Ge),n=E(this,Ge)-e,r=E(this,Ge)+e;return Math.random()*(r-n)+n}incrementCurrentInterval(){return P(this,Ge,Math.min(E(this,Ge)*E(this,lr),E(this,hr))),$i(this,Tn)._++,E(this,Ge)}next(){return this.ellapsedTimeInMsec>=E(this,yr)||E(this,Tn)>=E(this,pr)?null:(this.incrementCurrentInterval(),this.randomValueFromInterval)}};Ge=new WeakMap,dr=new WeakMap,lr=new WeakMap,hr=new WeakMap,br=new WeakMap,yr=new WeakMap,pr=new WeakMap,mr=new WeakMap,Tn=new WeakMap,rs.default={initialInterval:Io,randomizationFactor:Eo,multiplier:vo,maxInterval:Bo,maxElapsedTime:To,maxIterations:So,date:Date};let zs=rs;var ft;(function(t){t.Received="received",t.Processing="processing",t.Replied="replied",t.Rejected="rejected",t.Unknown="unknown",t.Done="done"})(ft||(ft={}));const Ws=60*1e3,hd=1e6,bd=0,yd="308182301d060d2b0601040182dc7c0503010201060c2b0601040182dc7c05030201036100814c0e6ec71fab583b08bd81373c255c3c371b2e84863c98a4f1e08b74235d14fb5d9c0cd546d9685f913a0c0b2cc5341583bf4b4392e467db96d65b9bb4cb717112f8472e0d5a4d14505ffd7484b01291091c5f87b98883463f98091a0baaae",pd="ic0.app",md=".ic0.app",gd="icp0.io",wd=".icp0.io",xd="icp-api.io",_d=".icp-api.io",Ms=200,Ed=202,vd=404;function Id(){let t;if(typeof window<"u")if(window.fetch)t=window.fetch.bind(window);else throw Be.fromCode(new Gn("Fetch implementation was not available. You appear to be in a browser context, but window.fetch was not present."));else if(typeof global<"u")if(global.fetch)t=global.fetch.bind(global);else throw Be.fromCode(new Gn("Fetch implementation was not available. You appear to be in a Node.js context, but global.fetch was not available."));else typeof self<"u"&&self.fetch&&(t=self.fetch.bind(self));if(t)return t;throw Be.fromCode(new Gn("Fetch implementation was not available. Please provide fetch to the HttpAgent constructor, or ensure it is available in the window or global context."))}function Bd(t){let e;if(t!==void 0)!t.match(/^[a-z]+:/)&&typeof window<"u"?e=new URL(window.location.protocol+"//"+t):e=new URL(t);else{const n=["ic0.app","icp0.io","127.0.0.1","localhost"],r=[".github.dev",".gitpod.io"],s=typeof window<"u"?window.location:void 0,i=s==null?void 0:s.hostname;let o;i&&typeof i=="string"&&(r.some(a=>i.endsWith(a))?o=i:o=n.find(a=>i.endsWith(a))),s&&o?e=new URL(`${s.protocol}//${o}${s.port?":"+s.port:""}`):e=new URL("https://icp-api.io")}return e.toString()}var Tt,St,He,Gt,At,Sn,Ne,tt,Ht,An,Re,ut,Ct,nt,Q,Ja,Ot,Nt,Rt,Ut,kr,dn,Cn,ln,Lr,ec;const pn=class pn{constructor(e={}){H(this,Q);H(this,Tt);H(this,St);H(this,He);H(this,Gt);H(this,At);H(this,Sn);H(this,Ne);H(this,tt);H(this,Ht);H(this,An);H(this,Re);H(this,ut);H(this,Ct);H(this,nt);H(this,Ot);H(this,Nt);H(this,Rt);H(this,Ut);H(this,Cn);P(this,Tt,null),P(this,St,!1),P(this,He,bd),P(this,Gt,!1),P(this,At,null),P(this,Sn,!1),this._isAgent=!0,this.config={},this.log=new ld,P(this,Ot,[]),P(this,Nt,[]),P(this,Rt,new ad({expirationTime:5*Ws})),P(this,Ut,!0),P(this,Cn,(s,i)=>{if(E(this,Ut)===!1)return s;const{status:o,signatures:a=[],requestId:c}=s;for(const u of a){const{timestamp:l,identity:d}=u,f=z.fromUint8Array(d).toText();let h;if(o===On.Replied){const{reply:w}=s;h=zr({status:o,reply:w,timestamp:BigInt(l),request_id:c})}else if(o===On.Rejected){const{reject_code:w,reject_message:m,error_code:v}=s;h=zr({status:o,reject_code:w,reject_message:m,error_code:v,timestamp:BigInt(l),request_id:c})}else throw Te.fromCode(new Ke(`Unknown status: ${o}`));const b=X(nf,h),y=i.nodeKeys.get(f);if(!y)throw se.fromCode(new bi);const g=Xs.fromDer(y).rawKey;if(od.verify(u.signature,b,g))return s;throw qe.fromCode(new yi(f))}return s}),this.config=e,P(this,tt,e.fetch||Id()||fetch.bind(global)),P(this,Ht,e.fetchOptions),P(this,An,e.callOptions),P(this,St,e.shouldFetchRootKey??!1),P(this,Sn,e.shouldSyncTime??!1),e.rootKey?this.rootKey=e.rootKey:E(this,St)?this.rootKey=null:this.rootKey=wr(yd);const n=Bd(e.host);this.host=new URL(n),e.verifyQuerySignatures!==void 0&&P(this,Ut,e.verifyQuerySignatures),P(this,ut,e.retryTimes??3);const r=()=>new zs({maxIterations:E(this,ut)});if(P(this,Ct,e.backoffStrategy||r),this.host.hostname.endsWith(md)?this.host.hostname=pd:this.host.hostname.endsWith(wd)?this.host.hostname=gd:this.host.hostname.endsWith(_d)&&(this.host.hostname=xd),e.credentials){const{name:s,password:i}=e.credentials;P(this,Re,`${s}${i?":"+i:""}`)}if(P(this,Ne,Promise.resolve(e.identity||new Zi)),e.ingressExpiryInMinutes&&e.ingressExpiryInMinutes>5)throw J.fromCode(new hn("The maximum ingress expiry time is 5 minutes.",e.ingressExpiryInMinutes));if(e.ingressExpiryInMinutes&&e.ingressExpiryInMinutes<=0)throw J.fromCode(new hn("Ingress expiry time must be greater than 0.",e.ingressExpiryInMinutes));P(this,nt,e.ingressExpiryInMinutes||5),this.addTransform("update",Yi(Hs)),e.useQueryNonces&&this.addTransform("query",Yi(Hs)),e.logToConsole&&this.log.subscribe(s=>{s.level==="error"?console.error(s.message):s.level==="warn"?console.warn(s.message):console.log(s.message)})}static createSync(e={}){return new this({...e})}static async create(e={}){var r;const n=pn.createSync(e);return await de(r=n,Q,ln).call(r),n}static async from(e){try{return"config"in e?await pn.create(e.config):await pn.create({fetch:e._fetch,fetchOptions:e._fetchOptions,callOptions:e._callOptions,host:e._host.toString(),identity:e._identity??void 0})}catch{throw J.fromCode(new di)}}isLocal(){const e=this.host.hostname;return e==="127.0.0.1"||e.endsWith("127.0.0.1")}addTransform(e,n,r=n.priority||0){if(e==="update"){const s=E(this,Nt).findIndex(i=>(i.priority||0)<r);E(this,Nt).splice(s>=0?s:E(this,Nt).length,0,Object.assign(n,{priority:r}))}else if(e==="query"){const s=E(this,Ot).findIndex(i=>(i.priority||0)<r);E(this,Ot).splice(s>=0?s:E(this,Ot).length,0,Object.assign(n,{priority:r}))}}async getPrincipal(){if(!E(this,Ne))throw Be.fromCode(new Pt);return(await E(this,Ne)).getPrincipal()}async call(e,n,r){const s=n.callSync??!0,i=await(r??E(this,Ne));if(!i)throw Be.fromCode(new Pt);const o=z.from(e),a=n.effectiveCanisterId?z.from(n.effectiveCanisterId):o;await de(this,Q,ln).call(this,a);const c=i.getPrincipal(),u=Ds(E(this,nt),E(this,He)),l={request_type:Gs.Call,canister_id:o,method_name:n.methodName,arg:n.arg,sender:c,ingress_expiry:u};let d=await this._transform({request:{body:null,method:"POST",headers:{"Content-Type":"application/cbor",...E(this,Re)?{Authorization:"Basic "+btoa(E(this,Re))}:{}}},endpoint:Lt.Call,body:l}),f;n!=null&&n.nonce?f=h(n.nonce):d.body.nonce?f=h(d.body.nonce):f=void 0,l.nonce=f;function h(p){return Object.assign(p,{__nonce__:void 0})}d=await i.transformRequest(d);const b=Is(d.body),y=E(this,Ct).call(this),g=Es(l);try{const m=s?()=>(this.log.print(`fetching "/api/v3/canister/${a.toText()}/call" with request:`,d),E(this,tt).call(this,""+new URL(`/api/v3/canister/${a.toText()}/call`,this.host),{...E(this,An),...d.request,body:b})):()=>(this.log.print(`fetching "/api/v2/canister/${a.toText()}/call" with request:`,d),E(this,tt).call(this,""+new URL(`/api/v2/canister/${a.toText()}/call`,this.host),{...E(this,An),...d.request,body:b})),{responseBodyBytes:v,...B}=await de(this,Q,dn).call(this,{requestFn:m,backoff:y,tries:0}),S=v.byteLength>0?rt(v):null;return{requestId:g,response:{...B,body:S},requestDetails:l}}catch(p){let w;if(p instanceof dt){if(p.hasCode(Gr))return this.log.warn("v3 api not supported. Fall back to v2"),this.call(e,{...n,callSync:!1},r);if(p.hasCode(hn)&&!E(this,Gt))return await this.syncTime(o),this.call(o,n,r);p.code.requestContext={requestId:g,senderPubKey:d.body.sender_pubkey,senderSignature:d.body.sender_sig,ingressExpiry:d.body.content.ingress_expiry},w=p}else w=Te.fromCode(new Ke(p));throw this.log.error(`Error while making call: ${w.message}`,w),w}}async query(e,n,r){const s=E(this,Ct).call(this),i=n.effectiveCanisterId?z.from(n.effectiveCanisterId):z.from(e);await de(this,Q,ln).call(this,i),this.log.print(`ecid ${i.toString()}`),this.log.print(`canisterId ${e.toString()}`);let o;const a=await(r??E(this,Ne));if(!a)throw Be.fromCode(new Pt);const c=z.from(e),u=a.getPrincipal(),l=Ds(E(this,nt),E(this,He)),d={request_type:er.Query,canister_id:c,method_name:n.methodName,arg:n.arg,sender:u,ingress_expiry:l},f=Es(d);o=await this._transform({request:{method:"POST",headers:{"Content-Type":"application/cbor",...E(this,Re)?{Authorization:"Basic "+btoa(E(this,Re))}:{}}},endpoint:Lt.Query,body:d}),o=await a.transformRequest(o);const h=Is(o.body),b={canister:c.toText(),ecid:i,transformedRequest:o,body:h,requestId:f,backoff:s,tries:0},y=async()=>{const p=await de(this,Q,kr).call(this,b);return{requestDetails:d,...p}},g=async()=>{const p=E(this,Rt).get(i.toString());if(p)return p;await this.fetchSubnetKeys(i.toString());const w=E(this,Rt).get(i.toString());if(!w)throw qe.fromCode(new hi);return w};try{if(!E(this,Ut))return await y();const[p,w]=await Promise.all([y(),g()]);try{return E(this,Cn).call(this,p,w)}catch{this.log.warn("Query response verification failed. Retrying with fresh subnet keys."),E(this,Rt).delete(i.toString());const m=await g();return E(this,Cn).call(this,p,m)}}catch(p){let w;throw p instanceof dt?(p.code.requestContext={requestId:f,senderPubKey:o.body.sender_pubkey,senderSignature:o.body.sender_sig,ingressExpiry:o.body.content.ingress_expiry},w=p):w=Te.fromCode(new Ke(p)),this.log.error(`Error while making query: ${w.message}`,w),w}}async createReadStateRequest(e,n){await de(this,Q,ln).call(this);const r=await(n??E(this,Ne));if(!r)throw Be.fromCode(new Pt);const s=r.getPrincipal(),i=await this._transform({request:{method:"POST",headers:{"Content-Type":"application/cbor",...E(this,Re)?{Authorization:"Basic "+btoa(E(this,Re))}:{}}},endpoint:Lt.ReadState,body:{request_type:er.ReadState,paths:e.paths,sender:s,ingress_expiry:Ds(E(this,nt),E(this,He))}});return r.transformRequest(i)}async readState(e,n,r,s){await de(this,Q,Lr).call(this);const i=z.from(e);function o(l){for(const d of l.paths){const[f,h]=d,b=new TextEncoder().encode("request_status");if(ls(f,b))return h}}let a,c;if(s)a=s,c=Es(a);else{c=o(n);const l=await E(this,Ne);if(!l)throw Be.fromCode(new Pt);a=await this.createReadStateRequest(n,l)}this.log.print(`fetching "/api/v2/canister/${i}/read_state" with request:`,a);const u=E(this,Ct).call(this);try{const{responseBodyBytes:l}=await de(this,Q,dn).call(this,{requestFn:()=>E(this,tt).call(this,""+new URL(`/api/v2/canister/${i.toString()}/read_state`,this.host),{...E(this,Ht),...a.request,body:Is(a.body)}),backoff:u,tries:0}),d=rt(l);return this.log.print("Read state response:",d),d}catch(l){let d;throw l instanceof dt?(l.code.requestContext={requestId:c,senderPubKey:a.body.sender_pubkey,senderSignature:a.body.sender_sig,ingressExpiry:a.body.content.ingress_expiry},d=l):d=Te.fromCode(new Ke(l)),this.log.error(`Error while making read state: ${d.message}`,d),d}}parseTimeFromResponse(e){let n;if(e.certificate){const r=rt(e.certificate);if(r&&"tree"in r)n=r.tree;else throw se.fromCode(new xr("Could not decode time from response"));const s=Ir(["time"],n);if(s.status!==$e.Found)throw se.fromCode(new Rn("Time was not found in the response or was not in its expected format.",s.status));if(!(s.value instanceof Uint8Array)&&!ArrayBuffer.isView(s))throw se.fromCode(new is("Time was not in its expected format."));const i=Oi(s.value);return this.log.print("Time from response:",i),this.log.print("Time from response in milliseconds:",i.getTime()),i.getTime()}else this.log.warn("No certificate found in response");return 0}async syncTime(e){P(this,At,E(this,At)??(async()=>{await de(this,Q,Lr).call(this);const n=Date.now();try{e||this.log.print("Syncing time with the IC. No canisterId provided, so falling back to ryjl3-tyaaa-aaaaa-aaaba-cai");const r=e??z.from("ryjl3-tyaaa-aaaaa-aaaba-cai"),s=pn.createSync({identity:new Zi,host:this.host.toString(),fetch:E(this,tt),retryTimes:0,rootKey:this.rootKey??void 0,shouldSyncTime:!1}),o=(await Promise.all(Array(3).fill(null).map(async()=>{const c=(await bo({canisterId:r,agent:s,paths:["time"],disableCertificateTimeVerification:!0})).get("time");if(c instanceof Date)return c.getTime()},[]))).reduce((a,c)=>typeof c=="number"&&c>a?c:a,0);o>0&&(P(this,He,o-n),P(this,Gt,!0),this.log.notify({message:`Syncing time: offset of ${E(this,He)}`,level:"info"}))}catch(r){const s=r instanceof dt?r:Te.fromCode(new Ke(r));throw this.log.error("Caught exception while attempting to sync time",s),s}})()),await E(this,At).finally(()=>{P(this,At,null)})}async status(){const e=E(this,Re)?{Authorization:"Basic "+btoa(E(this,Re))}:{};this.log.print('fetching "/api/v2/status"');const n=E(this,Ct).call(this),{responseBodyBytes:r}=await de(this,Q,dn).call(this,{backoff:n,requestFn:()=>E(this,tt).call(this,""+new URL("/api/v2/status",this.host),{headers:e,...E(this,Ht)}),tries:0});return rt(r)}async fetchRootKey(){return P(this,Tt,E(this,Tt)??(async()=>{const e=await this.status();return this.rootKey=e.root_key,this.rootKey})()),await E(this,Tt).finally(()=>{P(this,Tt,null)})}invalidateIdentity(){P(this,Ne,null)}replaceIdentity(e){P(this,Ne,Promise.resolve(e))}async fetchSubnetKeys(e){const n=z.from(e);await de(this,Q,ln).call(this,n);const s=(await bo({canisterId:n,paths:["subnet"],agent:this})).get("subnet");if(s&&typeof s=="object"&&"nodeKeys"in s)return E(this,Rt).set(n.toText(),s),s}_transform(e){let n=Promise.resolve(e);if(e.endpoint===Lt.Call)for(const r of E(this,Nt))n=n.then(s=>r(s).then(i=>i||s));else for(const r of E(this,Ot))n=n.then(s=>r(s).then(i=>i||s));return n}getTimeDiffMsecs(){return E(this,He)}hasSyncedTime(){return E(this,Gt)}};Tt=new WeakMap,St=new WeakMap,He=new WeakMap,Gt=new WeakMap,At=new WeakMap,Sn=new WeakMap,Ne=new WeakMap,tt=new WeakMap,Ht=new WeakMap,An=new WeakMap,Re=new WeakMap,ut=new WeakMap,Ct=new WeakMap,nt=new WeakMap,Q=new WeakSet,Ja=function(){return E(this,nt)*Ws},Ot=new WeakMap,Nt=new WeakMap,Rt=new WeakMap,Ut=new WeakMap,kr=async function(e){var h,b;const{ecid:n,transformedRequest:r,body:s,requestId:i,backoff:o,tries:a}=e,c=a===0?0:o.next();if(this.log.print(`fetching "/api/v2/canister/${n.toString()}/query" with tries:`,{tries:a,backoff:o,delay:c}),c===null)throw Te.fromCode(new Xn(`Backoff strategy exhausted after ${a} attempts.`,i));c>0&&await new Promise(y=>setTimeout(y,c));let u;try{this.log.print(`fetching "/api/v2/canister/${n.toString()}/query" with request:`,r);const y=await E(this,tt).call(this,""+new URL(`/api/v2/canister/${n.toString()}/query`,this.host),{...E(this,Ht),...r.request,body:s});if(y.status===Ms)u={...rt(Xr(await y.arrayBuffer())),httpDetails:{ok:y.ok,status:y.status,statusText:y.statusText,headers:Bs(y.headers)},requestId:i};else throw se.fromCode(new Fr(y.status,y.statusText,Bs(y.headers),await y.text()))}catch(y){if(a<E(this,ut))return this.log.warn(`Caught exception while attempting to make query:
  ${y}
  Retrying query.`),await de(this,Q,kr).call(this,{...e,tries:a+1});throw y instanceof dt?y:jr.fromCode(new Hr(y))}if(!E(this,Ut))return u;const l=(b=(h=u.signatures)==null?void 0:h[0])==null?void 0:b.timestamp;if(!l)throw se.fromCode(new li("Timestamp not found in query response. This suggests a malformed or malicious response."));const d=Number(BigInt(l)/BigInt(hd));if(Date.now()+E(this,He)-d>E(this,Q,Ja)){if(a<E(this,ut))return this.log.warn("Timestamp is older than the max ingress expiry. Retrying query.",{requestId:i,signatureTimestampMs:d}),await de(this,Q,kr).call(this,{...e,tries:a+1});throw qe.fromCode(new oi(E(this,nt),i,a))}return u},dn=async function(e){const{requestFn:n,backoff:r,tries:s}=e,i=s===0?0:r.next();if(i===null)throw se.fromCode(new Xn(`Retry strategy exhausted after ${s} attempts.`));i>0&&await new Promise(l=>setTimeout(l,i));let o,a=new Uint8Array;try{o=await n(),o.status===Ms&&(a=Xr(await o.clone().arrayBuffer()))}catch(l){if(s<E(this,ut))return this.log.warn(`Caught exception while attempting to make request:
  ${l}
  Retrying request.`),await de(this,Q,dn).call(this,{requestFn:n,backoff:r,tries:s+1});throw jr.fromCode(new Hr(l))}const c=Bs(o.headers);if(o.status===Ms||o.status===Ed)return{ok:o.ok,status:o.status,statusText:o.statusText,responseBodyBytes:a,headers:c};const u=await o.text();if(o.status===vd&&o.url.includes("api/v3"))throw se.fromCode(new Gr);if(u.startsWith("Invalid request expiry: "))throw J.fromCode(new hn(u,E(this,nt)));if(s<E(this,ut))return await de(this,Q,dn).call(this,{requestFn:n,backoff:r,tries:s+1});throw se.fromCode(new Fr(o.status,o.statusText,c,u))},Cn=new WeakMap,ln=async function(e){await Promise.all([de(this,Q,Lr).call(this),de(this,Q,ec).call(this,e)])},Lr=async function(){if(!this.rootKey)if(this.rootKey===null&&this.host.toString()!=="https://icp-api.io"&&E(this,St))await this.fetchRootKey();else throw Be.fromCode(new Mn(E(this,St)))},ec=async function(e){E(this,Sn)&&!this.hasSyncedTime()&&await this.syncTime(e)};let cr=pn;function Ds(t,e){const n=t*Ws;return _n.fromDeltaInMilliseconds(n,e)}const Td=5*60*1e3;function Sd(){return Rd(Cd(Ad(),1e3),Nd(1e3,1.2),Od(Td))}function Ad(){let t=!0;return async()=>t?(t=!1,!0):!1}function Cd(t,e){return async(n,r,s)=>{if(await t(n,r,s))return new Promise(i=>setTimeout(i,e))}}function Od(t){const e=Date.now()+t;return async(n,r,s)=>{if(Date.now()>e)throw se.fromCode(new Xn(`Request timed out after ${t} msec`,r,s))}}function Nd(t,e){let n=t;return()=>new Promise(r=>setTimeout(()=>{n*=e,r()},n))}function Rd(...t){return async(e,n,r)=>{for(const s of t)await s(e,n,r)}}const Ud={preSignReadStateRequest:!1};function tc(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function Ps(t,e){return t!==null&&typeof t=="object"&&tc(t,e)}function qd(t,e){return tc(t,e)&&typeof t[e]=="function"}function Ao(t){return Ps(t,"body")&&Ps(t.body,"content")&&t.body.content.request_type===er.ReadState&&Ps(t.body.content,"ingress_expiry")&&typeof t.body.content.ingress_expiry=="object"&&t.body.content.ingress_expiry!==null&&qd(t.body.content.ingress_expiry,"toHash")}async function nc(t,e,n,r={}){const s=[re("request_status"),n];let i,o;if(r.preSignReadStateRequest??!1?(o=await $d({paths:[s],agent:t,pollingOptions:r}),i=await t.readState(e,{paths:[s]},void 0,o)):i=await t.readState(e,{paths:[s]}),t.rootKey==null)throw Be.fromCode(new Mn);const c=await ar.create({certificate:i.certificate,rootKey:t.rootKey,canisterId:e,blsVerify:r.blsVerify,agent:t}),u=Oe(c.lookup_path([...s,re("status")]));let l;switch(typeof u>"u"?l=ft.Unknown:l=new TextDecoder().decode(u),l){case ft.Replied:return{reply:Oe(c.lookup_path([...s,"reply"])),certificate:c};case ft.Received:case ft.Unknown:case ft.Processing:{const d=r.strategy??Sd();return await d(e,n,l),nc(t,e,n,{...r,strategy:d,request:o})}case ft.Rejected:{const d=new Uint8Array(Oe(c.lookup_path([...s,"reject_code"])))[0],f=new TextDecoder().decode(Oe(c.lookup_path([...s,"reject_message"]))),h=Oe(c.lookup_path([...s,"error_code"])),b=h?new TextDecoder().decode(h):void 0;throw mn.fromCode(new cs(n,d,f,b))}case ft.Done:throw Te.fromCode(new fi(n))}throw wn}async function $d(t){var i;const{paths:e,agent:n,pollingOptions:r}=t;if(r.request&&Ao(r.request))return r.request;const s=await((i=n.createReadStateRequest)==null?void 0:i.call(n,{paths:e},void 0));if(!Ao(s))throw J.fromCode(new pi(s));return s}const Ue=Symbol.for("ic-agent-metadata");class Ui{static agentOf(e){return e[Ue].config.agent}static interfaceOf(e){return e[Ue].service}static canisterIdOf(e){return z.from(e[Ue].config.canisterId)}static createActorClass(e,n){const r=e({IDL:tf});class s extends Ui{constructor(o){if(!o.canisterId)throw J.fromCode(new Zr(o.canisterId));const a=typeof o.canisterId=="string"?z.fromText(o.canisterId):o.canisterId;super({config:{...rc,...o,canisterId:a},service:r});for(const[c,u]of r._fields)n!=null&&n.httpDetails&&u.annotations.push(Qs),n!=null&&n.certificate&&u.annotations.push(sc),this[c]=Md(this,c,u,o.blsVerify)}}return s}static createActor(e,n){if(!n.canisterId)throw J.fromCode(new Zr(n.canisterId));return new(this.createActorClass(e))(n)}static createActorWithHttpDetails(e,n){return new(this.createActorClass(e,{httpDetails:!0}))(n)}static createActorWithExtendedDetails(e,n,r={httpDetails:!0,certificate:!0}){return new(this.createActorClass(e,r))(n)}constructor(e){this[Ue]=Object.freeze(e)}}function fn(t,e){const n=Go(t,e);switch(n.length){case 0:return;case 1:return n[0];default:return n}}const rc={pollingOptions:Ud},Qs="http-details",sc="certificate";function Md(t,e,n,r){let s;n.annotations.includes("query")||n.annotations.includes("composite_query")?s=async(o,...a)=>{var h,b;o={...o,...(b=(h=t[Ue].config).queryTransform)==null?void 0:b.call(h,e,a,{...t[Ue].config,...o})};const c=o.agent||t[Ue].config.agent||new cr,u=z.from(o.canisterId||t[Ue].config.canisterId),l=Ls(n.argTypes,a),d=await c.query(u,{methodName:e,arg:l,effectiveCanisterId:o.effectiveCanisterId}),f={...d.httpDetails,requestDetails:d.requestDetails};switch(d.status){case On.Rejected:{const y=new ai(d.requestId,d.reject_code,d.reject_message,d.error_code,d.signatures);throw y.callContext={canisterId:u,methodName:e,httpDetails:f},mn.fromCode(y)}case On.Replied:return n.annotations.includes(Qs)?{httpDetails:f,result:fn(n.retTypes,d.reply.arg)}:fn(n.retTypes,d.reply.arg)}}:s=async(o,...a)=>{var A,U;o={...o,...(U=(A=t[Ue].config).callTransform)==null?void 0:U.call(A,e,a,{...t[Ue].config,...o})};const c=o.agent||t[Ue].config.agent||cr.createSync(),{canisterId:u,effectiveCanisterId:l,pollingOptions:d}={...rc,...t[Ue].config,...o},f=z.from(u),h=l!==void 0?z.from(l):f,b=Ls(n.argTypes,a),{requestId:y,response:g,requestDetails:p}=await c.call(f,{methodName:e,arg:b,effectiveCanisterId:h,nonce:o.nonce});let w,m;if(mc(g.body)){if(c.rootKey==null)throw Be.fromCode(new Mn);const x=g.body.certificate;m=await ar.create({certificate:x,rootKey:c.rootKey,canisterId:h,blsVerify:r,agent:c});const T=[re("request_status"),y];switch(new TextDecoder().decode(Oe(m.lookup_path([...T,"status"])))){case"replied":w=Oe(m.lookup_path([...T,"reply"]));break;case"rejected":{const C=new Uint8Array(Oe(m.lookup_path([...T,"reject_code"])))[0],_=new TextDecoder().decode(Oe(m.lookup_path([...T,"reject_message"]))),I=Oe(m.lookup_path([...T,"error_code"])),N=I?new TextDecoder().decode(I):void 0,M=new cs(y,C,_,N);throw M.callContext={canisterId:f,methodName:e,httpDetails:g},mn.fromCode(M)}}}else if(pc(g.body)){const{reject_code:x,reject_message:T,error_code:q}=g.body,C=new ci(y,x,T,q);throw C.callContext={canisterId:f,methodName:e,httpDetails:g},mn.fromCode(C)}if(g.status===202){const x={...d,blsVerify:r},T=await nc(c,h,y,x);m=T.certificate,w=T.reply}const v=n.annotations.includes(Qs),B=n.annotations.includes(sc),S={...g,requestDetails:p};if(w!==void 0)return v&&B?{httpDetails:S,certificate:m,result:fn(n.retTypes,w)}:B?{certificate:m,result:fn(n.retTypes,w)}:v?{httpDetails:S,result:fn(n.retTypes,w)}:fn(n.retTypes,w);{const x=new Ke(`Call was returned undefined. We cannot determine if the call was successful or not. Return types: [${n.retTypes.map(T=>T.display()).join(",")}].`);throw x.callContext={canisterId:f,methodName:e,httpDetails:S},Te.fromCode(x)}};const i=(...o)=>s({},...o);return i.withOptions=o=>(...a)=>s(o,...a),i}const Dd=({IDL:t})=>t.Service({greet:t.Func([t.Text],[t.Text],["query"])}),Pd="u6s2n-gx777-77774-qaaba-cai",kd=(t,e={})=>{const n=e.agent||new cr({...e.agentOptions});return e.agent&&e.agentOptions&&console.warn("Detected both agent and agentOptions passed to createActor. Ignoring agentOptions and proceeding with the provided agent."),n.fetchRootKey().catch(r=>{console.warn("Unable to fetch root key. Check to ensure that your local replica is running"),console.error(r)}),Ui.createActor(Dd,{agent:n,canisterId:t,...e.actorOptions})},Ld=kd(Pd);function Vd(t){let e,n,r,s,i,o,a,c,u,l='<label for="name">Enter your name: </label> <input id="name" alt="Name" type="text"/> <button type="submit">Click Me!</button>',d,f,h,b,y;return{c(){e=sn("main"),n=sn("img"),s=Sr(),i=sn("br"),o=Sr(),a=sn("br"),c=Sr(),u=sn("form"),u.innerHTML=l,d=Sr(),f=sn("section"),h=yc(t[0]),this.h()},l(g){e=rn(g,"MAIN",{});var p=Di(e);n=rn(p,"IMG",{src:!0,alt:!0}),s=Tr(p),i=rn(p,"BR",{}),o=Tr(p),a=rn(p,"BR",{}),c=Tr(p),u=rn(p,"FORM",{action:!0,"data-svelte-h":!0}),hc(u)!=="svelte-hhx21s"&&(u.innerHTML=l),d=Tr(p),f=rn(p,"SECTION",{id:!0});var w=Di(f);h=bc(w,t[0]),w.forEach(ws),p.forEach(ws),this.h()},h(){lc(n.src,r="/logo2.svg")||Br(n,"src",r),Br(n,"alt","DFINITY logo"),Br(u,"action","#"),Br(f,"id","greeting")},m(g,p){fc(g,e,p),We(e,n),We(e,s),We(e,i),We(e,o),We(e,a),We(e,c),We(e,u),We(e,d),We(e,f),We(f,h),b||(y=uc(u,"submit",dc(t[1])),b=!0)},p(g,[p]){p&1&&cc(h,g[0])},i:Mi,o:Mi,d(g){g&&ws(e),b=!1,y()}}}function jd(t,e,n){let r="";function s(i){const o=i.target.name.value;return Ld.greet(o).then(a=>{n(0,r=a)}),!1}return[r,s]}class Zd extends ic{constructor(e){super(),oc(this,e,jd,Vd,ac,{})}}export{Zd as component};
