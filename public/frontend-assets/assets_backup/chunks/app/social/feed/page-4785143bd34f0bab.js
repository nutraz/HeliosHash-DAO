(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3498],{6955:function(e,t,s){Promise.resolve().then(s.bind(s,1769)),Promise.resolve().then(s.bind(s,7133))},1769:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return social_FeedList}});var a=s(7573),n=s(7653),social_PostCard=e=>{var t;let{authorHandle:s,content:n,createdAt:o}=e;return(0,a.jsx)("article",{className:"p-3 bg-white rounded-md shadow-sm",children:(0,a.jsxs)("div",{className:"flex items-start gap-3",children:[(0,a.jsx)("div",{className:"w-10 h-10 bg-slate-200 rounded-full flex items-center justify-center font-medium",children:null===(t=s[0])||void 0===t?void 0:t.toUpperCase()}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("div",{className:"font-medium",children:s}),(0,a.jsx)("div",{className:"text-xs text-slate-400",children:new Date(o).toLocaleString()})]}),(0,a.jsx)("div",{className:"mt-2 text-sm text-slate-700",children:n})]})]})})},social_FeedList=()=>{let[e,t]=(0,n.useState)([]),[s,o]=(0,n.useState)(!0);async function load(){var e;o(!0);let s=await fetch("/api/social/posts"),a=await s.json();t(null!==(e=a.data)&&void 0!==e?e:[]),o(!1)}return(0,n.useEffect)(()=>{load();let onPosted=()=>{load()};return window.addEventListener("social-post",onPosted),()=>window.removeEventListener("social-post",onPosted)},[]),(0,a.jsxs)("div",{className:"space-y-3",children:[s&&(0,a.jsx)("div",{className:"text-sm text-slate-500",children:"Loading feedâ€¦"}),!s&&0===e.length&&(0,a.jsx)("div",{className:"text-sm text-slate-500",children:"No posts yet."}),e.map(e=>(0,a.jsx)(social_PostCard,{id:e.id,authorHandle:e.authorHandle,content:e.content,createdAt:e.createdAt},e.id))]})}},7133:function(e,t,s){"use strict";s.r(t);var a=s(7573),n=s(7653);t.default=()=>{let[e,t]=(0,n.useState)(""),[s,o]=(0,n.useState)(!1);async function submitPost(s){if(s.preventDefault(),e.trim()){o(!0);try{await fetch("/api/social/posts",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({authorHandle:"demo",content:e})}),t(""),window.dispatchEvent(new Event("social-post"))}catch(e){console.error(e)}finally{o(!1)}}}return(0,a.jsxs)("form",{onSubmit:submitPost,className:"bg-white p-3 rounded-md shadow-sm mb-4",children:[(0,a.jsx)("textarea",{className:"w-full border rounded p-2",placeholder:"Share an update with the DAO...",value:e,onChange:e=>t(e.target.value),rows:3}),(0,a.jsx)("div",{className:"mt-2 flex justify-end",children:(0,a.jsx)("button",{type:"submit",disabled:s,className:"bg-indigo-600 text-white px-3 py-1 rounded-md text-sm",children:s?"Posting...":"Post"})})]})}},8294:function(e,t,s){"use strict";/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var a=s(7653),n=Symbol.for("react.element"),o=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,i=a.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function q(e,t,s){var a,o={},d=null,c=null;for(a in void 0!==s&&(d=""+s),void 0!==t.key&&(d=""+t.key),void 0!==t.ref&&(c=t.ref),t)r.call(t,a)&&!l.hasOwnProperty(a)&&(o[a]=t[a]);if(e&&e.defaultProps)for(a in t=e.defaultProps)void 0===o[a]&&(o[a]=t[a]);return{$$typeof:n,type:e,key:d,ref:c,props:o,_owner:i.current}}t.Fragment=o,t.jsx=q,t.jsxs=q},7573:function(e,t,s){"use strict";e.exports=s(8294)}},function(e){e.O(0,[1293,1053,1744],function(){return e(e.s=6955)}),_N_E=e.O()}]);