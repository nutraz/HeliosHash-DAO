(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1840],{9771:function(e,t,n){Promise.resolve().then(n.bind(n,2877)),Promise.resolve().then(n.bind(n,3598))},2877:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return AuditLogWidget}});var r=n(7573),o=n(7653),a=n(1953),i=n(3880);function getAuditLogActor(){try{return(0,a.X)(i.v4,n(3880).ep)}catch(e){return{tail:async e=>[],append:async e=>0n}}}function useAuditLog(){let[e,t]=(0,o.useState)([]),[n,r]=(0,o.useState)(!1),[a,i]=(0,o.useState)(null),c=(0,o.useCallback)(async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:20;r(!0),i(null);try{let n=getAuditLogActor(),r=await n.tail(BigInt(e)),o=r.map(e=>({id:Number(e[0]),text:String(e[1])}));t(o)}catch(e){i(String(e))}finally{r(!1)}},[]),u=(0,o.useCallback)(async e=>{r(!0),i(null);try{let t=getAuditLogActor(),n=await t.append(e);return await c(),Number(n)}catch(e){return i(String(e)),null}finally{r(!1)}},[c]);return(0,o.useEffect)(()=>{c()},[c]),{logs:e,loading:n,error:a,fetchTail:c,append:u}}function AuditLogWidget(){let{logs:e,loading:t,error:n,append:a}=useAuditLog(),[i,c]=(0,o.useState)("");return(0,r.jsxs)("div",{className:"p-4 border rounded",children:[(0,r.jsx)("h3",{className:"text-lg font-bold",children:"Audit Log"}),(0,r.jsxs)("div",{className:"mt-2",children:[(0,r.jsx)("input",{value:i,onChange:e=>c(e.target.value),placeholder:"Audit text",className:"border p-2"}),(0,r.jsx)("button",{onClick:async()=>{i&&(await a(i),c(""))},className:"ml-2 px-3 py-1 bg-blue-600 text-white rounded",children:"Append"})]}),t&&(0,r.jsx)("p",{children:"Loading…"}),n&&(0,r.jsx)("p",{className:"text-red-500",children:n}),(0,r.jsx)("ul",{className:"mt-3",children:e.map(e=>(0,r.jsxs)("li",{className:"py-1 border-b",children:[(0,r.jsx)("strong",{children:e.id}),": ",e.text]},e.id))})]})}},3598:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return VCManager}});var r=n(7573),o=n(7653),a=n(1953),i=n(637);function getRevocationActor(){try{return(0,a.X)(i.v4,n(637).ep)}catch(e){return{someMethod:async()=>null}}}function useRevocation(){let[e,t]=(0,o.useState)([]),[n,r]=(0,o.useState)(!1),[a,i]=(0,o.useState)(null),c=(0,o.useCallback)(async()=>{r(!0),i(null);try{let e=getRevocationActor(),n=await e.listRevoked();t(n||[])}catch(e){i(String(e))}finally{r(!1)}},[]),u=(0,o.useCallback)(async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"web-ui";r(!0),i(null);try{let n=getRevocationActor();return await n.revoke(e,t,BigInt(Math.floor(Date.now()/1e3)),"revoked-from-ui"),await c(),!0}catch(e){return i(String(e)),!1}finally{r(!1)}},[c]);return{revoked:e,loading:n,error:a,fetchList:c,revoke:u}}function VCManager(){let{revoked:e,loading:t,error:n,revoke:a,fetchList:i}=useRevocation(),[c,u]=(0,o.useState)("");return(0,r.jsxs)("div",{className:"p-4 border rounded",children:[(0,r.jsx)("h3",{className:"text-lg font-bold",children:"VC Manager"}),(0,r.jsxs)("div",{className:"mt-2",children:[(0,r.jsx)("input",{value:c,onChange:e=>u(e.target.value),placeholder:"VC hash",className:"border p-2"}),(0,r.jsx)("button",{onClick:async()=>{c&&(await a(c),u(""))},className:"ml-2 px-3 py-1 bg-red-600 text-white rounded",children:"Revoke"}),(0,r.jsx)("button",{onClick:i,className:"ml-2 px-3 py-1 bg-gray-600 text-white rounded",children:"Refresh"})]}),t&&(0,r.jsx)("p",{children:"Loading…"}),n&&(0,r.jsx)("p",{className:"text-red-500",children:n}),(0,r.jsx)("ul",{className:"mt-3",children:e.map(e=>(0,r.jsx)("li",{className:"py-1 border-b",children:e},e))})]})}},1953:function(e,t,n){"use strict";n.d(t,{X:function(){return createActor}});var r=n(991),o=n(6077);let a=new Map,i=new WeakMap;async function createActor(e,t,n){if(!e)throw Error("Canister ID not defined for actor creation");if(!/^[a-z0-9\-]+$/.test(e))throw Error("Invalid canister ID: ".concat(e));if(n&&"object"==typeof n){let t=i.get(n);if(t&&t.has(e))return t.get(e)}else if(a.has(e))return a.get(e);let c=new r.i7({identity:n,host:"http://127.0.0.1:4943"});try{await c.fetchRootKey()}catch(e){console.warn("fetchRootKey failed",e)}let u=o.vt.createActor(t,{agent:c,canisterId:e});if(n&&"object"==typeof n){let t=i.get(n);t||(t=new Map,i.set(n,t)),t.set(e,u)}else a.set(e,u);return u}},8294:function(e,t,n){"use strict";/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var r=n(7653),o=Symbol.for("react.element"),a=Symbol.for("react.fragment"),i=Object.prototype.hasOwnProperty,c=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,u={key:!0,ref:!0,__self:!0,__source:!0};function q(e,t,n){var r,a={},l=null,s=null;for(r in void 0!==n&&(l=""+n),void 0!==t.key&&(l=""+t.key),void 0!==t.ref&&(s=t.ref),t)i.call(t,r)&&!u.hasOwnProperty(r)&&(a[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===a[r]&&(a[r]=t[r]);return{$$typeof:o,type:e,key:l,ref:s,props:a,_owner:c.current}}t.Fragment=a,t.jsx=q,t.jsxs=q},7573:function(e,t,n){"use strict";e.exports=n(8294)},8571:function(e){var t,n,r,o=e.exports={};function defaultSetTimout(){throw Error("setTimeout has not been defined")}function defaultClearTimeout(){throw Error("clearTimeout has not been defined")}function runTimeout(e){if(t===setTimeout)return setTimeout(e,0);if((t===defaultSetTimout||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(n){try{return t.call(null,e,0)}catch(n){return t.call(this,e,0)}}}function runClearTimeout(e){if(n===clearTimeout)return clearTimeout(e);if((n===defaultClearTimeout||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(e);try{return n(e)}catch(t){try{return n.call(null,e)}catch(t){return n.call(this,e)}}}!function(){try{t="function"==typeof setTimeout?setTimeout:defaultSetTimout}catch(e){t=defaultSetTimout}try{n="function"==typeof clearTimeout?clearTimeout:defaultClearTimeout}catch(e){n=defaultClearTimeout}}();var a=[],i=!1,c=-1;function cleanUpNextTick(){i&&r&&(i=!1,r.length?a=r.concat(a):c=-1,a.length&&drainQueue())}function drainQueue(){if(!i){var e=runTimeout(cleanUpNextTick);i=!0;for(var t=a.length;t;){for(r=a,a=[];++c<t;)r&&r[c].run();c=-1,t=a.length}r=null,i=!1,runClearTimeout(e)}}function Item(e,t){this.fun=e,this.array=t}function noop(){}o.nextTick=function(e){var t=Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];a.push(new Item(e,t)),1!==a.length||i||runTimeout(drainQueue)},Item.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=noop,o.addListener=noop,o.once=noop,o.off=noop,o.removeListener=noop,o.removeAllListeners=noop,o.emit=noop,o.prependListener=noop,o.prependOnceListener=noop,o.listeners=function(e){return[]},o.binding=function(e){throw Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(e){throw Error("process.chdir is not supported")},o.umask=function(){return 0}},3880:function(e,t,n){"use strict";n.d(t,{v4:function(){return i},ep:function(){return idlFactory}});var r=n(991),o=n(6077);let idlFactory=({IDL:e})=>e.Service({append:e.Func([e.Text],[e.Nat],[]),getLog:e.Func([e.Nat],[e.Text],["query"]),status:e.Func([],[e.Text],["query"]),tail:e.Func([e.Nat],[e.Vec(e.Tuple(e.Nat,e.Text))],["query"])});var a=n(8571);let i=a.env.CANISTER_ID_AUDIT_LOG_CANISTER;i&&((e,t={})=>{let n=t.agent||new r.i7({...t.agentOptions});return t.agent&&t.agentOptions&&console.warn("Detected both agent and agentOptions passed to createActor. Ignoring agentOptions and proceeding with the provided agent."),n.fetchRootKey().catch(e=>{console.warn("Unable to fetch root key. Check to ensure that your local replica is running"),console.error(e)}),o.vt.createActor(idlFactory,{agent:n,canisterId:e,...t.actorOptions})})(i)},637:function(e,t,n){"use strict";n.d(t,{v4:function(){return i},ep:function(){return idlFactory}});var r=n(991),o=n(6077);let idlFactory=({IDL:e})=>e.Service({getRevocation:e.Func([e.Text],[e.Opt(e.Tuple(e.Text,e.Int,e.Text))],["query"]),isRevoked:e.Func([e.Text],[e.Bool],["query"]),listRevoked:e.Func([],[e.Vec(e.Text)],["query"]),revoke:e.Func([e.Text,e.Text,e.Int,e.Text],[e.Bool],[]),status:e.Func([],[e.Text],["query"])});var a=n(8571);let i=a.env.CANISTER_ID_REVOCATION_CANISTER;i&&((e,t={})=>{let n=t.agent||new r.i7({...t.agentOptions});return t.agent&&t.agentOptions&&console.warn("Detected both agent and agentOptions passed to createActor. Ignoring agentOptions and proceeding with the provided agent."),n.fetchRootKey().catch(e=>{console.warn("Unable to fetch root key. Check to ensure that your local replica is running"),console.error(e)}),o.vt.createActor(idlFactory,{agent:n,canisterId:e,...t.actorOptions})})(i)}},function(e){e.O(0,[7212,6077,1293,1053,1744],function(){return e(e.s=9771)}),_N_E=e.O()}]);