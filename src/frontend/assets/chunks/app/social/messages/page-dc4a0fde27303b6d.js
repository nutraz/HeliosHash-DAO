(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8325],{8754:function(e,s,t){Promise.resolve().then(t.bind(t,2952))},2952:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return MessagesPage}});var a=t(7573),n=t(7653);function MessagesPage(){let[e,s]=(0,n.useState)([]),[t,i]=(0,n.useState)(!0),[o,l]=(0,n.useState)(""),r="demo";async function load(){var e;i(!0);let t=await fetch("/api/social/messages?user=".concat(encodeURIComponent(r))),a=await t.json();s(null!==(e=a.data)&&void 0!==e?e:[]),i(!1)}async function send(){o.trim()&&(await fetch("/api/social/messages",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({from:r,to:"alice",text:o})}),l(""),load())}return(0,n.useEffect)(()=>{load()},[]),(0,a.jsxs)("div",{className:"p-6",children:[(0,a.jsx)("h1",{className:"text-2xl font-semibold mb-4",children:"Messages"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,a.jsxs)("aside",{className:"col-span-1 bg-white rounded-md p-4 shadow-sm",children:[(0,a.jsx)("h3",{className:"font-medium",children:"Conversations"}),(0,a.jsx)("div",{className:"mt-3 text-sm text-slate-600",children:"Demo with a single conversation to Alice"})]}),(0,a.jsxs)("main",{className:"col-span-2 bg-white rounded-md p-4 shadow-sm",children:[(0,a.jsx)("div",{className:"mb-3",children:(0,a.jsx)("div",{className:"text-sm text-slate-600",children:"To: Alice"})}),(0,a.jsxs)("div",{className:"space-y-2 mb-4 max-h-64 overflow-auto",children:[t&&(0,a.jsx)("div",{className:"text-sm text-slate-500",children:"Loading messagesâ€¦"}),!t&&0===e.length&&(0,a.jsx)("div",{className:"text-sm text-slate-500",children:"No messages yet."}),e.map(e=>(0,a.jsxs)("div",{className:"p-2 rounded ".concat(e.from===r?"bg-indigo-50 self-end":"bg-slate-100"),children:[(0,a.jsx)("div",{className:"text-sm text-slate-700",children:e.text}),(0,a.jsx)("div",{className:"text-xs text-slate-400 mt-1",children:new Date(e.createdAt).toLocaleString()})]},e.id))]}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)("input",{value:o,onChange:e=>l(e.target.value),className:"flex-1 border rounded p-2",placeholder:"Write a message to Alice"}),(0,a.jsx)("button",{onClick:send,className:"bg-indigo-600 text-white px-3 py-1 rounded-md",children:"Send"})]})]})]})]})}},8294:function(e,s,t){"use strict";/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var a=t(7653),n=Symbol.for("react.element"),i=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,l=a.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,r={key:!0,ref:!0,__self:!0,__source:!0};function q(e,s,t){var a,i={},c=null,d=null;for(a in void 0!==t&&(c=""+t),void 0!==s.key&&(c=""+s.key),void 0!==s.ref&&(d=s.ref),s)o.call(s,a)&&!r.hasOwnProperty(a)&&(i[a]=s[a]);if(e&&e.defaultProps)for(a in s=e.defaultProps)void 0===i[a]&&(i[a]=s[a]);return{$$typeof:n,type:e,key:c,ref:d,props:i,_owner:l.current}}s.Fragment=i,s.jsx=q,s.jsxs=q},7573:function(e,s,t){"use strict";e.exports=t(8294)}},function(e){e.O(0,[1293,1053,1744],function(){return e(e.s=8754)}),_N_E=e.O()}]);